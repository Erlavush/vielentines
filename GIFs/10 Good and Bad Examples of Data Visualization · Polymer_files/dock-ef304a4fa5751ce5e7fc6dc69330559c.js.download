(()=>{var fh=Object.create;var Ns=Object.defineProperty,ph=Object.defineProperties,mh=Object.getOwnPropertyDescriptor,gh=Object.getOwnPropertyDescriptors,yh=Object.getOwnPropertyNames,pi=Object.getOwnPropertySymbols,vh=Object.getPrototypeOf,Ds=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable;var Rn=(i,e,t)=>e in i?Ns(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,I=(i,e)=>{for(var t in e||(e={}))Ds.call(e,t)&&Rn(i,t,e[t]);if(pi)for(var t of pi(e))kn.call(e,t)&&Rn(i,t,e[t]);return i},ne=(i,e)=>ph(i,gh(e));var We=(i,e)=>{var t={};for(var s in i)Ds.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&pi)for(var s of pi(i))e.indexOf(s)<0&&kn.call(i,s)&&(t[s]=i[s]);return t};var bh=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var wh=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of yh(e))!Ds.call(i,r)&&r!==t&&Ns(i,r,{get:()=>e[r],enumerable:!(s=mh(e,r))||s.enumerable});return i};var Sh=(i,e,t)=>(t=i!=null?fh(vh(i)):{},wh(e||!i||!i.__esModule?Ns(t,"default",{value:i,enumerable:!0}):t,i));var lh=bh((ah,Ts)=>{(function(i,e){"use strict";(function(){for(var f=0,d=["ms","moz","webkit","o"],m=0;m<d.length&&!i.requestAnimationFrame;++m)i.requestAnimationFrame=i[d[m]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[d[m]+"CancelAnimationFrame"]||i[d[m]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(p,C){var w=new Date().getTime(),b=Math.max(0,16-(w-f)),A=i.setTimeout(function(){p(w+b)},b);return f=w+b,A}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(p){clearTimeout(p)})})();var t,s,r,n=null,o=null,a=null,l=function(f,d,m){f.addEventListener?f.addEventListener(d,m,!1):f.attachEvent?f.attachEvent("on"+d,m):f["on"+d]=m},h={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},c=function(){t.width=i.innerWidth,t.height=h.barThickness*5;var f=t.getContext("2d");f.shadowBlur=h.shadowBlur,f.shadowColor=h.shadowColor;var d=f.createLinearGradient(0,0,t.width,0);for(var m in h.barColors)d.addColorStop(m,h.barColors[m]);f.lineWidth=h.barThickness,f.beginPath(),f.moveTo(0,h.barThickness/2),f.lineTo(Math.ceil(s*t.width),h.barThickness/2),f.strokeStyle=d,f.stroke()},u=function(){t=e.createElement("canvas");var f=t.style;f.position="fixed",f.top=f.left=f.right=f.margin=f.padding=0,f.zIndex=100001,f.display="none",h.className&&t.classList.add(h.className),e.body.appendChild(t),l(i,"resize",c)},g={config:function(f){for(var d in f)h.hasOwnProperty(d)&&(h[d]=f[d])},show:function(f){if(!r)if(f){if(a)return;a=setTimeout(()=>g.show(),f)}else r=!0,o!==null&&i.cancelAnimationFrame(o),t||u(),t.style.opacity=1,t.style.display="block",g.progress(0),h.autoRun&&function d(){n=i.requestAnimationFrame(d),g.progress("+"+.05*Math.pow(1-Math.sqrt(s),2))}()},progress:function(f){return typeof f=="undefined"||(typeof f=="string"&&(f=(f.indexOf("+")>=0||f.indexOf("-")>=0?s:0)+parseFloat(f)),s=f>1?1:f,c()),s},hide:function(){clearTimeout(a),a=null,r&&(r=!1,n!=null&&(i.cancelAnimationFrame(n),n=null),function f(){if(g.progress("+.1")>=1&&(t.style.opacity-=.05,t.style.opacity<=.05)){t.style.display="none",o=null;return}o=i.requestAnimationFrame(f)}())}};typeof Ts=="object"&&typeof Ts.exports=="object"?Ts.exports=g:typeof define=="function"&&define.amd?define(function(){return g}):this.topbar=g}).call(ah,window,document)});(function(){var i=e();function e(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function r(n,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(n,o.bubbles,o.cancelable,o.detail),a}return r.prototype=window.Event.prototype,r}function t(r,n){var o=document.createElement("input");return o.type="hidden",o.name=r,o.value=n,o}function s(r,n){var o=r.getAttribute("data-to"),a=t("_method",r.getAttribute("data-method")),l=t("_csrf_token",r.getAttribute("data-csrf")),h=document.createElement("form"),c=document.createElement("input"),u=r.getAttribute("target");h.method=r.getAttribute("data-method")==="get"?"get":"post",h.action=o,h.style.display="none",u?h.target=u:n&&(h.target="_blank"),h.appendChild(l),h.appendChild(a),document.body.appendChild(h),c.type="submit",h.appendChild(c),c.click()}window.addEventListener("click",function(r){var n=r.target;if(!r.defaultPrevented)for(;n&&n.getAttribute;){var o=new i("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!n.dispatchEvent(o))return r.preventDefault(),r.stopImmediatePropagation(),!1;if(n.getAttribute("data-method")&&n.getAttribute("data-to"))return s(n,r.metaKey||r.shiftKey),r.preventDefault(),!1;n=n.parentNode}},!1),window.addEventListener("phoenix.link.click",function(r){var n=r.target.getAttribute("data-confirm");n&&!window.confirm(n)&&r.preventDefault()},!1)})();var Ot=i=>typeof i=="function"?i:function(){return i},Ch=typeof self!="undefined"?self:null,_t=typeof window!="undefined"?window:null,et=Ch||_t||et,Eh="2.0.0",Ie={connecting:0,open:1,closing:2,closed:3},Ah=1e4,xh=1e3,me={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Pe={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Ps={longpoll:"longpoll",websocket:"websocket"},Ih={complete:4},mi=class{constructor(i,e,t,s){this.channel=i,this.event=e,this.payload=t||function(){return{}},this.receivedResp=null,this.timeout=s,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(i){this.timeout=i,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(i,e){return this.hasReceived(i)&&e(this.receivedResp.response),this.recHooks.push({status:i,callback:e}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:i,response:e,_ref:t}){this.recHooks.filter(s=>s.status===i).forEach(s=>s.callback(e))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,i=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=i,this.matchReceive(i)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}trigger(i,e){this.channel.trigger(this.refEvent,{status:i,response:e})}},Tn=class{constructor(i,e){this.callback=i,this.timerCalc=e,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},Rh=class{constructor(i,e,t){this.state=me.closed,this.topic=i,this.params=Ot(e||{}),this.socket=t,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new mi(this,Pe.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Tn(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=me.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=me.closed,this.socket.remove(this)}),this.onError(s=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,s),this.isJoining()&&this.joinPush.reset(),this.state=me.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new mi(this,Pe.leave,Ot({}),this.timeout).send(),this.state=me.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Pe.reply,(s,r)=>{this.trigger(this.replyEventName(r),s)})}join(i=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=i,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(i){this.on(Pe.close,i)}onError(i){return this.on(Pe.error,e=>i(e))}on(i,e){let t=this.bindingRef++;return this.bindings.push({event:i,ref:t,callback:e}),t}off(i,e){this.bindings=this.bindings.filter(t=>!(t.event===i&&(typeof e=="undefined"||e===t.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(i,e,t=this.timeout){if(e=e||{},!this.joinedOnce)throw new Error(`tried to push '${i}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let s=new mi(this,i,function(){return e},t);return this.canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}leave(i=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=me.leaving;let e=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Pe.close,"leave")},t=new mi(this,Pe.leave,Ot({}),i);return t.receive("ok",()=>e()).receive("timeout",()=>e()),t.send(),this.canPush()||t.trigger("ok",{}),t}onMessage(i,e,t){return e}isMember(i,e,t,s){return this.topic!==i?!1:s&&s!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:i,event:e,payload:t,joinRef:s}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(i=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=me.joining,this.joinPush.resend(i))}trigger(i,e,t,s){let r=this.onMessage(i,e,t,s);if(e&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let n=this.bindings.filter(o=>o.event===i);for(let o=0;o<n.length;o++)n[o].callback(r,t,s||this.joinRef())}replyEventName(i){return`chan_reply_${i}`}isClosed(){return this.state===me.closed}isErrored(){return this.state===me.errored}isJoined(){return this.state===me.joined}isJoining(){return this.state===me.joining}isLeaving(){return this.state===me.leaving}},yi=class{static request(i,e,t,s,r,n,o){if(et.XDomainRequest){let a=new et.XDomainRequest;return this.xdomainRequest(a,i,e,s,r,n,o)}else{let a=new et.XMLHttpRequest;return this.xhrRequest(a,i,e,t,s,r,n,o)}}static xdomainRequest(i,e,t,s,r,n,o){return i.timeout=r,i.open(e,t),i.onload=()=>{let a=this.parseJSON(i.responseText);o&&o(a)},n&&(i.ontimeout=n),i.onprogress=()=>{},i.send(s),i}static xhrRequest(i,e,t,s,r,n,o,a){return i.open(e,t,!0),i.timeout=n,i.setRequestHeader("Content-Type",s),i.onerror=()=>a&&a(null),i.onreadystatechange=()=>{if(i.readyState===Ih.complete&&a){let l=this.parseJSON(i.responseText);a(l)}},o&&(i.ontimeout=o),i.send(r),i}static parseJSON(i){if(!i||i==="")return null;try{return JSON.parse(i)}catch(e){return console&&console.log("failed to parse JSON response",i),null}}static serialize(i,e){let t=[];for(var s in i){if(!Object.prototype.hasOwnProperty.call(i,s))continue;let r=e?`${e}[${s}]`:s,n=i[s];typeof n=="object"?t.push(this.serialize(n,r)):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}return t.join("&")}static appendParams(i,e){if(Object.keys(e).length===0)return i;let t=i.match(/\?/)?"&":"?";return`${i}${t}${this.serialize(e)}`}},kh=i=>{let e="",t=new Uint8Array(i),s=t.byteLength;for(let r=0;r<s;r++)e+=String.fromCharCode(t[r]);return btoa(e)},Tt=class{constructor(i){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(i),this.readyState=Ie.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(i){return i.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Ps.websocket),"$1/"+Ps.longpoll)}endpointURL(){return yi.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(i,e,t){this.close(i,e,t),this.readyState=Ie.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===Ie.open||this.readyState===Ie.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),i=>{if(i){var{status:e,token:t,messages:s}=i;this.token=t}else e=0;switch(e){case 200:s.forEach(r=>{setTimeout(()=>this.onmessage({data:r}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=Ie.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${e}`)}})}send(i){typeof i!="string"&&(i=kh(i)),this.currentBatch?this.currentBatch.push(i):this.awaitingBatchAck?this.batchBuffer.push(i):(this.currentBatch=[i],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(i){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",i.join(`
`),()=>this.onerror("timeout"),e=>{this.awaitingBatchAck=!1,!e||e.status!==200?(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(i,e,t){for(let r of this.reqs)r.abort();this.readyState=Ie.closed;let s=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:i,reason:e,wasClean:t});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",s)):this.onclose(s)}ajax(i,e,t,s,r){let n,o=()=>{this.reqs.delete(n),s()};n=yi.request(i,this.endpointURL(),e,t,this.timeout,o,a=>{this.reqs.delete(n),this.isActive()&&r(a)}),this.reqs.add(n)}};var gi={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(i,e){if(i.payload.constructor===ArrayBuffer)return e(this.binaryEncode(i));{let t=[i.join_ref,i.ref,i.topic,i.event,i.payload];return e(JSON.stringify(t))}},decode(i,e){if(i.constructor===ArrayBuffer)return e(this.binaryDecode(i));{let[t,s,r,n,o]=JSON.parse(i);return e({join_ref:t,ref:s,topic:r,event:n,payload:o})}},binaryEncode(i){let{join_ref:e,ref:t,event:s,topic:r,payload:n}=i,o=this.META_LENGTH+e.length+t.length+r.length+s.length,a=new ArrayBuffer(this.HEADER_LENGTH+o),l=new DataView(a),h=0;l.setUint8(h++,this.KINDS.push),l.setUint8(h++,e.length),l.setUint8(h++,t.length),l.setUint8(h++,r.length),l.setUint8(h++,s.length),Array.from(e,u=>l.setUint8(h++,u.charCodeAt(0))),Array.from(t,u=>l.setUint8(h++,u.charCodeAt(0))),Array.from(r,u=>l.setUint8(h++,u.charCodeAt(0))),Array.from(s,u=>l.setUint8(h++,u.charCodeAt(0)));var c=new Uint8Array(a.byteLength+n.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(n),a.byteLength),c.buffer},binaryDecode(i){let e=new DataView(i),t=e.getUint8(0),s=new TextDecoder;switch(t){case this.KINDS.push:return this.decodePush(i,e,s);case this.KINDS.reply:return this.decodeReply(i,e,s);case this.KINDS.broadcast:return this.decodeBroadcast(i,e,s)}},decodePush(i,e,t){let s=e.getUint8(1),r=e.getUint8(2),n=e.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=t.decode(i.slice(o,o+s));o=o+s;let l=t.decode(i.slice(o,o+r));o=o+r;let h=t.decode(i.slice(o,o+n));o=o+n;let c=i.slice(o,i.byteLength);return{join_ref:a,ref:null,topic:l,event:h,payload:c}},decodeReply(i,e,t){let s=e.getUint8(1),r=e.getUint8(2),n=e.getUint8(3),o=e.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=t.decode(i.slice(a,a+s));a=a+s;let h=t.decode(i.slice(a,a+r));a=a+r;let c=t.decode(i.slice(a,a+n));a=a+n;let u=t.decode(i.slice(a,a+o));a=a+o;let g=i.slice(a,i.byteLength),f={status:u,response:g};return{join_ref:l,ref:h,topic:c,event:Pe.reply,payload:f}},decodeBroadcast(i,e,t){let s=e.getUint8(1),r=e.getUint8(2),n=this.HEADER_LENGTH+2,o=t.decode(i.slice(n,n+s));n=n+s;let a=t.decode(i.slice(n,n+r));n=n+r;let l=i.slice(n,i.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},_n=class{constructor(i,e={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=e.timeout||Ah,this.transport=e.transport||et.WebSocket||Tt,this.primaryPassedHealthCheck=!1,this.longPollFallbackMs=e.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=e.sessionStorage||et&&et.sessionStorage,this.establishedConnections=0,this.defaultEncoder=gi.encode.bind(gi),this.defaultDecoder=gi.decode.bind(gi),this.closeWasClean=!1,this.binaryType=e.binaryType||"arraybuffer",this.connectClock=1,this.transport!==Tt?(this.encode=e.encode||this.defaultEncoder,this.decode=e.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let t=null;_t&&_t.addEventListener&&(_t.addEventListener("pagehide",s=>{this.conn&&(this.disconnect(),t=this.connectClock)}),_t.addEventListener("pageshow",s=>{t===this.connectClock&&(t=null,this.connect())})),this.heartbeatIntervalMs=e.heartbeatIntervalMs||3e4,this.rejoinAfterMs=s=>e.rejoinAfterMs?e.rejoinAfterMs(s):[1e3,2e3,5e3][s-1]||1e4,this.reconnectAfterMs=s=>e.reconnectAfterMs?e.reconnectAfterMs(s):[10,50,100,150,200,250,500,1e3,2e3][s-1]||5e3,this.logger=e.logger||null,!this.logger&&e.debug&&(this.logger=(s,r,n)=>{console.log(`${s}: ${r}`,n)}),this.longpollerTimeout=e.longpollerTimeout||2e4,this.params=Ot(e.params||{}),this.endPoint=`${i}/${Ps.websocket}`,this.vsn=e.vsn||Eh,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Tn(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return Tt}replaceTransport(i){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=i}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let i=yi.appendParams(yi.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return i.charAt(0)!=="/"?i:i.charAt(1)==="/"?`${this.protocol()}:${i}`:`${this.protocol()}://${location.host}${i}`}disconnect(i,e,t){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(i,e,t)}connect(i){i&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=Ot(i)),!this.conn&&(this.longPollFallbackMs&&this.transport!==Tt?this.connectWithFallback(Tt,this.longPollFallbackMs):this.transportConnect())}log(i,e,t){this.logger&&this.logger(i,e,t)}hasLogger(){return this.logger!==null}onOpen(i){let e=this.makeRef();return this.stateChangeCallbacks.open.push([e,i]),e}onClose(i){let e=this.makeRef();return this.stateChangeCallbacks.close.push([e,i]),e}onError(i){let e=this.makeRef();return this.stateChangeCallbacks.error.push([e,i]),e}onMessage(i){let e=this.makeRef();return this.stateChangeCallbacks.message.push([e,i]),e}ping(i){if(!this.isConnected())return!1;let e=this.makeRef(),t=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e});let s=this.onMessage(r=>{r.ref===e&&(this.off([s]),i(Date.now()-t))});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=i=>this.onConnError(i),this.conn.onmessage=i=>this.onConnMessage(i),this.conn.onclose=i=>this.onConnClose(i)}getSession(i){return this.sessionStore&&this.sessionStore.getItem(i)}storeSession(i,e){this.sessionStore&&this.sessionStore.setItem(i,e)}connectWithFallback(i,e=2500){clearTimeout(this.fallbackTimer);let t=!1,s=!0,r,n,o=a=>{this.log("transport",`falling back to ${i.name}...`,a),this.off([r,n]),s=!1,this.replaceTransport(i),this.transportConnect()};if(this.getSession(`phx:fallback:${i.name}`))return o("memorized");this.fallbackTimer=setTimeout(o,e),n=this.onError(a=>{this.log("transport","error",a),s&&!t&&(clearTimeout(this.fallbackTimer),o(a))}),this.onOpen(()=>{if(t=!0,!s)return this.primaryPassedHealthCheck||this.storeSession(`phx:fallback:${i.name}`,"true"),this.log("transport",`established ${i.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,e),this.ping(a=>{this.log("transport","connected to primary after",a),this.primaryPassedHealthCheck=!0,clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,i])=>i())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),xh,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(i,e,t){if(!this.conn)return i&&i();this.waitForBufferDone(()=>{this.conn&&(e?this.conn.close(e,t||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),i&&i()})})}waitForBufferDone(i,e=1){if(e===5||!this.conn||!this.conn.bufferedAmount){i();return}setTimeout(()=>{this.waitForBufferDone(i,e+1)},150*e)}waitForSocketClosed(i,e=1){if(e===5||!this.conn||this.conn.readyState===Ie.closed){i();return}setTimeout(()=>{this.waitForSocketClosed(i,e+1)},150*e)}onConnClose(i){let e=i&&i.code;this.hasLogger()&&this.log("transport","close",i),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&e!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,t])=>t(i))}onConnError(i){this.hasLogger()&&this.log("transport",i);let e=this.transport,t=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,s])=>{s(i,e,t)}),(e===this.transport||t>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(i=>{i.isErrored()||i.isLeaving()||i.isClosed()||i.trigger(Pe.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case Ie.connecting:return"connecting";case Ie.open:return"open";case Ie.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(i){this.off(i.stateChangeRefs),this.channels=this.channels.filter(e=>e!==i)}off(i){for(let e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter(([t])=>i.indexOf(t)===-1)}channel(i,e={}){let t=new Rh(i,e,this);return this.channels.push(t),t}push(i){if(this.hasLogger()){let{topic:e,event:t,payload:s,ref:r,join_ref:n}=i;this.log("push",`${e} ${t} (${n}, ${r})`,s)}this.isConnected()?this.encode(i,e=>this.conn.send(e)):this.sendBuffer.push(()=>this.encode(i,e=>this.conn.send(e)))}makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}onConnMessage(i){this.decode(i.data,e=>{let{topic:t,event:s,payload:r,ref:n,join_ref:o}=e;n&&n===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${r.status||""} ${t} ${s} ${n&&"("+n+")"||""}`,r);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];l.isMember(t,s,r,o)&&l.trigger(s,r,n,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(e)}})}leaveOpenTopic(i){let e=this.channels.find(t=>t.topic===i&&(t.isJoined()||t.isJoining()));e&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${i}"`),e.leave())}};var oo="consecutive-reloads",Th=10,_h=5e3,Oh=1e4,Mh=3e4,ao=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading","phx-hook-loading"],$e="data-phx-component",Ls="data-phx-link",Nh="track-static",Dh="data-phx-link-state",ft="data-phx-ref-loading",ve="data-phx-ref-src",ge="data-phx-ref-lock",lo="track-uploads",Fe="data-phx-upload-ref",Xs="data-phx-preflighted-refs",Ph="data-phx-done-refs",On="drop-target",Ws="data-phx-active-refs",xi="phx:live-file:updated",ho="data-phx-skip",co="data-phx-id",Mn="data-phx-prune",Nn="phx-connected",tt="phx-loading",ct="phx-error",Dn="phx-client-error",Mt="phx-server-error",rt="data-phx-parent-id",Ys="data-phx-main",Ge="data-phx-root-id",Vs="viewport-top",zs="viewport-bottom",Lh="trigger-action",Ri="phx-has-focused",$h=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],uo=["checkbox","radio"],Wt="phx-has-submitted",Te="data-phx-session",nt=`[${Te}]`,Pn="data-phx-sticky",st="data-phx-static",Gs="data-phx-readonly",dt="data-phx-disabled",Ln="disable-with",ki="data-phx-disable-with-restore",Nt="hook",Fh="debounce",Uh="throttle",Ht="update",$s="stream",Dt="data-phx-stream",Bh="key",Re="phxPrivate",$n="auto-recover",vi="phx:live-socket:debug",Fs="phx:live-socket:profiling",Us="phx:live-socket:latency-sim",bi="phx:nav-history-position",Hh="progress",Fn="mounted",Un="__phoenix_reload_status__",jh=1,Bn=3,Wh=200,Vh="phx-",zh=3e4,Pt="debounce-trigger",Lt="throttled",Hn="debounce-prev-key",Gh={debounce:300,throttle:300},jn=[ft,ve,ge],wi="d",ke="s",Bs="r",ae="c",Wn="e",Vn="r",zn="t",Jh="p",Gn="stream",Xh=class{constructor(i,e,t){let{chunk_size:s,chunk_timeout:r}=e;this.liveSocket=t,this.entry=i,this.offset=0,this.chunkSize=s,this.chunkTimeout=r,this.chunkTimer=null,this.errored=!1,this.uploadChannel=t.channel(`lvu:${i.ref}`,{token:i.metadata()})}error(i){this.errored||(this.uploadChannel.leave(),this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(i))}upload(){this.uploadChannel.onError(i=>this.error(i)),this.uploadChannel.join().receive("ok",i=>this.readNextChunk()).receive("error",i=>this.error(i))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let i=new window.FileReader,e=this.entry.file.slice(this.offset,this.chunkSize+this.offset);i.onload=t=>{if(t.target.error===null)this.offset+=t.target.result.byteLength,this.pushChunk(t.target.result);else return de("Read error: "+t.target.error)},i.readAsArrayBuffer(e)}pushChunk(i){this.uploadChannel.isJoined()&&this.uploadChannel.push("chunk",i,this.chunkTimeout).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))}).receive("error",({reason:e})=>this.error(e))}},de=(i,e)=>console.error&&console.error(i,e),Le=i=>{let e=typeof i;return e==="number"||e==="string"&&/^(0|[1-9]\d*)$/.test(i)};function Yh(){let i=new Set,e=document.querySelectorAll("*[id]");for(let t=0,s=e.length;t<s;t++)i.has(e[t].id)?console.error(`Multiple IDs detected: ${e[t].id}. Ensure unique element ids.`):i.add(e[t].id)}var Kh=(i,e,t,s)=>{i.liveSocket.isDebugEnabled()&&console.log(`${i.id} ${e}: ${t} - `,s)},$t=i=>typeof i=="function"?i:function(){return i},Ii=i=>JSON.parse(JSON.stringify(i)),jt=(i,e,t)=>{do{if(i.matches(`[${e}]`)&&!i.disabled)return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1&&!(t&&t.isSameNode(i)||i.matches(nt)));return null},ut=i=>i!==null&&typeof i=="object"&&!(i instanceof Array),qh=(i,e)=>JSON.stringify(i)===JSON.stringify(e),Jn=i=>{for(let e in i)return!1;return!0},ze=(i,e)=>i&&e(i),Zh=function(i,e,t,s){i.forEach(r=>{new Xh(r,t.config,s).upload()})},Qh={canPushState(){return typeof history.pushState!="undefined"},dropLocal(i,e,t){return i.removeItem(this.localKey(e,t))},updateLocal(i,e,t,s,r){let n=this.getLocal(i,e,t),o=this.localKey(e,t),a=n===null?s:r(n);return i.setItem(o,JSON.stringify(a)),a},getLocal(i,e,t){return JSON.parse(i.getItem(this.localKey(e,t)))},updateCurrentState(i){this.canPushState()&&history.replaceState(i(history.state||{}),"",window.location.href)},pushState(i,e,t){if(this.canPushState()){if(t!==window.location.href){if(e.type=="redirect"&&e.scroll){let s=history.state||{};s.scroll=e.scroll,history.replaceState(s,"",window.location.href)}delete e.scroll,history[i+"State"](e,"",t||null),window.requestAnimationFrame(()=>{let s=this.getHashTargetEl(window.location.hash);s?s.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)})}}else this.redirect(t)},setCookie(i,e,t){let s=typeof t=="number"?` max-age=${t};`:"";document.cookie=`${i}=${e};${s} path=/`},getCookie(i){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${i}s*=s*([^;]*).*$)|^.*$`),"$1")},deleteCookie(i){document.cookie=`${i}=; max-age=-1; path=/`},redirect(i,e){e&&this.setCookie("__phoenix_flash__",e,60),window.location=i},localKey(i,e){return`${i}-${e}`},getHashTargetEl(i){let e=i.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},ue=Qh,it={byId(i){return document.getElementById(i)||de(`no id found for ${i}`)},removeClass(i,e){i.classList.remove(e),i.classList.length===0&&i.removeAttribute("class")},all(i,e,t){if(!i)return[];let s=Array.from(i.querySelectorAll(e));return t?s.forEach(t):s},childNodeLength(i){let e=document.createElement("template");return e.innerHTML=i,e.content.childElementCount},isUploadInput(i){return i.type==="file"&&i.getAttribute(Fe)!==null},isAutoUpload(i){return i.hasAttribute("data-phx-auto-upload")},findUploadInputs(i){let e=i.id,t=this.all(document,`input[type="file"][${Fe}][form="${e}"]`);return this.all(i,`input[type="file"][${Fe}]`).concat(t)},findComponentNodeList(i,e){return this.filterWithinSameLiveView(this.all(i,`[${$e}="${e}"]`),i)},isPhxDestroyed(i){return!!(i.id&&it.private(i,"destroyed"))},wantsNewTab(i){let e=i.ctrlKey||i.shiftKey||i.metaKey||i.button&&i.button===1,t=i.target instanceof HTMLAnchorElement&&i.target.hasAttribute("download"),s=i.target.hasAttribute("target")&&i.target.getAttribute("target").toLowerCase()==="_blank",r=i.target.hasAttribute("target")&&!i.target.getAttribute("target").startsWith("_");return e||s||t||r},isUnloadableFormSubmit(i){return i.target&&i.target.getAttribute("method")==="dialog"||i.submitter&&i.submitter.getAttribute("formmethod")==="dialog"?!1:!i.defaultPrevented&&!this.wantsNewTab(i)},isNewPageClick(i,e){let t=i.target instanceof HTMLAnchorElement?i.target.getAttribute("href"):null,s;if(i.defaultPrevented||t===null||this.wantsNewTab(i)||t.startsWith("mailto:")||t.startsWith("tel:")||i.target.isContentEditable)return!1;try{s=new URL(t)}catch(r){try{s=new URL(t,e)}catch(n){return!0}}return s.host===e.host&&s.protocol===e.protocol&&s.pathname===e.pathname&&s.search===e.search?s.hash===""&&!s.href.endsWith("#"):s.protocol.startsWith("http")},markPhxChildDestroyed(i){this.isPhxChild(i)&&i.setAttribute(Te,""),this.putPrivate(i,"destroyed",!0)},findPhxChildrenInFragment(i,e){let t=document.createElement("template");return t.innerHTML=i,this.findPhxChildren(t.content,e)},isIgnored(i,e){return(i.getAttribute(e)||i.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(i,e,t){return i.getAttribute&&t.indexOf(i.getAttribute(e))>=0},findPhxSticky(i){return this.all(i,`[${Pn}]`)},findPhxChildren(i,e){return this.all(i,`${nt}[${rt}="${e}"]`)},findExistingParentCIDs(i,e){let t=new Set,s=new Set;return e.forEach(r=>{this.filterWithinSameLiveView(this.all(i,`[${$e}="${r}"]`),i).forEach(n=>{t.add(r),this.all(n,`[${$e}]`).map(o=>parseInt(o.getAttribute($e))).forEach(o=>s.add(o))})}),s.forEach(r=>t.delete(r)),t},filterWithinSameLiveView(i,e){return e.querySelector(nt)?i.filter(t=>this.withinSameLiveView(t,e)):i},withinSameLiveView(i,e){for(;i=i.parentNode;){if(i.isSameNode(e))return!0;if(i.getAttribute(Te)!==null)return!1}},private(i,e){return i[Re]&&i[Re][e]},deletePrivate(i,e){i[Re]&&delete i[Re][e]},putPrivate(i,e,t){i[Re]||(i[Re]={}),i[Re][e]=t},updatePrivate(i,e,t,s){let r=this.private(i,e);r===void 0?this.putPrivate(i,e,s(t)):this.putPrivate(i,e,s(r))},syncPendingAttrs(i,e){i.hasAttribute(ve)&&(ao.forEach(t=>{i.classList.contains(t)&&e.classList.add(t)}),jn.filter(t=>i.hasAttribute(t)).forEach(t=>{e.setAttribute(t,i.getAttribute(t))}))},copyPrivates(i,e){e[Re]&&(i[Re]=e[Re])},putTitle(i){let e=document.querySelector("title");if(e){let{prefix:t,suffix:s,default:r}=e.dataset,n=typeof i!="string"||i.trim()==="";if(n&&typeof r!="string")return;let o=n?r:i;document.title=`${t||""}${o||""}${s||""}`}else document.title=i},debounce(i,e,t,s,r,n,o,a){let l=i.getAttribute(t),h=i.getAttribute(r);l===""&&(l=s),h===""&&(h=n);let c=l||h;switch(c){case null:return a();case"blur":this.once(i,"debounce-blur")&&i.addEventListener("blur",()=>{o()&&a()});return;default:let u=parseInt(c),g=()=>h?this.deletePrivate(i,Lt):a(),f=this.incCycle(i,Pt,g);if(isNaN(u))return de(`invalid throttle/debounce value: ${c}`);if(h){let m=!1;if(e.type==="keydown"){let p=this.private(i,Hn);this.putPrivate(i,Hn,e.key),m=p!==e.key}if(!m&&this.private(i,Lt))return!1;{a();let p=setTimeout(()=>{o()&&this.triggerCycle(i,Pt)},u);this.putPrivate(i,Lt,p)}}else setTimeout(()=>{o()&&this.triggerCycle(i,Pt,f)},u);let d=i.form;d&&this.once(d,"bind-debounce")&&d.addEventListener("submit",()=>{Array.from(new FormData(d).entries(),([m])=>{let p=d.querySelector(`[name="${m}"]`);this.incCycle(p,Pt),this.deletePrivate(p,Lt)})}),this.once(i,"bind-debounce")&&i.addEventListener("blur",()=>{clearTimeout(this.private(i,Lt)),this.triggerCycle(i,Pt)})}},triggerCycle(i,e,t){let[s,r]=this.private(i,e);t||(t=s),t===s&&(this.incCycle(i,e),r())},once(i,e){return this.private(i,e)===!0?!1:(this.putPrivate(i,e,!0),!0)},incCycle(i,e,t=function(){}){let[s]=this.private(i,e)||[0,t];return s++,this.putPrivate(i,e,[s,t]),s},maintainPrivateHooks(i,e,t,s){i.hasAttribute&&i.hasAttribute("data-phx-hook")&&!e.hasAttribute("data-phx-hook")&&e.setAttribute("data-phx-hook",i.getAttribute("data-phx-hook")),e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute(s))&&e.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},putCustomElHook(i,e){i.isConnected?i.setAttribute("data-phx-hook",""):console.error(`
        hook attached to non-connected DOM element
        ensure you are calling createHook within your connectedCallback. ${i.outerHTML}
      `),this.putPrivate(i,"custom-el-hook",e)},getCustomElHook(i){return this.private(i,"custom-el-hook")},isUsedInput(i){return i.nodeType===Node.ELEMENT_NODE&&(this.private(i,Ri)||this.private(i,Wt))},resetForm(i){Array.from(i.elements).forEach(e=>{this.deletePrivate(e,Ri),this.deletePrivate(e,Wt)})},isPhxChild(i){return i.getAttribute&&i.getAttribute(rt)},isPhxSticky(i){return i.getAttribute&&i.getAttribute(Pn)!==null},isChildOfAny(i,e){return!!e.find(t=>t.contains(i))},firstPhxChild(i){return this.isPhxChild(i)?i:this.all(i,`[${rt}]`)[0]},dispatchEvent(i,e,t={}){let s=!0;i.nodeName==="INPUT"&&i.type==="file"&&e==="click"&&(s=!1);let o={bubbles:t.bubbles===void 0?s:!!t.bubbles,cancelable:!0,detail:t.detail||{}},a=e==="click"?new MouseEvent("click",o):new CustomEvent(e,o);i.dispatchEvent(a)},cloneNode(i,e){if(typeof e=="undefined")return i.cloneNode(!0);{let t=i.cloneNode(!1);return t.innerHTML=e,t}},mergeAttrs(i,e,t={}){let s=new Set(t.exclude||[]),r=t.isIgnored,n=e.attributes;for(let a=n.length-1;a>=0;a--){let l=n[a].name;if(s.has(l))l==="value"&&i.value===e.value&&i.setAttribute("value",e.getAttribute(l));else{let h=e.getAttribute(l);i.getAttribute(l)!==h&&(!r||r&&l.startsWith("data-"))&&i.setAttribute(l,h)}}let o=i.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;r?l.startsWith("data-")&&!e.hasAttribute(l)&&!jn.includes(l)&&i.removeAttribute(l):e.hasAttribute(l)||i.removeAttribute(l)}},mergeFocusedInput(i,e){i instanceof HTMLSelectElement||it.mergeAttrs(i,e,{exclude:["value"]}),e.readOnly?i.setAttribute("readonly",!0):i.removeAttribute("readonly")},hasSelectionRange(i){return i.setSelectionRange&&(i.type==="text"||i.type==="textarea")},restoreFocus(i,e,t){if(i instanceof HTMLSelectElement&&i.focus(),!it.isTextualInput(i))return;i.matches(":focus")||i.focus(),this.hasSelectionRange(i)&&i.setSelectionRange(e,t)},isFormInput(i){return/^(?:input|select|textarea)$/i.test(i.tagName)&&i.type!=="button"},syncAttrsToProps(i){i instanceof HTMLInputElement&&uo.indexOf(i.type.toLocaleLowerCase())>=0&&(i.checked=i.getAttribute("checked")!==null)},isTextualInput(i){return $h.indexOf(i.type)>=0},isNowTriggerFormExternal(i,e){return i.getAttribute&&i.getAttribute(e)!==null},cleanChildNodes(i,e){if(it.isPhxUpdate(i,e,["append","prepend"])){let t=[];i.childNodes.forEach(s=>{s.id||(!(s.nodeType===Node.TEXT_NODE&&s.nodeValue.trim()==="")&&s.nodeType!==Node.COMMENT_NODE&&de(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(s.outerHTML||s.nodeValue).trim()}"

`),t.push(s))}),t.forEach(s=>s.remove())}},replaceRootContainer(i,e,t){let s=new Set(["id",Te,st,Ys,Ge]);if(i.tagName.toLowerCase()===e.toLowerCase())return Array.from(i.attributes).filter(r=>!s.has(r.name.toLowerCase())).forEach(r=>i.removeAttribute(r.name)),Object.keys(t).filter(r=>!s.has(r.toLowerCase())).forEach(r=>i.setAttribute(r,t[r])),i;{let r=document.createElement(e);return Object.keys(t).forEach(n=>r.setAttribute(n,t[n])),s.forEach(n=>r.setAttribute(n,i.getAttribute(n))),r.innerHTML=i.innerHTML,i.replaceWith(r),r}},getSticky(i,e,t){let s=(it.private(i,"sticky")||[]).find(([r])=>e===r);if(s){let[r,n,o]=s;return o}else return typeof t=="function"?t():t},deleteSticky(i,e){this.updatePrivate(i,"sticky",[],t=>t.filter(([s,r])=>s!==e))},putSticky(i,e,t){let s=t(i);this.updatePrivate(i,"sticky",[],r=>{let n=r.findIndex(([o])=>e===o);return n>=0?r[n]=[e,t,s]:r.push([e,t,s]),r})},applyStickyOperations(i){let e=it.private(i,"sticky");e&&e.forEach(([t,s,r])=>this.putSticky(i,t,s))}},y=it,Ft=class{static isActive(i,e){let t=e._phxRef===void 0,r=i.getAttribute(Ws).split(",").indexOf(se.genFileRef(e))>=0;return e.size>0&&(t||r)}static isPreflighted(i,e){return i.getAttribute(Xs).split(",").indexOf(se.genFileRef(e))>=0&&this.isActive(i,e)}static isPreflightInProgress(i){return i._preflightInProgress===!0}static markPreflightInProgress(i){i._preflightInProgress=!0}constructor(i,e,t,s){this.ref=se.genFileRef(e),this.fileEl=i,this.file=e,this.view=t,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(xi,this._onElUpdated),this.autoUpload=s}metadata(){return this.meta}progress(i){this._progress=Math.floor(i),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{se.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}isCancelled(){return this._isCancelled}cancel(){this.file._preflightInProgress=!1,this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(i="failed"){this.fileEl.removeEventListener(xi,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:i}),this.isAutoUpload()||se.clearFiles(this.fileEl)}isAutoUpload(){return this.autoUpload}onDone(i){this._onDone=()=>{this.fileEl.removeEventListener(xi,this._onElUpdated),i()}}onElUpdated(){this.fileEl.getAttribute(Ws).split(",").indexOf(this.ref)===-1&&(se.untrackFile(this.fileEl,this.file),this.cancel())}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref,meta:typeof this.file.meta=="function"?this.file.meta():void 0}}uploader(i){if(this.meta.uploader){let e=i[this.meta.uploader]||de(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:e}}else return{name:"channel",callback:Zh}}zipPostFlight(i){this.meta=i.entries[this.ref],this.meta||de(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:i})}},ec=0,se=class Js{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(ec++).toString(),e._phxRef)}static getEntryDataURL(e,t,s){let r=this.activeFiles(e).find(n=>this.genFileRef(n)===t);s(URL.createObjectURL(r))}static hasUploadsInProgress(e){let t=0;return y.findUploadInputs(e).forEach(s=>{s.getAttribute(Xs)!==s.getAttribute(Ph)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),s={};return t.forEach(r=>{let n={path:e.name},o=e.getAttribute(Fe);s[o]=s[o]||[],n.ref=this.genFileRef(r),n.last_modified=r.lastModified,n.name=r.name||n.ref,n.relative_path=r.webkitRelativePath,n.type=r.type,n.size=r.size,typeof r.meta=="function"&&(n.meta=r.meta()),s[o].push(n)}),s}static clearFiles(e){e.value=null,e.removeAttribute(Fe),y.putPrivate(e,"files",[])}static untrackFile(e,t){y.putPrivate(e,"files",y.private(e,"files").filter(s=>!Object.is(s,t)))}static trackFiles(e,t,s){if(e.getAttribute("multiple")!==null){let r=t.filter(n=>!this.activeFiles(e).find(o=>Object.is(o,n)));y.updatePrivate(e,"files",[],n=>n.concat(r)),e.value=null}else s&&s.files.length>0&&(e.files=s.files),y.putPrivate(e,"files",t)}static activeFileInputs(e){let t=y.findUploadInputs(e);return Array.from(t).filter(s=>s.files&&this.activeFiles(s).length>0)}static activeFiles(e){return(y.private(e,"files")||[]).filter(t=>Ft.isActive(e,t))}static inputsAwaitingPreflight(e){let t=y.findUploadInputs(e);return Array.from(t).filter(s=>this.filesAwaitingPreflight(s).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!Ft.isPreflighted(e,t)&&!Ft.isPreflightInProgress(t))}static markPreflightInProgress(e){e.forEach(t=>Ft.markPreflightInProgress(t.file))}constructor(e,t,s){this.autoUpload=y.isAutoUpload(e),this.view=t,this.onComplete=s,this._entries=Array.from(Js.filesAwaitingPreflight(e)||[]).map(r=>new Ft(e,r,t,this.autoUpload)),Js.markPreflightInProgress(this._entries),this.numEntriesInProgress=this._entries.length}isAutoUpload(){return this.autoUpload}entries(){return this._entries}initAdapterUpload(e,t,s){this._entries=this._entries.map(n=>(n.isCancelled()?(this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()):(n.zipPostFlight(e),n.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()})),n));let r=this._entries.reduce((n,o)=>{if(!o.meta)return n;let{name:a,callback:l}=o.uploader(s.uploaders);return n[a]=n[a]||{callback:l,entries:[]},n[a].entries.push(o),n},{});for(let n in r){let{callback:o,entries:a}=r[n];o(a,t,e,s)}}},tc={anyOf(i,e){return e.find(t=>i instanceof t)},isFocusable(i,e){return i instanceof HTMLAnchorElement&&i.rel!=="ignore"||i instanceof HTMLAreaElement&&i.href!==void 0||!i.disabled&&this.anyOf(i,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||i instanceof HTMLIFrameElement||i.tabIndex>0||!e&&i.getAttribute("tabindex")!==null&&i.getAttribute("aria-hidden")!=="true"},attemptFocus(i,e){if(this.isFocusable(i,e))try{i.focus()}catch(t){}return!!document.activeElement&&document.activeElement.isSameNode(i)},focusFirstInteractive(i){let e=i.firstElementChild;for(;e;){if(this.attemptFocus(e,!0)||this.focusFirstInteractive(e,!0))return!0;e=e.nextElementSibling}},focusFirst(i){let e=i.firstElementChild;for(;e;){if(this.attemptFocus(e)||this.focusFirst(e))return!0;e=e.nextElementSibling}},focusLast(i){let e=i.lastElementChild;for(;e;){if(this.attemptFocus(e)||this.focusLast(e))return!0;e=e.previousElementSibling}}},pt=tc,fo={LiveFileUpload:{activeRefs(){return this.el.getAttribute(Ws)},preflightedRefs(){return this.el.getAttribute(Xs)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let i=this.preflightedRefs();this.preflightedWas!==i&&(this.preflightedWas=i,i===""&&this.__view().cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(xi))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(Fe)),se.getEntryDataURL(this.inputEl,this.ref,i=>{this.url=i,this.el.src=i})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>pt.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>pt.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&pt.focusFirst(this.el)}}},po=i=>["HTML","BODY"].indexOf(i.nodeName.toUpperCase())>=0?null:["scroll","auto"].indexOf(getComputedStyle(i).overflowY)>=0?i:po(i.parentElement),Xn=i=>i?i.scrollTop:document.documentElement.scrollTop||document.body.scrollTop,Ks=i=>i?i.getBoundingClientRect().bottom:window.innerHeight||document.documentElement.clientHeight,qs=i=>i?i.getBoundingClientRect().top:0,ic=(i,e)=>{let t=i.getBoundingClientRect();return Math.ceil(t.top)>=qs(e)&&Math.ceil(t.left)>=0&&Math.floor(t.top)<=Ks(e)},sc=(i,e)=>{let t=i.getBoundingClientRect();return Math.ceil(t.bottom)>=qs(e)&&Math.ceil(t.left)>=0&&Math.floor(t.bottom)<=Ks(e)},Yn=(i,e)=>{let t=i.getBoundingClientRect();return Math.ceil(t.top)>=qs(e)&&Math.ceil(t.left)>=0&&Math.floor(t.top)<=Ks(e)};fo.InfiniteScroll={mounted(){this.scrollContainer=po(this.el);let i=Xn(this.scrollContainer),e=!1,t=500,s=null,r=this.throttle(t,(a,l)=>{s=()=>!0,this.liveSocket.execJSHookPush(this.el,a,{id:l.id,_overran:!0},()=>{s=null})}),n=this.throttle(t,(a,l)=>{s=()=>l.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{s=null,window.requestAnimationFrame(()=>{Yn(l,this.scrollContainer)||l.scrollIntoView({block:"start"})})})}),o=this.throttle(t,(a,l)=>{s=()=>l.scrollIntoView({block:"end"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{s=null,window.requestAnimationFrame(()=>{Yn(l,this.scrollContainer)||l.scrollIntoView({block:"end"})})})});this.onScroll=a=>{let l=Xn(this.scrollContainer);if(s)return i=l,s();let h=this.el.getBoundingClientRect(),c=this.el.getAttribute(this.liveSocket.binding("viewport-top")),u=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),g=this.el.lastElementChild,f=this.el.firstElementChild,d=l<i,m=l>i;d&&c&&!e&&h.top>=0?(e=!0,r(c,f)):m&&e&&h.top<=0&&(e=!1),c&&d&&ic(f,this.scrollContainer)?n(c,f):u&&m&&sc(g,this.scrollContainer)&&o(u,g),i=l},this.scrollContainer?this.scrollContainer.addEventListener("scroll",this.onScroll):window.addEventListener("scroll",this.onScroll)},destroyed(){this.scrollContainer?this.scrollContainer.removeEventListener("scroll",this.onScroll):window.removeEventListener("scroll",this.onScroll)},throttle(i,e){let t=0,s;return(...r)=>{let n=Date.now(),o=i-(n-t);o<=0||o>i?(s&&(clearTimeout(s),s=null),t=n,e(...r)):s||(s=setTimeout(()=>{t=Date.now(),s=null,e(...r)},o))}}};var rc=fo,nc=class{constructor(i){this.el=i,this.loadingRef=i.hasAttribute(ft)?parseInt(i.getAttribute(ft),10):null,this.lockRef=i.hasAttribute(ge)?parseInt(i.getAttribute(ge),10):null}maybeUndo(i,e,t){this.isWithin(i)&&(this.undoLocks(i,e,t),this.undoLoading(i,e),this.isFullyResolvedBy(i)&&this.el.removeAttribute(ve))}isWithin(i){return!(this.loadingRef!==null&&this.loadingRef>i&&this.lockRef!==null&&this.lockRef>i)}undoLocks(i,e,t){if(!this.isLockUndoneBy(i))return;let s=y.private(this.el,ge);s&&(t(s),y.deletePrivate(this.el,ge)),this.el.removeAttribute(ge);let r={detail:{ref:i,event:e},bubbles:!0,cancelable:!1};this.el.dispatchEvent(new CustomEvent(`phx:undo-lock:${this.lockRef}`,r))}undoLoading(i,e){if(!this.isLoadingUndoneBy(i)){this.canUndoLoading(i)&&this.el.classList.contains("phx-submit-loading")&&this.el.classList.remove("phx-change-loading");return}if(this.canUndoLoading(i)){this.el.removeAttribute(ft);let t=this.el.getAttribute(dt),s=this.el.getAttribute(Gs);s!==null&&(this.el.readOnly=s==="true",this.el.removeAttribute(Gs)),t!==null&&(this.el.disabled=t==="true",this.el.removeAttribute(dt));let r=this.el.getAttribute(ki);r!==null&&(this.el.innerText=r,this.el.removeAttribute(ki));let n={detail:{ref:i,event:e},bubbles:!0,cancelable:!1};this.el.dispatchEvent(new CustomEvent(`phx:undo-loading:${this.loadingRef}`,n))}ao.forEach(t=>{(t!=="phx-submit-loading"||this.canUndoLoading(i))&&y.removeClass(this.el,t)})}isLoadingUndoneBy(i){return this.loadingRef===null?!1:this.loadingRef<=i}isLockUndoneBy(i){return this.lockRef===null?!1:this.lockRef<=i}isFullyResolvedBy(i){return(this.loadingRef===null||this.loadingRef<=i)&&(this.lockRef===null||this.lockRef<=i)}canUndoLoading(i){return this.lockRef===null||this.lockRef<=i}},oc=class{constructor(i,e,t){let s=new Set,r=new Set([...e.children].map(o=>o.id)),n=[];Array.from(i.children).forEach(o=>{if(o.id&&(s.add(o.id),r.has(o.id))){let a=o.previousElementSibling&&o.previousElementSibling.id;n.push({elementId:o.id,previousElementId:a})}}),this.containerId=e.id,this.updateType=t,this.elementsToModify=n,this.elementIdsToAdd=[...r].filter(o=>!s.has(o))}perform(){let i=y.byId(this.containerId);this.elementsToModify.forEach(e=>{e.previousElementId?ze(document.getElementById(e.previousElementId),t=>{ze(document.getElementById(e.elementId),s=>{s.previousElementSibling&&s.previousElementSibling.id==t.id||t.insertAdjacentElement("afterend",s)})}):ze(document.getElementById(e.elementId),t=>{t.previousElementSibling==null||i.insertAdjacentElement("afterbegin",t)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(e=>{ze(document.getElementById(e),t=>i.insertAdjacentElement("afterbegin",t))})}},Kn=11;function ac(i,e){var t=e.attributes,s,r,n,o,a;if(!(e.nodeType===Kn||i.nodeType===Kn)){for(var l=t.length-1;l>=0;l--)s=t[l],r=s.name,n=s.namespaceURI,o=s.value,n?(r=s.localName||r,a=i.getAttributeNS(n,r),a!==o&&(s.prefix==="xmlns"&&(r=s.name),i.setAttributeNS(n,r,o))):(a=i.getAttribute(r),a!==o&&i.setAttribute(r,o));for(var h=i.attributes,c=h.length-1;c>=0;c--)s=h[c],r=s.name,n=s.namespaceURI,n?(r=s.localName||r,e.hasAttributeNS(n,r)||i.removeAttributeNS(n,r)):e.hasAttribute(r)||i.removeAttribute(r)}}var Si,lc="http://www.w3.org/1999/xhtml",fe=typeof document=="undefined"?void 0:document,hc=!!fe&&"content"in fe.createElement("template"),cc=!!fe&&fe.createRange&&"createContextualFragment"in fe.createRange();function uc(i){var e=fe.createElement("template");return e.innerHTML=i,e.content.childNodes[0]}function dc(i){Si||(Si=fe.createRange(),Si.selectNode(fe.body));var e=Si.createContextualFragment(i);return e.childNodes[0]}function fc(i){var e=fe.createElement("body");return e.innerHTML=i,e.childNodes[0]}function pc(i){return i=i.trim(),hc?uc(i):cc?dc(i):fc(i)}function Ci(i,e){var t=i.nodeName,s=e.nodeName,r,n;return t===s?!0:(r=t.charCodeAt(0),n=s.charCodeAt(0),r<=90&&n>=97?t===s.toUpperCase():n<=90&&r>=97?s===t.toUpperCase():!1)}function mc(i,e){return!e||e===lc?fe.createElement(i):fe.createElementNS(e,i)}function gc(i,e){for(var t=i.firstChild;t;){var s=t.nextSibling;e.appendChild(t),t=s}return e}function Hs(i,e,t){i[t]!==e[t]&&(i[t]=e[t],i[t]?i.setAttribute(t,""):i.removeAttribute(t))}var qn={OPTION:function(i,e){var t=i.parentNode;if(t){var s=t.nodeName.toUpperCase();s==="OPTGROUP"&&(t=t.parentNode,s=t&&t.nodeName.toUpperCase()),s==="SELECT"&&!t.hasAttribute("multiple")&&(i.hasAttribute("selected")&&!e.selected&&(i.setAttribute("selected","selected"),i.removeAttribute("selected")),t.selectedIndex=-1)}Hs(i,e,"selected")},INPUT:function(i,e){Hs(i,e,"checked"),Hs(i,e,"disabled"),i.value!==e.value&&(i.value=e.value),e.hasAttribute("value")||i.removeAttribute("value")},TEXTAREA:function(i,e){var t=e.value;i.value!==t&&(i.value=t);var s=i.firstChild;if(s){var r=s.nodeValue;if(r==t||!t&&r==i.placeholder)return;s.nodeValue=t}},SELECT:function(i,e){if(!e.hasAttribute("multiple")){for(var t=-1,s=0,r=i.firstChild,n,o;r;)if(o=r.nodeName&&r.nodeName.toUpperCase(),o==="OPTGROUP")n=r,r=n.firstChild;else{if(o==="OPTION"){if(r.hasAttribute("selected")){t=s;break}s++}r=r.nextSibling,!r&&n&&(r=n.nextSibling,n=null)}i.selectedIndex=t}}},Ut=1,Zn=11,Qn=3,eo=8;function Ve(){}function yc(i){if(i)return i.getAttribute&&i.getAttribute("id")||i.id}function vc(i){return function(t,s,r){if(r||(r={}),typeof s=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var n=s;s=fe.createElement("html"),s.innerHTML=n}else s=pc(s);else s.nodeType===Zn&&(s=s.firstElementChild);var o=r.getNodeKey||yc,a=r.onBeforeNodeAdded||Ve,l=r.onNodeAdded||Ve,h=r.onBeforeElUpdated||Ve,c=r.onElUpdated||Ve,u=r.onBeforeNodeDiscarded||Ve,g=r.onNodeDiscarded||Ve,f=r.onBeforeElChildrenUpdated||Ve,d=r.skipFromChildren||Ve,m=r.addChild||function(x,R){return x.appendChild(R)},p=r.childrenOnly===!0,C=Object.create(null),w=[];function b(x){w.push(x)}function A(x,R){if(x.nodeType===Ut)for(var F=x.firstChild;F;){var _=void 0;R&&(_=o(F))?b(_):(g(F),F.firstChild&&A(F,R)),F=F.nextSibling}}function k(x,R,F){u(x)!==!1&&(R&&R.removeChild(x),g(x),A(x,F))}function v(x){if(x.nodeType===Ut||x.nodeType===Zn)for(var R=x.firstChild;R;){var F=o(R);F&&(C[F]=R),v(R),R=R.nextSibling}}v(t);function E(x){l(x);for(var R=x.firstChild;R;){var F=R.nextSibling,_=o(R);if(_){var B=C[_];B&&Ci(R,B)?(R.parentNode.replaceChild(B,R),$(B,R)):E(R)}else E(R);R=F}}function M(x,R,F){for(;R;){var _=R.nextSibling;(F=o(R))?b(F):k(R,x,!0),R=_}}function $(x,R,F){var _=o(R);if(_&&delete C[_],!F){var B=h(x,R);if(B===!1||(B instanceof HTMLElement&&(x=B,v(x)),i(x,R),c(x),f(x,R)===!1))return}x.nodeName!=="TEXTAREA"?P(x,R):qn.TEXTAREA(x,R)}function P(x,R){var F=d(x,R),_=R.firstChild,B=x.firstChild,Ne,ce,De,qe,Ae;e:for(;_;){for(qe=_.nextSibling,Ne=o(_);!F&&B;){if(De=B.nextSibling,_.isSameNode&&_.isSameNode(B)){_=qe,B=De;continue e}ce=o(B);var ye=B.nodeType,re=void 0;if(ye===_.nodeType&&(ye===Ut?(Ne?Ne!==ce&&((Ae=C[Ne])?De===Ae?re=!1:(x.insertBefore(Ae,B),ce?b(ce):k(B,x,!0),B=Ae,ce=o(B)):re=!1):ce&&(re=!1),re=re!==!1&&Ci(B,_),re&&$(B,_)):(ye===Qn||ye==eo)&&(re=!0,B.nodeValue!==_.nodeValue&&(B.nodeValue=_.nodeValue))),re){_=qe,B=De;continue e}ce?b(ce):k(B,x,!0),B=De}if(Ne&&(Ae=C[Ne])&&Ci(Ae,_))F||m(x,Ae),$(Ae,_);else{var Ze=a(_);Ze!==!1&&(Ze&&(_=Ze),_.actualize&&(_=_.actualize(x.ownerDocument||fe)),m(x,_),E(_))}_=qe,B=De}M(x,B,ce);var Qe=qn[x.nodeName];Qe&&Qe(x,R)}var T=t,te=T.nodeType,N=s.nodeType;if(!p){if(te===Ut)N===Ut?Ci(t,s)||(g(t),T=gc(t,mc(s.nodeName,s.namespaceURI))):T=s;else if(te===Qn||te===eo){if(N===te)return T.nodeValue!==s.nodeValue&&(T.nodeValue=s.nodeValue),T;T=s}}if(T===s)g(t);else{if(s.isSameNode&&s.isSameNode(T))return;if($(T,s,p),w)for(var Me=0,Ke=w.length;Me<Ke;Me++){var q=C[w[Me]];q&&k(q,q.parentNode,!1)}}return!p&&T!==t&&t.parentNode&&(T.actualize&&(T=T.actualize(t.ownerDocument||fe)),t.parentNode.replaceChild(T,t)),T}}var bc=vc(ac),to=bc,Ei=class{static patchWithClonedTree(i,e,t){let s=t.getActiveElement(),{selectionStart:r,selectionEnd:n}=s&&y.hasSelectionRange(s)?s:{},o=t.binding(Ht);to(i,e,{childrenOnly:!1,onBeforeElUpdated:(a,l)=>{if(y.syncPendingAttrs(a,l),!i.isSameNode(a)&&a.hasAttribute(ge)||y.isIgnored(a,o))return!1;if(s&&s.isSameNode(a)&&y.isFormInput(a))return y.mergeFocusedInput(a,l),!1}}),t.silenceEvents(()=>y.restoreFocus(s,r,n))}constructor(i,e,t,s,r,n){this.view=i,this.liveSocket=i.liveSocket,this.container=e,this.id=t,this.rootID=i.root.id,this.html=s,this.streams=r,this.streamInserts={},this.streamComponentRestore={},this.targetCID=n,this.cidPatch=Le(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.targetContainer=this.isCIDPatch()?this.targetCIDContainer(s):e,this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(i,e){this.callbacks[`before${i}`].push(e)}after(i,e){this.callbacks[`after${i}`].push(e)}trackBefore(i,...e){this.callbacks[`before${i}`].forEach(t=>t(...e))}trackAfter(i,...e){this.callbacks[`after${i}`].forEach(t=>t(...e))}markPrunableContentForRemoval(){let i=this.liveSocket.binding(Ht);y.all(this.container,`[${i}=append] > *, [${i}=prepend] > *`,e=>{e.setAttribute(Mn,"")})}perform(i){let{view:e,liveSocket:t,html:s,container:r,targetContainer:n}=this;if(this.isCIDPatch()&&!n)return;let o=t.getActiveElement(),{selectionStart:a,selectionEnd:l}=o&&y.hasSelectionRange(o)?o:{},h=t.binding(Ht),c=t.binding(Vs),u=t.binding(zs),g=t.binding(Lh),f=[],d=[],m=[],p=null;function C(w,b,A=!1){let k={childrenOnly:w.getAttribute($e)===null&&!A,getNodeKey:v=>y.isPhxDestroyed(v)?null:i?v.id:v.id||v.getAttribute&&v.getAttribute(co),skipFromChildren:v=>v.getAttribute(h)===$s,addChild:(v,E)=>{let{ref:M,streamAt:$}=this.getStreamInsert(E);if(M===void 0)return v.appendChild(E);if(this.setStreamRef(E,M),$===0)v.insertAdjacentElement("afterbegin",E);else if($===-1){let P=v.lastElementChild;if(P&&!P.hasAttribute(Dt)){let T=Array.from(v.children).find(te=>!te.hasAttribute(Dt));v.insertBefore(E,T)}else v.appendChild(E)}else if($>0){let P=Array.from(v.children)[$];v.insertBefore(E,P)}},onBeforeNodeAdded:v=>{y.maintainPrivateHooks(v,v,c,u),this.trackBefore("added",v);let E=v;return this.streamComponentRestore[v.id]&&(E=this.streamComponentRestore[v.id],delete this.streamComponentRestore[v.id],C.call(this,E,v,!0)),E},onNodeAdded:v=>{v.getAttribute&&this.maybeReOrderStream(v,!0),v instanceof HTMLImageElement&&v.srcset?v.srcset=v.srcset:v instanceof HTMLVideoElement&&v.autoplay&&v.play(),y.isNowTriggerFormExternal(v,g)&&(p=v),(y.isPhxChild(v)&&e.ownsElement(v)||y.isPhxSticky(v)&&e.ownsElement(v.parentNode))&&this.trackAfter("phxChildAdded",v),f.push(v)},onNodeDiscarded:v=>this.onNodeDiscarded(v),onBeforeNodeDiscarded:v=>v.getAttribute&&v.getAttribute(Mn)!==null?!0:!(v.parentElement!==null&&v.id&&y.isPhxUpdate(v.parentElement,h,[$s,"append","prepend"])||this.maybePendingRemove(v)||this.skipCIDSibling(v)),onElUpdated:v=>{y.isNowTriggerFormExternal(v,g)&&(p=v),d.push(v),this.maybeReOrderStream(v,!1)},onBeforeElUpdated:(v,E)=>{if(v.id&&v.isSameNode(w)&&v.id!==E.id)return k.onNodeDiscarded(v),v.replaceWith(E),k.onNodeAdded(E);if(y.syncPendingAttrs(v,E),y.maintainPrivateHooks(v,E,c,u),y.cleanChildNodes(E,h),this.skipCIDSibling(E))return this.maybeReOrderStream(v),!1;if(y.isPhxSticky(v))return[Te,st,Ge].map(P=>[P,v.getAttribute(P),E.getAttribute(P)]).forEach(([P,T,te])=>{te&&T!==te&&v.setAttribute(P,te)}),!1;if(y.isIgnored(v,h)||v.form&&v.form.isSameNode(p))return this.trackBefore("updated",v,E),y.mergeAttrs(v,E,{isIgnored:y.isIgnored(v,h)}),d.push(v),y.applyStickyOperations(v),!1;if(v.type==="number"&&v.validity&&v.validity.badInput)return!1;let M=o&&v.isSameNode(o)&&y.isFormInput(v),$=M&&this.isChangedSelect(v,E);if(v.hasAttribute(ve)){y.isUploadInput(v)&&(y.mergeAttrs(v,E,{isIgnored:!0}),this.trackBefore("updated",v,E),d.push(v)),y.applyStickyOperations(v);let T=v.hasAttribute(ge)?y.private(v,ge)||v.cloneNode(!0):null;T&&(y.putPrivate(v,ge,T),M||(v=T))}if(y.isPhxChild(E)){let P=v.getAttribute(Te);return y.mergeAttrs(v,E,{exclude:[st]}),P!==""&&v.setAttribute(Te,P),v.setAttribute(Ge,this.rootID),y.applyStickyOperations(v),!1}return y.copyPrivates(E,v),M&&v.type!=="hidden"&&!$?(this.trackBefore("updated",v,E),y.mergeFocusedInput(v,E),y.syncAttrsToProps(v),d.push(v),y.applyStickyOperations(v),!1):($&&v.blur(),y.isPhxUpdate(E,h,["append","prepend"])&&m.push(new oc(v,E,E.getAttribute(h))),y.syncAttrsToProps(E),y.applyStickyOperations(E),this.trackBefore("updated",v,E),v)}};to(w,b,k)}return this.trackBefore("added",r),this.trackBefore("updated",r,r),t.time("morphdom",()=>{this.streams.forEach(([w,b,A,k])=>{b.forEach(([v,E,M])=>{this.streamInserts[v]={ref:w,streamAt:E,limit:M,reset:k}}),k!==void 0&&y.all(r,`[${Dt}="${w}"]`,v=>{this.removeStreamChildElement(v)}),A.forEach(v=>{let E=r.querySelector(`[id="${v}"]`);E&&this.removeStreamChildElement(E)})}),i&&y.all(this.container,`[${h}=${$s}]`,w=>{this.liveSocket.owner(w,b=>{b===this.view&&Array.from(w.children).forEach(A=>{this.removeStreamChildElement(A)})})}),C.call(this,n,s)}),t.isDebugEnabled()&&(Yh(),Array.from(document.querySelectorAll("input[name=id]")).forEach(w=>{w.form&&console.error(`Detected an input with name="id" inside a form! This will cause problems when patching the DOM.
`,w)})),m.length>0&&t.time("post-morph append/prepend restoration",()=>{m.forEach(w=>w.perform())}),t.silenceEvents(()=>y.restoreFocus(o,a,l)),y.dispatchEvent(document,"phx:update"),f.forEach(w=>this.trackAfter("added",w)),d.forEach(w=>this.trackAfter("updated",w)),this.transitionPendingRemoves(),p&&(t.unload(),Object.getPrototypeOf(p).submit.call(p)),!0}onNodeDiscarded(i){(y.isPhxChild(i)||y.isPhxSticky(i))&&this.liveSocket.destroyViewByEl(i),this.trackAfter("discarded",i)}maybePendingRemove(i){return i.getAttribute&&i.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(i),!0):!1}removeStreamChildElement(i){this.streamInserts[i.id]?(this.streamComponentRestore[i.id]=i,i.remove()):this.maybePendingRemove(i)||(i.remove(),this.onNodeDiscarded(i))}getStreamInsert(i){return(i.id?this.streamInserts[i.id]:{})||{}}setStreamRef(i,e){y.putSticky(i,Dt,t=>t.setAttribute(Dt,e))}maybeReOrderStream(i,e){let{ref:t,streamAt:s,reset:r}=this.getStreamInsert(i);if(s!==void 0&&(this.setStreamRef(i,t),!(!r&&!e)&&i.parentElement)){if(s===0)i.parentElement.insertBefore(i,i.parentElement.firstElementChild);else if(s>0){let n=Array.from(i.parentElement.children),o=n.indexOf(i);if(s>=n.length-1)i.parentElement.appendChild(i);else{let a=n[s];o>s?i.parentElement.insertBefore(i,a):i.parentElement.insertBefore(i,a.nextElementSibling)}}this.maybeLimitStream(i)}}maybeLimitStream(i){let{limit:e}=this.getStreamInsert(i),t=e!==null&&Array.from(i.parentElement.children);e&&e<0&&t.length>e*-1?t.slice(0,t.length+e).forEach(s=>this.removeStreamChildElement(s)):e&&e>=0&&t.length>e&&t.slice(e).forEach(s=>this.removeStreamChildElement(s))}transitionPendingRemoves(){let{pendingRemoves:i,liveSocket:e}=this;i.length>0&&e.transitionRemoves(i,!1,()=>{i.forEach(t=>{let s=y.firstPhxChild(t);s&&e.destroyViewByEl(s),t.remove()}),this.trackAfter("transitionsDiscarded",i)})}isChangedSelect(i,e){return!(i instanceof HTMLSelectElement)||i.multiple?!1:i.options.length!==e.options.length?!0:(e.value=i.value,!i.isEqualNode(e))}isCIDPatch(){return this.cidPatch}skipCIDSibling(i){return i.nodeType===Node.ELEMENT_NODE&&i.hasAttribute(ho)}targetCIDContainer(i){if(!this.isCIDPatch())return;let[e,...t]=y.findComponentNodeList(this.container,this.targetCID);return t.length===0&&y.childNodeLength(i)===1?e:e&&e.parentNode}indexOf(i,e){return Array.from(i.children).indexOf(e)}},wc=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),Sc=new Set(["'",'"']),io=(i,e,t)=>{let s=0,r=!1,n,o,a,l,h,c,u=i.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);if(u===null)throw new Error(`malformed html ${i}`);for(s=u[0].length,n=u[1],a=u[2],l=s,s;s<i.length&&i.charAt(s)!==">";s++)if(i.charAt(s)==="="){let d=i.slice(s-3,s)===" id";s++;let m=i.charAt(s);if(Sc.has(m)){let p=s;for(s++,s;s<i.length&&i.charAt(s)!==m;s++);if(d){h=i.slice(p+1,s);break}}}let g=i.length-1;for(r=!1;g>=n.length+a.length;){let d=i.charAt(g);if(r)d==="-"&&i.slice(g-3,g)==="<!-"?(r=!1,g-=4):g-=1;else if(d===">"&&i.slice(g-2,g)==="--")r=!0,g-=3;else{if(d===">")break;g-=1}}o=i.slice(g+1,i.length);let f=Object.keys(e).map(d=>e[d]===!0?d:`${d}="${e[d]}"`).join(" ");if(t){let d=h?` id="${h}"`:"";wc.has(a)?c=`<${a}${d}${f===""?"":" "}${f}/>`:c=`<${a}${d}${f===""?"":" "}${f}></${a}>`}else{let d=i.slice(l,g+1);c=`<${a}${f===""?"":" "}${f}${d}`}return[c,n,o]},so=class{static extract(i){let{[Vn]:e,[Wn]:t,[zn]:s}=i;return delete i[Vn],delete i[Wn],delete i[zn],{diff:i,title:s,reply:e||null,events:t||[]}}constructor(i,e){this.viewId=i,this.rendered={},this.magicId=0,this.mergeDiff(e)}parentViewId(){return this.viewId}toString(i){let[e,t]=this.recursiveToString(this.rendered,this.rendered[ae],i,!0,{});return[e,t]}recursiveToString(i,e=i[ae],t,s,r){t=t?new Set(t):null;let n={buffer:"",components:e,onlyCids:t,streams:new Set};return this.toOutputBuffer(i,null,n,s,r),[n.buffer,n.streams]}componentCIDs(i){return Object.keys(i[ae]||{}).map(e=>parseInt(e))}isComponentOnlyDiff(i){return i[ae]?Object.keys(i).length===1:!1}getComponent(i,e){return i[ae][e]}resetRender(i){this.rendered[ae][i]&&(this.rendered[ae][i].reset=!0)}mergeDiff(i){let e=i[ae],t={};if(delete i[ae],this.rendered=this.mutableMerge(this.rendered,i),this.rendered[ae]=this.rendered[ae]||{},e){let s=this.rendered[ae];for(let r in e)e[r]=this.cachedFindComponent(r,e[r],s,e,t);for(let r in e)s[r]=e[r];i[ae]=e}}cachedFindComponent(i,e,t,s,r){if(r[i])return r[i];{let n,o,a=e[ke];if(Le(a)){let l;a>0?l=this.cachedFindComponent(a,s[a],t,s,r):l=t[-a],o=l[ke],n=this.cloneMerge(l,e,!0),n[ke]=o}else n=e[ke]!==void 0||t[i]===void 0?e:this.cloneMerge(t[i],e,!1);return r[i]=n,n}}mutableMerge(i,e){return e[ke]!==void 0?e:(this.doMutableMerge(i,e),i)}doMutableMerge(i,e){for(let t in e){let s=e[t],r=i[t];ut(s)&&s[ke]===void 0&&ut(r)?this.doMutableMerge(r,s):i[t]=s}i[Bs]&&(i.newRender=!0)}cloneMerge(i,e,t){let s=I(I({},i),e);for(let r in s){let n=e[r],o=i[r];ut(n)&&n[ke]===void 0&&ut(o)?s[r]=this.cloneMerge(o,n,t):n===void 0&&ut(o)&&(s[r]=this.cloneMerge(o,{},t))}return t?(delete s.magicId,delete s.newRender):i[Bs]&&(s.newRender=!0),s}componentToString(i){let[e,t]=this.recursiveCIDToString(this.rendered[ae],i,null),[s,r,n]=io(e,{});return[s,t]}pruneCIDs(i){i.forEach(e=>delete this.rendered[ae][e])}get(){return this.rendered}isNewFingerprint(i={}){return!!i[ke]}templateStatic(i,e){return typeof i=="number"?e[i]:i}nextMagicID(){return this.magicId++,`m${this.magicId}-${this.parentViewId()}`}toOutputBuffer(i,e,t,s,r={}){if(i[wi])return this.comprehensionToBuffer(i,e,t);let{[ke]:n}=i;n=this.templateStatic(n,e);let o=i[Bs],a=t.buffer;o&&(t.buffer=""),s&&o&&!i.magicId&&(i.newRender=!0,i.magicId=this.nextMagicID()),t.buffer+=n[0];for(let l=1;l<n.length;l++)this.dynamicToBuffer(i[l-1],e,t,s),t.buffer+=n[l];if(o){let l=!1,h;s||i.magicId?(l=s&&!i.newRender,h=I({[co]:i.magicId},r)):h=r,l&&(h[ho]=!0);let[c,u,g]=io(t.buffer,h,l);i.newRender=!1,t.buffer=a+u+c+g}}comprehensionToBuffer(i,e,t){let{[wi]:s,[ke]:r,[Gn]:n}=i,[o,a,l,h]=n||[null,{},[],null];r=this.templateStatic(r,e);let c=e||i[Jh];for(let u=0;u<s.length;u++){let g=s[u];t.buffer+=r[0];for(let f=1;f<r.length;f++){let d=!1;this.dynamicToBuffer(g[f-1],c,t,d),t.buffer+=r[f]}}n!==void 0&&(i[wi].length>0||l.length>0||h)&&(delete i[Gn],i[wi]=[],t.streams.add(n))}dynamicToBuffer(i,e,t,s){if(typeof i=="number"){let[r,n]=this.recursiveCIDToString(t.components,i,t.onlyCids);t.buffer+=r,t.streams=new Set([...t.streams,...n])}else ut(i)?this.toOutputBuffer(i,e,t,s,{}):t.buffer+=i}recursiveCIDToString(i,e,t){let s=i[e]||de(`no component for CID ${e}`,i),r={[$e]:e},n=t&&!t.has(e);s.newRender=!n,s.magicId=`c${e}-${this.parentViewId()}`;let o=!s.reset,[a,l]=this.recursiveToString(s,i,t,o,r);return delete s.reset,[a,l]}},ro=[],no=200,Cc={exec(i,e,t,s,r,n){let[o,a]=n||[null,{callback:n&&n.callback}];(t.charAt(0)==="["?JSON.parse(t):[[o,a]]).forEach(([h,c])=>{h===o&&(c=I(I({},a),c),c.callback=c.callback||a.callback),this.filterToEls(s.liveSocket,r,c).forEach(u=>{this[`exec_${h}`](i,e,t,s,r,u,c)})})},isVisible(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length>0)},isInViewport(i){let e=i.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth;return e.right>0&&e.bottom>0&&e.left<s&&e.top<t},exec_exec(i,e,t,s,r,n,{attr:o,to:a}){(a?y.all(document,a):[r]).forEach(h=>{let c=h.getAttribute(o);if(!c)throw new Error(`expected ${o} to contain JS command on "${a}"`);s.liveSocket.execJS(h,c,e)})},exec_dispatch(i,e,t,s,r,n,{event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=r,y.dispatchEvent(n,o,{detail:a,bubbles:l})},exec_push(i,e,t,s,r,n,o){let{event:a,data:l,target:h,page_loading:c,loading:u,value:g,dispatcher:f,callback:d}=o,m={loading:u,value:g,target:h,page_loading:!!c},p=e==="change"&&f?f:r,C=h||p.getAttribute(s.binding("target"))||p;s.withinTargets(C,(w,b)=>{if(w.isConnected())if(e==="change"){let{newCid:A,_target:k}=o;k=k||(y.isFormInput(r)?r.name:void 0),k&&(m._target=k),w.pushInput(r,b,A,a||t,m,d)}else if(e==="submit"){let{submitter:A}=o;w.submitForm(r,b,a||t,A,m,d)}else w.pushEvent(e,r,b,a||t,l,m,d)})},exec_navigate(i,e,t,s,r,n,{href:o,replace:a}){s.liveSocket.historyRedirect(i,o,a?"replace":"push",null,r)},exec_patch(i,e,t,s,r,n,{href:o,replace:a}){s.liveSocket.pushHistoryPatch(i,o,a?"replace":"push",r)},exec_focus(i,e,t,s,r,n){window.requestAnimationFrame(()=>pt.attemptFocus(n))},exec_focus_first(i,e,t,s,r,n){window.requestAnimationFrame(()=>pt.focusFirstInteractive(n)||pt.focusFirst(n))},exec_push_focus(i,e,t,s,r,n){window.requestAnimationFrame(()=>ro.push(n||r))},exec_pop_focus(i,e,t,s,r,n){window.requestAnimationFrame(()=>{let o=ro.pop();o&&o.focus()})},exec_add_class(i,e,t,s,r,n,{names:o,transition:a,time:l,blocking:h}){this.addOrRemoveClasses(n,o,[],a,l,s,h)},exec_remove_class(i,e,t,s,r,n,{names:o,transition:a,time:l,blocking:h}){this.addOrRemoveClasses(n,[],o,a,l,s,h)},exec_toggle_class(i,e,t,s,r,n,{names:o,transition:a,time:l,blocking:h}){this.toggleClasses(n,o,a,l,s,h)},exec_toggle_attr(i,e,t,s,r,n,{attr:[o,a,l]}){this.toggleAttr(n,o,a,l)},exec_transition(i,e,t,s,r,n,{time:o,transition:a,blocking:l}){this.addOrRemoveClasses(n,[],[],a,o,s,l)},exec_toggle(i,e,t,s,r,n,{display:o,ins:a,outs:l,time:h,blocking:c}){this.toggle(e,s,n,o,a,l,h,c)},exec_show(i,e,t,s,r,n,{display:o,transition:a,time:l,blocking:h}){this.show(e,s,n,o,a,l,h)},exec_hide(i,e,t,s,r,n,{display:o,transition:a,time:l,blocking:h}){this.hide(e,s,n,o,a,l,h)},exec_set_attr(i,e,t,s,r,n,{attr:[o,a]}){this.setOrRemoveAttrs(n,[[o,a]],[])},exec_remove_attr(i,e,t,s,r,n,{attr:o}){this.setOrRemoveAttrs(n,[],[o])},show(i,e,t,s,r,n,o){this.isVisible(t)||this.toggle(i,e,t,s,r,null,n,o)},hide(i,e,t,s,r,n,o){this.isVisible(t)&&this.toggle(i,e,t,s,null,r,n,o)},toggle(i,e,t,s,r,n,o,a){o=o||no;let[l,h,c]=r||[[],[],[]],[u,g,f]=n||[[],[],[]];if(l.length>0||u.length>0)if(this.isVisible(t)){let d=()=>{this.addOrRemoveClasses(t,g,l.concat(h).concat(c)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,u,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,f,g))})},m=()=>{this.addOrRemoveClasses(t,[],u.concat(f)),y.putSticky(t,"toggle",p=>p.style.display="none"),t.dispatchEvent(new Event("phx:hide-end"))};t.dispatchEvent(new Event("phx:hide-start")),a===!1?(d(),setTimeout(m,o)):e.transition(o,d,m)}else{if(i==="remove")return;let d=()=>{this.addOrRemoveClasses(t,h,u.concat(g).concat(f));let p=s||this.defaultDisplay(t);y.putSticky(t,"toggle",C=>C.style.display=p),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,l,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,c,h))})},m=()=>{this.addOrRemoveClasses(t,[],l.concat(c)),t.dispatchEvent(new Event("phx:show-end"))};t.dispatchEvent(new Event("phx:show-start")),a===!1?(d(),setTimeout(m,o)):e.transition(o,d,m)}else this.isVisible(t)?window.requestAnimationFrame(()=>{t.dispatchEvent(new Event("phx:hide-start")),y.putSticky(t,"toggle",d=>d.style.display="none"),t.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{t.dispatchEvent(new Event("phx:show-start"));let d=s||this.defaultDisplay(t);y.putSticky(t,"toggle",m=>m.style.display=d),t.dispatchEvent(new Event("phx:show-end"))})},toggleClasses(i,e,t,s,r,n){window.requestAnimationFrame(()=>{let[o,a]=y.getSticky(i,"classes",[[],[]]),l=e.filter(c=>o.indexOf(c)<0&&!i.classList.contains(c)),h=e.filter(c=>a.indexOf(c)<0&&i.classList.contains(c));this.addOrRemoveClasses(i,l,h,t,s,r,n)})},toggleAttr(i,e,t,s){i.hasAttribute(e)?s!==void 0?i.getAttribute(e)===t?this.setOrRemoveAttrs(i,[[e,s]],[]):this.setOrRemoveAttrs(i,[[e,t]],[]):this.setOrRemoveAttrs(i,[],[e]):this.setOrRemoveAttrs(i,[[e,t]],[])},addOrRemoveClasses(i,e,t,s,r,n,o){r=r||no;let[a,l,h]=s||[[],[],[]];if(a.length>0){let c=()=>{this.addOrRemoveClasses(i,l,[].concat(a).concat(h)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,h,l))})},u=()=>this.addOrRemoveClasses(i,e.concat(h),t.concat(a).concat(l));o===!1?(c(),setTimeout(u,r)):n.transition(r,c,u);return}window.requestAnimationFrame(()=>{let[c,u]=y.getSticky(i,"classes",[[],[]]),g=e.filter(p=>c.indexOf(p)<0&&!i.classList.contains(p)),f=t.filter(p=>u.indexOf(p)<0&&i.classList.contains(p)),d=c.filter(p=>t.indexOf(p)<0).concat(g),m=u.filter(p=>e.indexOf(p)<0).concat(f);y.putSticky(i,"classes",p=>(p.classList.remove(...m),p.classList.add(...d),[d,m]))})},setOrRemoveAttrs(i,e,t){let[s,r]=y.getSticky(i,"attrs",[[],[]]),n=e.map(([l,h])=>l).concat(t),o=s.filter(([l,h])=>!n.includes(l)).concat(e),a=r.filter(l=>!n.includes(l)).concat(t);y.putSticky(i,"attrs",l=>(a.forEach(h=>l.removeAttribute(h)),o.forEach(([h,c])=>l.setAttribute(h,c)),[o,a]))},hasAllClasses(i,e){return e.every(t=>i.classList.contains(t))},isToggledOut(i,e){return!this.isVisible(i)||this.hasAllClasses(i,e)},filterToEls(i,e,{to:t}){let s=()=>{if(typeof t=="string")return document.querySelectorAll(t);if(t.closest){let r=e.closest(t.closest);return r?[r]:[]}else if(t.inner)return e.querySelectorAll(t.inner)};return t?i.jsQuerySelectorAll(e,t,s):[e]},defaultDisplay(i){return{tr:"table-row",td:"table-cell"}[i.tagName.toLowerCase()]||"block"},transitionClasses(i){if(!i)return null;let[e,t,s]=Array.isArray(i)?i:[i.split(" "),[],[]];return e=Array.isArray(e)?e:e.split(" "),t=Array.isArray(t)?t:t.split(" "),s=Array.isArray(s)?s:s.split(" "),[e,t,s]}},z=Cc,js="hookId",Ec=1,Bt=class{static makeID(){return Ec++}static elementID(i){return y.private(i,js)}constructor(i,e,t){this.el=e,this.__attachView(i),this.__callbacks=t,this.__listeners=new Set,this.__isDisconnected=!1,y.putPrivate(this.el,js,this.constructor.makeID());for(let s in this.__callbacks)this[s]=this.__callbacks[s]}__attachView(i){i?(this.__view=()=>i,this.liveSocket=i.liveSocket):(this.__view=()=>{throw new Error(`hook not yet attached to a live view: ${this.el.outerHTML}`)},this.liveSocket=null)}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed(),y.deletePrivate(this.el,js)}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}js(){let i=this;return{exec(e){i.__view().liveSocket.execJS(i.el,e,"hook")},show(e,t={}){let s=i.__view().liveSocket.owner(e);z.show("hook",s,e,t.display,t.transition,t.time,t.blocking)},hide(e,t={}){let s=i.__view().liveSocket.owner(e);z.hide("hook",s,e,null,t.transition,t.time,t.blocking)},toggle(e,t={}){let s=i.__view().liveSocket.owner(e);t.in=z.transitionClasses(t.in),t.out=z.transitionClasses(t.out),z.toggle("hook",s,e,t.display,t.in,t.out,t.time,t.blocking)},addClass(e,t,s={}){t=Array.isArray(t)?t:t.split(" ");let r=i.__view().liveSocket.owner(e);z.addOrRemoveClasses(e,t,[],s.transition,s.time,r,s.blocking)},removeClass(e,t,s={}){s.transition=z.transitionClasses(s.transition),t=Array.isArray(t)?t:t.split(" ");let r=i.__view().liveSocket.owner(e);z.addOrRemoveClasses(e,[],t,s.transition,s.time,r,s.blocking)},toggleClass(e,t,s={}){s.transition=z.transitionClasses(s.transition),t=Array.isArray(t)?t:t.split(" ");let r=i.__view().liveSocket.owner(e);z.toggleClasses(e,t,s.transition,s.time,r,s.blocking)},transition(e,t,s={}){let r=i.__view().liveSocket.owner(e);z.addOrRemoveClasses(e,[],[],z.transitionClasses(t),s.time,r,s.blocking)},setAttribute(e,t,s){z.setOrRemoveAttrs(e,[[t,s]],[])},removeAttribute(e,t){z.setOrRemoveAttrs(e,[],[t])},toggleAttribute(e,t,s,r){z.toggleAttr(e,t,s,r)}}}pushEvent(i,e={},t){return t===void 0?new Promise((s,r)=>{try{this.__view().pushHookEvent(this.el,null,i,e,(o,a)=>s(o))===!1&&r(new Error("unable to push hook event. LiveView not connected"))}catch(n){r(n)}}):this.__view().pushHookEvent(this.el,null,i,e,t)}pushEventTo(i,e,t={},s){return s===void 0?new Promise((r,n)=>{try{this.__view().withinTargets(i,(o,a)=>{o.pushHookEvent(this.el,a,e,t,(h,c)=>r(h))===!1&&n(new Error("unable to push hook event. LiveView not connected"))})}catch(o){n(o)}}):this.__view().withinTargets(i,(r,n)=>r.pushHookEvent(this.el,n,e,t,s))}handleEvent(i,e){let t=(s,r)=>r?i:e(s.detail);return window.addEventListener(`phx:${i}`,t),this.__listeners.add(t),t}removeHandleEvent(i){let e=i(null,!0);window.removeEventListener(`phx:${e}`,i),this.__listeners.delete(i)}upload(i,e){return this.__view().dispatchUploads(null,i,e)}uploadTo(i,e,t){return this.__view().withinTargets(i,(s,r)=>{s.dispatchUploads(r,e,t)})}__cleanup__(){this.__listeners.forEach(i=>this.removeHandleEvent(i))}},Ac=(i,e)=>{let t=i.endsWith("[]"),s=t?i.slice(0,-2):i;return s=s.replace(/([^\[\]]+)(\]?$)/,`${e}$1$2`),t&&(s+="[]"),s},Ai=(i,e,t=[])=>{let c=e,{submitter:s}=c,r=We(c,["submitter"]),n;if(s&&s.name){let u=document.createElement("input");u.type="hidden";let g=s.getAttribute("form");g&&u.setAttribute("form",g),u.name=s.name,u.value=s.value,s.parentElement.insertBefore(u,s),n=u}let o=new FormData(i),a=[];o.forEach((u,g,f)=>{u instanceof File&&a.push(g)}),a.forEach(u=>o.delete(u));let l=new URLSearchParams,h=Array.from(i.elements);for(let[u,g]of o.entries())if(t.length===0||t.indexOf(u)>=0){let f=h.filter(p=>p.name===u),d=!f.some(p=>y.private(p,Ri)||y.private(p,Wt)),m=f.every(p=>p.type==="hidden");d&&!(s&&s.name==u)&&!m&&l.append(Ac(u,"_unused_"),""),l.append(u,g)}s&&n&&s.parentElement.removeChild(n);for(let u in r)l.append(u,r[u]);return l.toString()},xc=class mo{static closestView(e){let t=e.closest(nt);return t?y.private(t,"view"):null}constructor(e,t,s,r,n){this.isDead=!1,this.liveSocket=t,this.flash=r,this.parent=s,this.root=s?s.root:this,this.el=e,y.putPrivate(this.el,"view",this),this.id=this.el.id,this.ref=0,this.lastAckRef=null,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pendingForms=new Set,this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinAttempts=0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(o){o&&o()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.formsForRecovery={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>{let o=this.href&&this.expandURL(this.href);return{redirect:this.redirect?o:void 0,url:this.redirect?void 0:o||void 0,params:this.connectParams(n),session:this.getSession(),static:this.getStatic(),flash:this.flash}})}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.hasAttribute(Ys)}connectParams(e){let t=this.liveSocket.params(this.el),s=y.all(document,`[${this.binding(Nh)}]`).map(r=>r.src||r.href).filter(r=>typeof r=="string");return s.length>0&&(t._track_static=s),t._mounts=this.joinCount,t._mount_attempts=this.joinAttempts,t._live_referer=e,this.joinAttempts++,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(Te)}getStatic(){let e=this.el.getAttribute(st);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let s in this.viewHooks)this.destroyHook(this.viewHooks[s])};y.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(Nn,tt,ct,Dn,Mt),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(tt)}}execAll(e){y.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(Nn),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,s=function(){}){this.liveSocket.transition(e,t,s)}withinTargets(e,t,s=document,r){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,n=>t(n,e));if(Le(e))y.findComponentNodeList(r||this.el,e).length===0?de(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let n=Array.from(s.querySelectorAll(e));n.length===0&&de(`nothing found matching the phx-target selector "${e}"`),n.forEach(o=>this.liveSocket.owner(o,a=>t(a,o)))}}applyDiff(e,t,s){this.log(e,()=>["",Ii(t)]);let{diff:r,reply:n,events:o,title:a}=so.extract(t);s({diff:r,reply:n,events:o}),(typeof a=="string"||e=="mount")&&window.requestAnimationFrame(()=>y.putTitle(a))}onJoin(e){let{rendered:t,container:s,liveview_version:r}=e;if(s){let[n,o]=s;this.el=y.replaceRootContainer(this.el,n,o)}this.childJoins=0,this.joinPending=!0,this.flash=null,this.root===this&&(this.formsForRecovery=this.getFormsForRecovery()),this.isMain()&&window.history.state===null&&this.liveSocket.replaceRootHistory(),r!==this.liveSocket.version()&&console.error(`LiveView asset version mismatch. JavaScript version ${this.liveSocket.version()} vs. server ${r}. To avoid issues, please ensure that your assets use the same version as the server.`),ue.dropLocal(this.liveSocket.localStorage,window.location.pathname,oo),this.applyDiff("mount",t,({diff:n,events:o})=>{this.rendered=new so(this.id,n);let[a,l]=this.renderContainer(null,"join");this.dropPendingRefs(),this.joinCount++,this.joinAttempts=0,this.maybeRecoverForms(a,()=>{this.onJoinComplete(e,a,l,o)})})}dropPendingRefs(){y.all(document,`[${ve}="${this.refSrc()}"]`,e=>{e.removeAttribute(ft),e.removeAttribute(ve),e.removeAttribute(ge)})}onJoinComplete({live_patch:e},t,s,r){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,s,r);y.findPhxChildrenInFragment(t,this.id).filter(o=>{let a=o.id&&this.el.querySelector(`[id="${o.id}"]`),l=a&&a.getAttribute(st);return l&&o.setAttribute(st,l),a&&a.setAttribute(Ge,this.root.id),this.joinChild(o)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,s,r)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,s,r)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,s,r)])}attachTrueDocEl(){this.el=y.byId(this.id),this.el.setAttribute(Ge,this.root.id)}execNewMounted(e=this.el){let t=this.binding(Vs),s=this.binding(zs);y.all(e,`[${t}], [${s}]`,r=>{this.ownsElement(r)&&(y.maintainPrivateHooks(r,r,t,s),this.maybeAddNewHook(r))}),y.all(e,`[${this.binding(Nt)}], [data-phx-${Nt}]`,r=>{this.ownsElement(r)&&this.maybeAddNewHook(r)}),y.all(e,`[${this.binding(Fn)}]`,r=>{this.ownsElement(r)&&this.maybeMounted(r)})}applyJoinPatch(e,t,s,r){this.attachTrueDocEl();let n=new Ei(this,this.el,this.id,t,s,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1,!0),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(r),this.applyPendingUpdates(),e){let{kind:o,to:a}=e;this.liveSocket.historyPatch(a,o)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let s=this.getHook(e),r=s&&y.isIgnored(e,this.binding(Ht));if(s&&!e.isEqualNode(t)&&!(r&&qh(e.dataset,t.dataset)))return s.__beforeUpdate(),s}maybeMounted(e){let t=e.getAttribute(this.binding(Fn)),s=t&&y.private(e,"mounted");t&&!s&&(this.liveSocket.execJS(e,t),y.putPrivate(e,"mounted",!0))}maybeAddNewHook(e){let t=this.addHook(e);t&&t.__mounted()}performPatch(e,t,s=!1){let r=[],n=!1,o=new Set;return this.liveSocket.triggerDOM("onPatchStart",[e.targetContainer]),e.after("added",a=>{this.liveSocket.triggerDOM("onNodeAdded",[a]);let l=this.binding(Vs),h=this.binding(zs);y.maintainPrivateHooks(a,a,l,h),this.maybeAddNewHook(a),a.getAttribute&&this.maybeMounted(a)}),e.after("phxChildAdded",a=>{y.isPhxSticky(a)?this.liveSocket.joinRootViews():n=!0}),e.before("updated",(a,l)=>{this.triggerBeforeUpdateHook(a,l)&&o.add(a.id)}),e.after("updated",a=>{o.has(a.id)&&this.getHook(a).__updated()}),e.after("discarded",a=>{a.nodeType===Node.ELEMENT_NODE&&r.push(a)}),e.after("transitionsDiscarded",a=>this.afterElementsRemoved(a,t)),e.perform(s),this.afterElementsRemoved(r,t),this.liveSocket.triggerDOM("onPatchEnd",[e.targetContainer]),n}afterElementsRemoved(e,t){let s=[];e.forEach(r=>{let n=y.all(r,`[${$e}]`),o=y.all(r,`[${this.binding(Nt)}], [data-phx-hook]`);n.concat(r).forEach(a=>{let l=this.componentID(a);Le(l)&&s.indexOf(l)===-1&&s.push(l)}),o.concat(r).forEach(a=>{let l=this.getHook(a);l&&this.destroyHook(l)})}),t&&this.maybePushComponentsDestroyed(s)}joinNewChildren(){y.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}maybeRecoverForms(e,t){let s=this.binding("change"),r=this.root.formsForRecovery,n=document.createElement("template");n.innerHTML=e;let o=n.content.firstElementChild;o.id=this.id,o.setAttribute(Ge,this.root.id),o.setAttribute(Te,this.getSession()),o.setAttribute(st,this.getStatic()),o.setAttribute(rt,this.parent?this.parent.id:null);let a=y.all(n.content,"form").filter(l=>l.id&&r[l.id]).filter(l=>!this.pendingForms.has(l.id)).filter(l=>r[l.id].getAttribute(s)===l.getAttribute(s)).map(l=>[r[l.id],l]);if(a.length===0)return t();a.forEach(([l,h],c)=>{this.pendingForms.add(h.id),this.pushFormRecovery(l,h,n.content.firstElementChild,()=>{this.pendingForms.delete(h.id),c===a.length-1&&t()})})}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){var t;return e.id===this.id?this:(t=this.children[e.getAttribute(rt)])==null?void 0:t[e.id]}destroyDescendent(e){for(let t in this.root.children)for(let s in this.root.children[t])if(s===e)return this.root.children[t][s].destroy()}joinChild(e){if(!this.getChildById(e.id)){let s=new mo(e,this.liveSocket,this);return this.root.children[this.id][s.id]=s,s.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.pendingForms.clear(),this.formsForRecovery={},this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let s=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{y.findExistingParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(n=>{this.componentPatch(this.rendered.getComponent(e,n),n)&&(s=!0)})}):Jn(e)||this.liveSocket.time("full patch complete",()=>{let[r,n]=this.renderContainer(e,"update"),o=new Ei(this,this.el,this.id,r,n,null);s=this.performPatch(o,!0)}),this.liveSocket.dispatchEvents(t),s&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let s=this.el.tagName,r=e?this.rendered.componentCIDs(e):null,[n,o]=this.rendered.toString(r);return[`<${s}>${n}</${s}>`,o]})}componentPatch(e,t){if(Jn(e))return!1;let[s,r]=this.rendered.componentToString(t),n=new Ei(this,this.el,this.id,s,r,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[Bt.elementID(e)]}addHook(e){let t=Bt.elementID(e);if(t&&!this.viewHooks[t]){let s=y.getCustomElHook(e)||de(`no hook found for custom element: ${e.id}`);return this.viewHooks[t]=s,s.__attachView(this),s}else{if(t||!e.getAttribute)return;{let s=e.getAttribute(`data-phx-${Nt}`)||e.getAttribute(this.binding(Nt));if(s&&!this.ownsElement(e))return;let r=this.liveSocket.getHookCallbacks(s);if(r){e.id||de(`no DOM ID for hook "${s}". Hooks require a unique ID on each element.`,e);let n=new Bt(this,e,r);return this.viewHooks[Bt.elementID(n.el)]=n,n}else s!==null&&de(`unknown hook found for "${s}"`,e)}}}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[Bt.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let t=this.root.children[this.id]||{};for(let s in t)e(this.getChildById(s))}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,s=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(s)]):this.liveSocket.requestDOMUpdate(()=>t(s))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:s})=>this.update(t,s))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){this.eachChild(e=>e.destroy())}onLiveRedirect(e){let{to:t,kind:s,flash:r}=e,n=this.expandURL(t),o=new CustomEvent("phx:server-navigate",{detail:{to:t,kind:s,flash:r}});this.liveSocket.historyRedirect(o,n,s,r)}onLivePatch(e){let{to:t,kind:s}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,s)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t,reloadToken:s}){this.liveSocket.redirect(e,t,s)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}joinPush(){return this.joinPush=this.joinPush||this.channel.join(),this.joinPush}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.wrapPush(()=>this.channel.join(),{ok:t=>this.liveSocket.requestDOMUpdate(()=>this.onJoin(t)),error:t=>this.onJoinError(t),timeout:()=>this.onJoinError({reason:"timeout"})})}onJoinError(e){if(e.reason==="reload"){this.log("error",()=>[`failed mount with ${e.status}. Falling back to page reload`,e]),this.onRedirect({to:this.root.href,reloadToken:e.token});return}else if(e.reason==="unauthorized"||e.reason==="stale"){this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.root.href});return}if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);if(this.log("error",()=>["unable to join",e]),this.isMain())this.displayError([tt,ct,Mt]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this);else{this.joinAttempts>=Bn&&(this.root.displayError([tt,ct,Mt]),this.log("error",()=>[`giving up trying to mount after ${Bn} tries`,e]),this.destroy());let t=y.byId(this.el.id);t?(y.mergeAttrs(t,this.el),this.displayError([tt,ct,Mt]),this.el=t):this.destroy()}}onClose(e){if(!this.isDestroyed()){if(this.isMain()&&this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(Wh)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([tt,ct,Mt]):this.displayError([tt,ct,Dn]))}displayError(e){this.isMain()&&y.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}wrapPush(e,t){let s=this.liveSocket.getLatencySim(),r=s?n=>setTimeout(()=>!this.isDestroyed()&&n(),s):n=>!this.isDestroyed()&&n();r(()=>{e().receive("ok",n=>r(()=>t.ok&&t.ok(n))).receive("error",n=>r(()=>t.error&&t.error(n))).receive("timeout",()=>r(()=>t.timeout&&t.timeout()))})}pushWithReply(e,t,s){if(!this.isConnected())return Promise.reject({error:"noconnection"});let[r,[n],o]=e?e():[null,[],{}],a=this.joinCount,l=function(){};return o.page_loading&&(l=this.liveSocket.withPageLoading({kind:"element",target:n})),typeof s.cid!="number"&&delete s.cid,new Promise((h,c)=>{this.wrapPush(()=>this.channel.push(t,s,zh),{ok:u=>{r!==null&&(this.lastAckRef=r);let g=f=>{u.redirect&&this.onRedirect(u.redirect),u.live_patch&&this.onLivePatch(u.live_patch),u.live_redirect&&this.onLiveRedirect(u.live_redirect),l(),h({resp:u,reply:f})};u.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",u.diff,({diff:f,reply:d,events:m})=>{r!==null&&this.undoRefs(r,s.event),this.update(f,m),g(d)})}):(r!==null&&this.undoRefs(r,s.event),g(null))},error:u=>c({error:u}),timeout:()=>{c({timeout:!0}),this.joinCount===a&&this.liveSocket.reloadWithJitter(this,()=>{this.log("timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}})})}undoRefs(e,t,s){if(!this.isConnected())return;let r=`[${ve}="${this.refSrc()}"]`;s?(s=new Set(s),y.all(document,r,n=>{s&&!s.has(n)||(y.all(n,r,o=>this.undoElRef(o,e,t)),this.undoElRef(n,e,t))})):y.all(document,r,n=>this.undoElRef(n,e,t))}undoElRef(e,t,s){new nc(e).maybeUndo(t,s,n=>{let o=this.triggerBeforeUpdateHook(e,n);Ei.patchWithClonedTree(e,n,this.liveSocket),y.all(e,`[${ve}="${this.refSrc()}"]`,a=>this.undoElRef(a,t,s)),this.execNewMounted(e),o&&o.__updated()})}refSrc(){return this.el.id}putRef(e,t,s,r={}){let n=this.ref++,o=this.binding(Ln);if(r.loading){let a=y.all(document,r.loading).map(l=>({el:l,lock:!0,loading:!0}));e=e.concat(a)}for(let{el:a,lock:l,loading:h}of e){if(!l&&!h)throw new Error("putRef requires lock or loading");if(a.setAttribute(ve,this.refSrc()),h&&a.setAttribute(ft,n),l&&a.setAttribute(ge,n),!h||r.submitter&&!(a===r.submitter||a===r.form))continue;let c=new Promise(d=>{a.addEventListener(`phx:undo-lock:${n}`,()=>d(f),{once:!0})}),u=new Promise(d=>{a.addEventListener(`phx:undo-loading:${n}`,()=>d(f),{once:!0})});a.classList.add(`phx-${s}-loading`);let g=a.getAttribute(o);g!==null&&(a.getAttribute(ki)||a.setAttribute(ki,a.innerText),g!==""&&(a.innerText=g),a.setAttribute(dt,a.getAttribute(dt)||a.disabled),a.setAttribute("disabled",""));let f={event:t,eventType:s,ref:n,isLoading:h,isLocked:l,lockElements:e.filter(({lock:d})=>d).map(({el:d})=>d),loadingElements:e.filter(({loading:d})=>d).map(({el:d})=>d),unlock:d=>{d=Array.isArray(d)?d:[d],this.undoRefs(n,t,d)},lockComplete:c,loadingComplete:u,lock:d=>new Promise(m=>{if(this.isAcked(n))return m(f);d.setAttribute(ge,n),d.setAttribute(ve,this.refSrc()),d.addEventListener(`phx:lock-stop:${n}`,()=>m(f),{once:!0})})};a.dispatchEvent(new CustomEvent("phx:push",{detail:f,bubbles:!0,cancelable:!1})),t&&a.dispatchEvent(new CustomEvent(`phx:push:${t}`,{detail:f,bubbles:!0,cancelable:!1}))}return[n,e.map(({el:a})=>a),r]}isAcked(e){return this.lastAckRef!==null&&this.lastAckRef>=e}componentID(e){let t=e.getAttribute&&e.getAttribute($e);return t?parseInt(t):null}targetComponentID(e,t,s={}){if(Le(t))return t;let r=s.target||e.getAttribute(this.binding("target"));return Le(r)?parseInt(r):t&&(r!==null||s.target)?this.closestComponentID(t):null}closestComponentID(e){return Le(e)?e:e?ze(e.closest(`[${$e}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,s,r,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",s,r]),!1;let[o,a,l]=this.putRef([{el:e,loading:!0,lock:!0}],s,"hook");return this.pushWithReply(()=>[o,a,l],"event",{type:"hook",event:s,value:r,cid:this.closestComponentID(t)}).then(({resp:h,reply:c})=>n(c,o)),o}extractMeta(e,t,s){let r=this.binding("value-");for(let n=0;n<e.attributes.length;n++){t||(t={});let o=e.attributes[n].name;o.startsWith(r)&&(t[o.replace(r,"")]=e.getAttribute(o))}if(e.value!==void 0&&!(e instanceof HTMLFormElement)&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&uo.indexOf(e.type)>=0&&!e.checked&&delete t.value),s){t||(t={});for(let n in s)t[n]=s[n]}return t}pushEvent(e,t,s,r,n,o={},a){this.pushWithReply(()=>this.putRef([{el:t,loading:!0,lock:!0}],r,e,o),"event",{type:e,event:r,value:this.extractMeta(t,n,o.value),cid:this.targetComponentID(t,s,o)}).then(({reply:l})=>a&&a(l))}pushFileProgress(e,t,s,r=function(){}){this.liveSocket.withinOwners(e.form,(n,o)=>{n.pushWithReply(null,"progress",{event:e.getAttribute(n.binding(Hh)),ref:e.getAttribute(Fe),entry_ref:t,progress:s,cid:n.targetComponentID(e.form,o)}).then(({resp:a})=>r(a))})}pushInput(e,t,s,r,n,o){if(!e.form)throw new Error("form events require the input to be inside a form");let a,l=Le(s)?s:this.targetComponentID(e.form,t,n),h=()=>this.putRef([{el:e,loading:!0,lock:!0},{el:e.form,loading:!0,lock:!0}],r,"change",n),c,u=this.extractMeta(e.form);e instanceof HTMLButtonElement&&(u.submitter=e),e.getAttribute(this.binding("change"))?c=Ai(e.form,I({_target:n._target},u),[e.name]):c=Ai(e.form,I({_target:n._target},u)),y.isUploadInput(e)&&e.files&&e.files.length>0&&se.trackFiles(e,Array.from(e.files)),a=se.serializeUploads(e);let g={type:"form",event:r,value:c,uploads:a,cid:l};this.pushWithReply(h,"event",g).then(({resp:f})=>{if(y.isUploadInput(e)&&y.isAutoUpload(e)){if(se.filesAwaitingPreflight(e).length>0){let[d,m]=h();this.undoRefs(d,r,[e.form]),this.uploadFiles(e.form,r,t,d,l,p=>{o&&o(f),this.triggerAwaitingSubmit(e.form,r),this.undoRefs(d,r)})}}else o&&o(f)})}triggerAwaitingSubmit(e,t){let s=this.getScheduledSubmit(e);if(s){let[r,n,o,a]=s;this.cancelSubmit(e,t),a()}}getScheduledSubmit(e){return this.formSubmits.find(([t,s,r,n])=>t.isSameNode(e))}scheduleSubmit(e,t,s,r){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,s,r])}cancelSubmit(e,t){this.formSubmits=this.formSubmits.filter(([s,r,n,o])=>s.isSameNode(e)?(this.undoRefs(r,t),!1):!0)}disableForm(e,t,s={}){let r=d=>!(jt(d,`${this.binding(Ht)}=ignore`,d.form)||jt(d,"data-phx-update=ignore",d.form)),n=d=>d.hasAttribute(this.binding(Ln)),o=d=>d.tagName=="BUTTON",a=d=>["INPUT","TEXTAREA","SELECT"].includes(d.tagName),l=Array.from(e.elements),h=l.filter(n),c=l.filter(o).filter(r),u=l.filter(a).filter(r);c.forEach(d=>{d.setAttribute(dt,d.disabled),d.disabled=!0}),u.forEach(d=>{d.setAttribute(Gs,d.readOnly),d.readOnly=!0,d.files&&(d.setAttribute(dt,d.disabled),d.disabled=!0)});let g=h.concat(c).concat(u).map(d=>({el:d,loading:!0,lock:!0})),f=[{el:e,loading:!0,lock:!1}].concat(g).reverse();return this.putRef(f,t,"submit",s)}pushFormSubmit(e,t,s,r,n,o){let a=()=>this.disableForm(e,s,ne(I({},n),{form:e,submitter:r})),l=this.targetComponentID(e,t);if(se.hasUploadsInProgress(e)){let[h,c]=a(),u=()=>this.pushFormSubmit(e,t,s,r,n,o);return this.scheduleSubmit(e,h,n,u)}else if(se.inputsAwaitingPreflight(e).length>0){let[h,c]=a(),u=()=>[h,c,n];this.uploadFiles(e,s,t,h,l,g=>{if(se.inputsAwaitingPreflight(e).length>0)return this.undoRefs(h,s);let f=this.extractMeta(e),d=Ai(e,I({submitter:r},f));this.pushWithReply(u,"event",{type:"form",event:s,value:d,cid:l}).then(({resp:m})=>o(m))})}else if(!(e.hasAttribute(ve)&&e.classList.contains("phx-submit-loading"))){let h=this.extractMeta(e),c=Ai(e,I({submitter:r},h));this.pushWithReply(a,"event",{type:"form",event:s,value:c,cid:l}).then(({resp:u})=>o(u))}}uploadFiles(e,t,s,r,n,o){let a=this.joinCount,l=se.activeFileInputs(e),h=l.length;l.forEach(c=>{let u=new se(c,this,()=>{h--,h===0&&o()}),g=u.entries().map(d=>d.toPreflightPayload());if(g.length===0){h--;return}let f={ref:c.getAttribute(Fe),entries:g,cid:this.targetComponentID(c.form,s)};this.log("upload",()=>["sending preflight request",f]),this.pushWithReply(null,"allow_upload",f).then(({resp:d})=>{if(this.log("upload",()=>["got preflight response",d]),u.entries().forEach(m=>{d.entries&&!d.entries[m.ref]&&this.handleFailedEntryPreflight(m.ref,"failed preflight",u)}),d.error||Object.keys(d.entries).length===0)this.undoRefs(r,t),(d.error||[]).map(([p,C])=>{this.handleFailedEntryPreflight(p,C,u)});else{let m=p=>{this.channel.onError(()=>{this.joinCount===a&&p()})};u.initAdapterUpload(d,m,this.liveSocket)}})})}handleFailedEntryPreflight(e,t,s){if(s.isAutoUpload()){let r=s.entries().find(n=>n.ref===e.toString());r&&r.cancel()}else s.entries().map(r=>r.cancel());this.log("upload",()=>[`error for entry ${e}`,t])}dispatchUploads(e,t,s){let r=this.targetCtxElement(e)||this.el,n=y.findUploadInputs(r).filter(o=>o.name===t);n.length===0?de(`no live file inputs found matching the name "${t}"`):n.length>1?de(`duplicate live file inputs found matching the name "${t}"`):y.dispatchEvent(n[0],lo,{detail:{files:s}})}targetCtxElement(e){if(Le(e)){let[t]=y.findComponentNodeList(this.el,e);return t}else return e||null}pushFormRecovery(e,t,s,r){let n=this.binding("change"),o=t.getAttribute(this.binding("target"))||t,a=t.getAttribute(this.binding($n))||t.getAttribute(this.binding("change")),l=Array.from(e.elements).filter(u=>y.isFormInput(u)&&u.name&&!u.hasAttribute(n));if(l.length===0)return;l.forEach(u=>u.hasAttribute(Fe)&&se.clearFiles(u));let h=l.find(u=>u.type!=="hidden")||l[0],c=0;this.withinTargets(o,(u,g)=>{let f=this.targetComponentID(t,g);c++,u.pushInput(h,g,f,a,{_target:h.name},()=>{c--,c===0&&r()})},s,s)}pushLinkPatch(e,t,s,r){let n=this.liveSocket.setPendingLink(t),o=e.isTrusted&&e.type!=="popstate",a=s?()=>this.putRef([{el:s,loading:o,lock:!0}],null,"click"):null,l=()=>this.liveSocket.redirect(window.location.href),h=t.startsWith("/")?`${location.protocol}//${location.host}${t}`:t;this.pushWithReply(a,"live_patch",{url:h}).then(({resp:c})=>{this.liveSocket.requestDOMUpdate(()=>{c.link_redirect?this.liveSocket.replaceMain(t,null,r,n):(this.liveSocket.commitPendingLink(n)&&(this.href=t),this.applyPendingUpdates(),r&&r(n))})},({error:c,timeout:u})=>l())}getFormsForRecovery(){if(this.joinCount===0)return{};let e=this.binding("change");return y.all(this.el,`form[${e}]`).filter(t=>t.id).filter(t=>t.elements.length>0).filter(t=>t.getAttribute(this.binding($n))!=="ignore").map(t=>t.cloneNode(!0)).reduce((t,s)=>(t[s.id]=s,t),{})}maybePushComponentsDestroyed(e){let t=e.filter(s=>y.findComponentNodeList(this.el,s).length===0);t.length>0&&(t.forEach(s=>this.rendered.resetRender(s)),this.pushWithReply(null,"cids_will_destroy",{cids:t}).then(()=>{this.liveSocket.requestDOMUpdate(()=>{let s=t.filter(r=>y.findComponentNodeList(this.el,r).length===0);s.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:s}).then(({resp:r})=>{this.rendered.pruneCIDs(r.cids)})})}))}ownsElement(e){let t=e.closest(nt);return e.getAttribute(rt)===this.id||t&&t.id===this.id||!t&&this.isDead}submitForm(e,t,s,r,n={}){y.putPrivate(e,Wt,!0),Array.from(e.elements).forEach(a=>y.putPrivate(a,Wt,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,s,r,n,()=>{this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}};var go=class{constructor(i,e,t={}){if(this.unloaded=!1,!e||e.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new e(i,t),this.bindingPrefix=t.bindingPrefix||Vh,this.opts=t,this.params=$t(t.params||{}),this.viewLogger=t.viewLogger,this.metadataCallbacks=t.metadata||{},this.defaults=Object.assign(Ii(Gh),t.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Ii(window.location),this.hooks=t.hooks||{},this.uploaders=t.uploaders||{},this.loaderTimeout=t.loaderTimeout||jh,this.reloadWithJitterTimer=null,this.maxReloads=t.maxReloads||Th,this.reloadJitterMin=t.reloadJitterMin||_h,this.reloadJitterMax=t.reloadJitterMax||Oh,this.failsafeJitter=t.failsafeJitter||Mh,this.localStorage=t.localStorage||window.localStorage,this.sessionStorage=t.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.boundEventNames=new Set,this.serverCloseRef=null,this.domCallbacks=Object.assign({jsQuerySelectorAll:null,onPatchStart:$t(),onPatchEnd:$t(),onNodeAdded:$t(),onBeforeElUpdated:$t()},t.dom||{}),this.transitions=new Ic,this.currentHistoryPosition=parseInt(this.sessionStorage.getItem(bi))||0,window.addEventListener("pagehide",s=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}version(){return"1.0.1"}isProfileEnabled(){return this.sessionStorage.getItem(Fs)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(vi)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(vi)==="false"}enableDebug(){this.sessionStorage.setItem(vi,"true")}enableProfiling(){this.sessionStorage.setItem(Fs,"true")}disableDebug(){this.sessionStorage.setItem(vi,"false")}disableProfiling(){this.sessionStorage.removeItem(Fs)}enableLatencySim(i){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(Us,i)}disableLatencySim(){this.sessionStorage.removeItem(Us)}getLatencySim(){let i=this.sessionStorage.getItem(Us);return i?parseInt(i):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let i=()=>{this.resetReloadStatus(),this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.bindTopLevelEvents({dead:!0}),this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?i():document.addEventListener("DOMContentLoaded",()=>i())}disconnect(i){clearTimeout(this.reloadWithJitterTimer),this.serverCloseRef&&(this.socket.off(this.serverCloseRef),this.serverCloseRef=null),this.socket.disconnect(i)}replaceTransport(i){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(i),this.connect()}execJS(i,e,t=null){let s=new CustomEvent("phx:exec",{detail:{sourceElement:i}});this.owner(i,r=>z.exec(s,t,e,r,i))}execJSHookPush(i,e,t,s){this.withinOwners(i,r=>{let n=new CustomEvent("phx:exec",{detail:{sourceElement:i}});z.exec(n,"hook",e,r,i,["push",{data:t,callback:s}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(i,e){this.domCallbacks[i](...e)}time(i,e){if(!this.isProfileEnabled()||!console.time)return e();console.time(i);let t=e();return console.timeEnd(i),t}log(i,e,t){if(this.viewLogger){let[s,r]=t();this.viewLogger(i,e,s,r)}else if(this.isDebugEnabled()){let[s,r]=t();Kh(i,e,s,r)}}requestDOMUpdate(i){this.transitions.after(i)}transition(i,e,t=function(){}){this.transitions.addTransition(i,e,t)}onChannel(i,e,t){i.on(e,s=>{let r=this.getLatencySim();r?setTimeout(()=>t(s),r):t(s)})}reloadWithJitter(i,e){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let t=this.reloadJitterMin,s=this.reloadJitterMax,r=Math.floor(Math.random()*(s-t+1))+t,n=ue.updateLocal(this.localStorage,window.location.pathname,oo,0,o=>o+1);n>=this.maxReloads&&(r=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{i.isDestroyed()||i.isConnected()||(i.destroy(),e?e():this.log(i,"join",()=>[`encountered ${n} consecutive reloads`]),n>=this.maxReloads&&this.log(i,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},r)}getHookCallbacks(i){return i&&i.startsWith("Phoenix.")?rc[i.split(".")[1]]:this.hooks[i]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(i){return`${this.getBindingPrefix()}${i}`}channel(i,e){return this.socket.channel(i,e)}joinDeadView(){let i=document.body;if(i&&!this.isPhxView(i)&&!this.isPhxView(document.firstElementChild)){let e=this.newRootView(i);e.setHref(this.getHref()),e.joinDead(),this.main||(this.main=e),window.requestAnimationFrame(()=>e.execNewMounted())}}joinRootViews(){let i=!1;return y.all(document,`${nt}:not([${rt}])`,e=>{if(!this.getRootById(e.id)){let t=this.newRootView(e);t.setHref(this.getHref()),t.join(),e.hasAttribute(Ys)&&(this.main=t)}i=!0}),i}redirect(i,e,t){t&&ue.setCookie(Un,t,60),this.unload(),ue.redirect(i,e)}replaceMain(i,e,t=null,s=this.setPendingLink(i)){let r=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let n=y.all(this.outgoingMainEl,`[${this.binding("remove")}]`),o=y.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,e,r),this.main.setRedirect(i),this.transitionRemoves(n,!0),this.main.join((a,l)=>{a===1&&this.commitPendingLink(s)&&this.requestDOMUpdate(()=>{n.forEach(h=>h.remove()),y.findPhxSticky(document).forEach(h=>o.appendChild(h)),this.outgoingMainEl.replaceWith(o),this.outgoingMainEl=null,t&&t(s),l()})})}transitionRemoves(i,e,t){let s=this.binding("remove");if(e){let n=y.findPhxSticky(document)||[];i=i.filter(o=>!y.isChildOfAny(o,n))}let r=n=>{n.preventDefault(),n.stopImmediatePropagation()};i.forEach(n=>{for(let o of this.boundEventNames)n.addEventListener(o,r,!0);this.execJS(n,n.getAttribute(s),"remove")}),this.requestDOMUpdate(()=>{i.forEach(n=>{for(let o of this.boundEventNames)n.removeEventListener(o,r,!0)}),t&&t()})}isPhxView(i){return i.getAttribute&&i.getAttribute(Te)!==null}newRootView(i,e,t){let s=new xc(i,this,null,e,t);return this.roots[s.id]=s,s}owner(i,e){let t=ze(i.closest(nt),s=>this.getViewByEl(s))||this.main;return t&&e?e(t):t}withinOwners(i,e){this.owner(i,t=>e(t,i))}getViewByEl(i){let e=i.getAttribute(Ge);return ze(this.getRootById(e),t=>t.getDescendentByEl(i))}getRootById(i){return this.roots[i]}destroyAllViews(){for(let i in this.roots)this.roots[i].destroy(),delete this.roots[i];this.main=null}destroyViewByEl(i){let e=this.getRootById(i.getAttribute(Ge));e&&e.id===i.id?(e.destroy(),delete this.roots[e.id]):e&&e.destroyDescendent(i.id)}getActiveElement(){return document.activeElement}dropActiveElement(i){this.prevActive&&i.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:i}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.serverCloseRef=this.socket.onClose(e=>{if(e&&e.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",e=>{e.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),i||this.bindNav(),this.bindClicks(),i||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(e,t,s,r,n,o)=>{let a=r.getAttribute(this.binding(Bh)),l=e.key&&e.key.toLowerCase();if(a&&a.toLowerCase()!==l)return;let h=I({key:e.key},this.eventMeta(t,e,r));z.exec(e,t,n,s,r,["push",{data:h}])}),this.bind({blur:"focusout",focus:"focusin"},(e,t,s,r,n,o)=>{if(!o){let a=I({key:e.key},this.eventMeta(t,e,r));z.exec(e,t,n,s,r,["push",{data:a}])}}),this.bind({blur:"blur",focus:"focus"},(e,t,s,r,n,o)=>{if(o==="window"){let a=this.eventMeta(t,e,r);z.exec(e,t,n,s,r,["push",{data:a}])}}),this.on("dragover",e=>e.preventDefault()),this.on("drop",e=>{e.preventDefault();let t=ze(jt(e.target,this.binding(On)),n=>n.getAttribute(this.binding(On))),s=t&&document.getElementById(t),r=Array.from(e.dataTransfer.files||[]);!s||s.disabled||r.length===0||!(s.files instanceof FileList)||(se.trackFiles(s,r,e.dataTransfer),s.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(lo,e=>{let t=e.target;if(!y.isUploadInput(t))return;let s=Array.from(e.detail.files||[]).filter(r=>r instanceof File||r instanceof Blob);se.trackFiles(t,s),t.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(i,e,t){let s=this.metadataCallbacks[i];return s?s(e,t):{}}setPendingLink(i){return this.linkRef++,this.pendingLink=i,this.resetReloadStatus(),this.linkRef}resetReloadStatus(){ue.deleteCookie(Un)}commitPendingLink(i){return this.linkRef!==i?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(i,e){for(let t in i){let s=i[t];this.on(s,r=>{let n=this.binding(t),o=this.binding(`window-${t}`),a=r.target.getAttribute&&r.target.getAttribute(n);a?this.debounce(r.target,r,s,()=>{this.withinOwners(r.target,l=>{e(r,t,l,r.target,a,null)})}):y.all(document,`[${o}]`,l=>{let h=l.getAttribute(o);this.debounce(l,r,s,()=>{this.withinOwners(l,c=>{e(r,t,c,l,h,"window")})})})})}}bindClicks(){this.on("mousedown",i=>this.clickStartedAtTarget=i.target),this.bindClick("click","click")}bindClick(i,e){let t=this.binding(e);window.addEventListener(i,s=>{let r=null;s.detail===0&&(this.clickStartedAtTarget=s.target);let n=this.clickStartedAtTarget||s.target;r=jt(s.target,t),this.dispatchClickAway(s,n),this.clickStartedAtTarget=null;let o=r&&r.getAttribute(t);if(!o){y.isNewPageClick(s,window.location)&&this.unload();return}r.getAttribute("href")==="#"&&s.preventDefault(),!r.hasAttribute(ve)&&this.debounce(r,s,"click",()=>{this.withinOwners(r,a=>{z.exec(s,"click",o,a,r,["push",{data:this.eventMeta("click",s,r)}])})})},!1)}dispatchClickAway(i,e){let t=this.binding("click-away");y.all(document,`[${t}]`,s=>{s.isSameNode(e)||s.contains(e)||this.withinOwners(s,r=>{let n=s.getAttribute(t);z.isVisible(s)&&z.isInViewport(s)&&z.exec(i,"click",n,r,s,["push",{data:this.eventMeta("click",i,i.target)}])})})}bindNav(){if(!ue.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let i=null;window.addEventListener("scroll",e=>{clearTimeout(i),i=setTimeout(()=>{ue.updateCurrentState(t=>Object.assign(t,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",e=>{if(!this.registerNewLocation(window.location))return;let{type:t,backType:s,id:r,root:n,scroll:o,position:a}=e.state||{},l=window.location.href,h=a>this.currentHistoryPosition;t=h?t:s||t,this.currentHistoryPosition=a||0,this.sessionStorage.setItem(bi,this.currentHistoryPosition.toString()),y.dispatchEvent(window,"phx:navigate",{detail:{href:l,patch:t==="patch",pop:!0,direction:h?"forward":"backward"}}),this.requestDOMUpdate(()=>{this.main.isConnected()&&t==="patch"&&r===this.main.id?this.main.pushLinkPatch(e,l,null,()=>{this.maybeScroll(o)}):this.replaceMain(l,null,()=>{n&&this.replaceRootHistory(),this.maybeScroll(o)})})},!1),window.addEventListener("click",e=>{let t=jt(e.target,Ls),s=t&&t.getAttribute(Ls);if(!s||!this.isConnected()||!this.main||y.wantsNewTab(e))return;let r=t.href instanceof SVGAnimatedString?t.href.baseVal:t.href,n=t.getAttribute(Dh);e.preventDefault(),e.stopImmediatePropagation(),this.pendingLink!==r&&this.requestDOMUpdate(()=>{if(s==="patch")this.pushHistoryPatch(e,r,n,t);else if(s==="redirect")this.historyRedirect(e,r,n,null,t);else throw new Error(`expected ${Ls} to be "patch" or "redirect", got: ${s}`);let o=t.getAttribute(this.binding("click"));o&&this.requestDOMUpdate(()=>this.execJS(t,o,"click"))})},!1)}maybeScroll(i){typeof i=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,i)})}dispatchEvent(i,e={}){y.dispatchEvent(window,`phx:${i}`,{detail:e})}dispatchEvents(i){i.forEach(([e,t])=>this.dispatchEvent(e,t))}withPageLoading(i,e){y.dispatchEvent(window,"phx:page-loading-start",{detail:i});let t=()=>y.dispatchEvent(window,"phx:page-loading-stop",{detail:i});return e?e(t):t}pushHistoryPatch(i,e,t,s){if(!this.isConnected()||!this.main.isMain())return ue.redirect(e);this.withPageLoading({to:e,kind:"patch"},r=>{this.main.pushLinkPatch(i,e,s,n=>{this.historyPatch(e,t,n),r()})})}historyPatch(i,e,t=this.setPendingLink(i)){this.commitPendingLink(t)&&(this.currentHistoryPosition++,this.sessionStorage.setItem(bi,this.currentHistoryPosition.toString()),ue.updateCurrentState(s=>ne(I({},s),{backType:"patch"})),ue.pushState(e,{type:"patch",id:this.main.id,position:this.currentHistoryPosition},i),y.dispatchEvent(window,"phx:navigate",{detail:{patch:!0,href:i,pop:!1,direction:"forward"}}),this.registerNewLocation(window.location))}historyRedirect(i,e,t,s,r){if(r&&i.isTrusted&&i.type!=="popstate"&&r.classList.add("phx-click-loading"),!this.isConnected()||!this.main.isMain())return ue.redirect(e,s);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:o,host:a}=window.location;e=`${o}//${a}${e}`}let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},o=>{this.replaceMain(e,s,a=>{a===this.linkRef&&(this.currentHistoryPosition++,this.sessionStorage.setItem(bi,this.currentHistoryPosition.toString()),ue.updateCurrentState(l=>ne(I({},l),{backType:"redirect"})),ue.pushState(t,{type:"redirect",id:this.main.id,scroll:n,position:this.currentHistoryPosition},e),y.dispatchEvent(window,"phx:navigate",{detail:{href:e,patch:!1,pop:!1,direction:"forward"}}),this.registerNewLocation(window.location)),o()})})}replaceRootHistory(){ue.pushState("replace",{root:!0,type:"patch",id:this.main.id,position:this.currentHistoryPosition})}registerNewLocation(i){let{pathname:e,search:t}=this.currentLocation;return e+t===i.pathname+i.search?!1:(this.currentLocation=Ii(i),!0)}bindForms(){let i=0,e=!1;this.on("submit",t=>{let s=t.target.getAttribute(this.binding("submit")),r=t.target.getAttribute(this.binding("change"));!e&&r&&!s&&(e=!0,t.preventDefault(),this.withinOwners(t.target,n=>{n.disableForm(t.target),window.requestAnimationFrame(()=>{y.isUnloadableFormSubmit(t)&&this.unload(),t.target.submit()})}))}),this.on("submit",t=>{let s=t.target.getAttribute(this.binding("submit"));if(!s){y.isUnloadableFormSubmit(t)&&this.unload();return}t.preventDefault(),t.target.disabled=!0,this.withinOwners(t.target,r=>{z.exec(t,"submit",s,r,t.target,["push",{submitter:t.submitter}])})});for(let t of["change","input"])this.on(t,s=>{if(s instanceof CustomEvent&&s.target.form===void 0){if(s.detail&&s.detail.dispatcher)throw new Error(`dispatching a custom ${t} event is only supported on input elements inside a form`);return}let r=this.binding("change"),n=s.target;if(s.isComposing){let f=`composition-listener-${t}`;y.private(n,f)||(y.putPrivate(n,f,!0),n.addEventListener("compositionend",()=>{n.dispatchEvent(new Event(t,{bubbles:!0})),y.deletePrivate(n,f)},{once:!0}));return}let o=n.getAttribute(r),a=n.form&&n.form.getAttribute(r),l=o||a;if(!l||n.type==="number"&&n.validity&&n.validity.badInput)return;let h=o?n:n.form,c=i;i++;let{at:u,type:g}=y.private(n,"prev-iteration")||{};u===c-1&&t==="change"&&g==="input"||(y.putPrivate(n,"prev-iteration",{at:c,type:t}),this.debounce(n,s,t,()=>{this.withinOwners(h,f=>{y.putPrivate(n,Ri,!0),z.exec(s,"change",l,f,n,["push",{_target:s.target.name,dispatcher:h}])})}))});this.on("reset",t=>{let s=t.target;y.resetForm(s);let r=Array.from(s.elements).find(n=>n.type==="reset");r&&window.requestAnimationFrame(()=>{r.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(i,e,t,s){if(t==="blur"||t==="focusout")return s();let r=this.binding(Fh),n=this.binding(Uh),o=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();this.withinOwners(i,l=>{let h=()=>!l.isDestroyed()&&document.body.contains(i);y.debounce(i,e,r,o,n,a,h,()=>{s()})})}silenceEvents(i){this.silenced=!0,i(),this.silenced=!1}on(i,e){this.boundEventNames.add(i),window.addEventListener(i,t=>{this.silenced||e(t)})}jsQuerySelectorAll(i,e,t){let s=this.domCallbacks.jsQuerySelectorAll;return s?s(i,e,t):t()}},Ic=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(i=>{clearTimeout(i),this.transitions.delete(i)}),this.flushPendingOps()}after(i){this.size()===0?i():this.pushPendingOp(i)}addTransition(i,e,t){e();let s=setTimeout(()=>{this.transitions.delete(s),t(),this.flushPendingOps()},i);this.transitions.add(s)}pushPendingOp(i){this.pendingOps.push(i)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let i=this.pendingOps.shift();i&&(i(),this.flushPendingOps())}};var Rc=Object.defineProperty,kc=(i,e,t)=>e in i?Rc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,S=(i,e,t)=>kc(i,typeof e!="symbol"?e+"":e,t),yo,Tc=Object.defineProperty,_c=(i,e,t)=>e in i?Tc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,vo=(i,e,t)=>_c(i,typeof e!="symbol"?e+"":e,t),ie=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(ie||{}),bo={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},wo={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Ti={},Oc=()=>!!globalThis.Zone;function tn(i){if(Ti[i])return Ti[i];let e=globalThis[i],t=e.prototype,s=i in bo?bo[i]:void 0,r=!!(s&&s.every(a=>{var l,h;return!!((h=(l=Object.getOwnPropertyDescriptor(t,a))==null?void 0:l.get)!=null&&h.toString().includes("[native code]"))})),n=i in wo?wo[i]:void 0,o=!!(n&&n.every(a=>{var l;return typeof t[a]=="function"&&((l=t[a])==null?void 0:l.toString().includes("[native code]"))}));if(r&&o&&!Oc())return Ti[i]=e.prototype,e.prototype;try{let a=document.createElement("iframe");document.body.appendChild(a);let l=a.contentWindow;if(!l)return e.prototype;let h=l[i].prototype;return document.body.removeChild(a),h?Ti[i]=h:t}catch(a){return t}}var Zs={};function Xe(i,e,t){var s;let r=`${i}.${String(t)}`;if(Zs[r])return Zs[r].call(e);let n=tn(i),o=(s=Object.getOwnPropertyDescriptor(n,t))==null?void 0:s.get;return o?(Zs[r]=o,o.call(e)):e[t]}var Qs={};function ma(i,e,t){let s=`${i}.${String(t)}`;if(Qs[s])return Qs[s].bind(e);let n=tn(i)[t];return typeof n!="function"?e[t]:(Qs[s]=n,n.bind(e))}function Mc(i){return Xe("Node",i,"childNodes")}function Nc(i){return Xe("Node",i,"parentNode")}function Dc(i){return Xe("Node",i,"parentElement")}function Pc(i){return Xe("Node",i,"textContent")}function Lc(i,e){return ma("Node",i,"contains")(e)}function $c(i){return ma("Node",i,"getRootNode")()}function Fc(i){return!i||!("host"in i)?null:Xe("ShadowRoot",i,"host")}function Uc(i){return i.styleSheets}function Bc(i){return!i||!("shadowRoot"in i)?null:Xe("Element",i,"shadowRoot")}function Hc(i,e){return Xe("Element",i,"querySelector")(e)}function jc(i,e){return Xe("Element",i,"querySelectorAll")(e)}function Wc(){return tn("MutationObserver").constructor}var oe={childNodes:Mc,parentNode:Nc,parentElement:Dc,textContent:Pc,contains:Lc,getRootNode:$c,host:Fc,styleSheets:Uc,shadowRoot:Bc,querySelector:Hc,querySelectorAll:jc,mutationObserver:Wc};function ga(i){return i.nodeType===i.ELEMENT_NODE}function Yt(i){let e=i&&"host"in i&&"mode"in i&&oe.host(i)||null;return!!(e&&"shadowRoot"in e&&oe.shadowRoot(e)===i)}function Kt(i){return Object.prototype.toString.call(i)==="[object ShadowRoot]"}function Vc(i){return i.includes(" background-clip: text;")&&!i.includes(" -webkit-background-clip: text;")&&(i=i.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),i}function zc(i){let{cssText:e}=i;if(e.split('"').length<3)return e;let t=["@import",`url(${JSON.stringify(i.href)})`];return i.layerName===""?t.push("layer"):i.layerName&&t.push(`layer(${i.layerName})`),i.supportsText&&t.push(`supports(${i.supportsText})`),i.media.length&&t.push(i.media.mediaText),t.join(" ")+";"}function fr(i){try{let e=i.rules||i.cssRules;if(!e)return null;let t=i.href;!t&&i.ownerNode&&i.ownerNode.ownerDocument&&(t=i.ownerNode.ownerDocument.location.href);let s=Array.from(e,r=>ya(r,t)).join("");return Vc(s)}catch(e){return null}}function ya(i,e){if(Jc(i)){let t;try{t=fr(i.styleSheet)||zc(i)}catch(s){t=i.cssText}return i.styleSheet.href?rs(t,i.styleSheet.href):t}else{let t=i.cssText;return Xc(i)&&i.selectorText.includes(":")&&(t=Gc(t)),e?rs(t,e):t}}function Gc(i){let e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return i.replace(e,"$1\\$2")}function Jc(i){return"styleSheet"in i}function Xc(i){return"selectorText"in i}var ss=class{constructor(){vo(this,"idNodeMap",new Map),vo(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;let s=(t=this.getMeta(e))==null?void 0:t.id;return s!=null?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){let s=this.getNode(e);if(s){let r=this.nodeMetaMap.get(s);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Yc(){return new ss}function sn({element:i,maskInputOptions:e,tagName:t,type:s,value:r,maskInputFn:n}){let o=r||"",a=s&&at(s);return(e[t.toLowerCase()]||a&&e[a])&&(n?o=n(o,i):o="*".repeat(o.length)),o}function at(i){return i.toLowerCase()}var So="__rrweb_original__";function Kc(i){let e=i.getContext("2d");if(!e)return!0;let t=50;for(let s=0;s<i.width;s+=t)for(let r=0;r<i.height;r+=t){let n=e.getImageData,o=So in n?n[So]:n;if(new Uint32Array(o.call(e,s,r,Math.min(t,i.width-s),Math.min(t,i.height-r)).data.buffer).some(l=>l!==0))return!1}return!0}function rn(i){let e=i.type;return i.hasAttribute("data-rr-is-password")?"password":e?at(e):null}function va(i,e){var n;let t;try{t=new URL(i,e!=null?e:window.location.href)}catch(o){return null}let s=/\.([0-9a-z]+)(?:$)/i,r=t.pathname.match(s);return(n=r==null?void 0:r[1])!=null?n:null}function qc(i){let e="";return i.indexOf("//")>-1?e=i.split("/").slice(0,3).join("/"):e=i.split("/")[0],e=e.split("?")[0],e}var Zc=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Qc=/^(?:[a-z+]+:)?\/\//i,eu=/^www\..*/i,tu=/^(data:)([^,]*),(.*)/i;function rs(i,e){return(i||"").replace(Zc,(t,s,r,n,o,a)=>{let l=r||o||a,h=s||n||"";if(!l)return t;if(Qc.test(l)||eu.test(l))return`url(${h}${l}${h})`;if(tu.test(l))return`url(${h}${l}${h})`;if(l[0]==="/")return`url(${h}${qc(e)+l}${h})`;let c=e.split("/"),u=l.split("/");c.pop();for(let g of u)g!=="."&&(g===".."?c.pop():c.push(g));return`url(${h}${c.join("/")}${h})`})}function er(i){return i.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"")}function iu(i,e){let t=Array.from(e.childNodes),s=[];if(t.length>1&&i&&typeof i=="string"){let r=er(i);for(let n=1;n<t.length;n++)if(t[n].textContent&&typeof t[n].textContent=="string"){let o=er(t[n].textContent);for(let a=3;a<o.length;a++){let l=o.substring(0,a);if(r.split(l).length===2){let h=r.indexOf(l);for(let c=h;c<i.length;c++)if(er(i.substring(0,c)).length===h){s.push(i.substring(0,c)),i=i.substring(c);break}break}}}}return s.push(i),s}function su(i,e){return iu(i,e).join("/* rr_split */")}var ru=1,nu=new RegExp("[^a-z0-9-_:]"),Zt=-2;function ba(){return ru++}function ou(i){if(i instanceof HTMLFormElement)return"form";let e=at(i.tagName);return nu.test(e)?"div":e}var mt,Co,au=/^[^ \t\n\r\u000c]+/,lu=/^[, \t\n\r\u000c]+/;function hu(i,e){if(e.trim()==="")return e;let t=0;function s(n){let o,a=n.exec(e.substring(t));return a?(o=a[0],t+=o.length,o):""}let r=[];for(;s(lu),!(t>=e.length);){let n=s(au);if(n.slice(-1)===",")n=vt(i,n.substring(0,n.length-1)),r.push(n);else{let o="";n=vt(i,n);let a=!1;for(;;){let l=e.charAt(t);if(l===""){r.push((n+o).trim());break}else if(a)l===")"&&(a=!1);else if(l===","){t+=1,r.push((n+o).trim());break}else l==="("&&(a=!0);o+=l,t+=1}}}return r.join(", ")}var Eo=new WeakMap;function vt(i,e){return!e||e.trim()===""?e:nn(i,e)}function cu(i){return!!(i.tagName==="svg"||i.ownerSVGElement)}function nn(i,e){let t=Eo.get(i);if(t||(t=i.createElement("a"),Eo.set(i,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}function wa(i,e,t,s){return s&&(t==="src"||t==="href"&&!(e==="use"&&s[0]==="#")||t==="xlink:href"&&s[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?vt(i,s):t==="srcset"?hu(i,s):t==="style"?rs(s,nn(i)):e==="object"&&t==="data"?vt(i,s):s)}function Sa(i,e,t){return(i==="video"||i==="audio")&&e==="autoplay"}function uu(i,e,t){try{if(typeof e=="string"){if(i.classList.contains(e))return!0}else for(let s=i.classList.length;s--;){let r=i.classList[s];if(e.test(r))return!0}if(t)return i.matches(t)}catch(s){}return!1}function ns(i,e,t){if(!i)return!1;if(i.nodeType!==i.ELEMENT_NODE)return t?ns(oe.parentNode(i),e,t):!1;for(let s=i.classList.length;s--;){let r=i.classList[s];if(e.test(r))return!0}return t?ns(oe.parentNode(i),e,t):!1}function Ca(i,e,t,s){let r;if(ga(i)){if(r=i,!oe.childNodes(r).length)return!1}else{if(oe.parentElement(i)===null)return!1;r=oe.parentElement(i)}try{if(typeof e=="string"){if(s){if(r.closest(`.${e}`))return!0}else if(r.classList.contains(e))return!0}else if(ns(r,e,s))return!0;if(t){if(s){if(r.closest(t))return!0}else if(r.matches(t))return!0}}catch(n){}return!1}function du(i,e,t){let s=i.contentWindow;if(!s)return;let r=!1,n;try{n=s.document.readyState}catch(a){return}if(n!=="complete"){let a=setTimeout(()=>{r||(e(),r=!0)},t);i.addEventListener("load",()=>{clearTimeout(a),r=!0,e()});return}let o="about:blank";if(s.location.href!==o||i.src===o||i.src==="")return setTimeout(e,0),i.addEventListener("load",e);i.addEventListener("load",e)}function fu(i,e,t){let s=!1,r;try{r=i.sheet}catch(o){return}if(r)return;let n=setTimeout(()=>{s||(e(),s=!0)},t);i.addEventListener("load",()=>{clearTimeout(n),s=!0,e()})}function pu(i,e){let{doc:t,mirror:s,blockClass:r,blockSelector:n,needsMask:o,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:h,maskInputFn:c,dataURLOptions:u={},inlineImages:g,recordCanvas:f,keepIframeSrcFn:d,newlyAddedElement:m=!1,cssCaptured:p=!1}=e,C=mu(t,s);switch(i.nodeType){case i.DOCUMENT_NODE:return i.compatMode!=="CSS1Compat"?{type:ie.Document,childNodes:[],compatMode:i.compatMode}:{type:ie.Document,childNodes:[]};case i.DOCUMENT_TYPE_NODE:return{type:ie.DocumentType,name:i.name,publicId:i.publicId,systemId:i.systemId,rootId:C};case i.ELEMENT_NODE:return yu(i,{doc:t,blockClass:r,blockSelector:n,inlineStylesheet:a,maskInputOptions:l,maskInputFn:c,dataURLOptions:u,inlineImages:g,recordCanvas:f,keepIframeSrcFn:d,newlyAddedElement:m,rootId:C});case i.TEXT_NODE:return gu(i,{doc:t,needsMask:o,maskTextFn:h,rootId:C,cssCaptured:p});case i.CDATA_SECTION_NODE:return{type:ie.CDATA,textContent:"",rootId:C};case i.COMMENT_NODE:return{type:ie.Comment,textContent:oe.textContent(i)||"",rootId:C};default:return!1}}function mu(i,e){if(!e.hasNode(i))return;let t=e.getId(i);return t===1?void 0:t}function gu(i,e){let{needsMask:t,maskTextFn:s,rootId:r,cssCaptured:n}=e,o=oe.parentNode(i),a=o&&o.tagName,l="",h=a==="STYLE"?!0:void 0,c=a==="SCRIPT"?!0:void 0;return c?l="SCRIPT_PLACEHOLDER":n||(l=oe.textContent(i),h&&l&&(l=rs(l,nn(e.doc)))),!h&&!c&&l&&t&&(l=s?s(l,oe.parentElement(i)):l.replace(/[\S]/g,"*")),{type:ie.Text,textContent:l||"",rootId:r}}function yu(i,e){let{doc:t,blockClass:s,blockSelector:r,inlineStylesheet:n,maskInputOptions:o={},maskInputFn:a,dataURLOptions:l={},inlineImages:h,recordCanvas:c,keepIframeSrcFn:u,newlyAddedElement:g=!1,rootId:f}=e,d=uu(i,s,r),m=ou(i),p={},C=i.attributes.length;for(let b=0;b<C;b++){let A=i.attributes[b];Sa(m,A.name,A.value)||(p[A.name]=wa(t,m,at(A.name),A.value))}if(m==="link"&&n){let b=Array.from(t.styleSheets).find(k=>k.href===i.href),A=null;b&&(A=fr(b)),A&&(delete p.rel,delete p.href,p._cssText=A)}if(m==="style"&&i.sheet){let b=fr(i.sheet);b&&(i.childNodes.length>1&&(b=su(b,i)),p._cssText=b)}if(m==="input"||m==="textarea"||m==="select"){let b=i.value,A=i.checked;p.type!=="radio"&&p.type!=="checkbox"&&p.type!=="submit"&&p.type!=="button"&&b?p.value=sn({element:i,type:rn(i),tagName:m,value:b,maskInputOptions:o,maskInputFn:a}):A&&(p.checked=A)}if(m==="option"&&(i.selected&&!o.select?p.selected=!0:delete p.selected),m==="dialog"&&i.open&&(p.rr_open_mode=i.matches("dialog:modal")?"modal":"non-modal"),m==="canvas"&&c){if(i.__context==="2d")Kc(i)||(p.rr_dataURL=i.toDataURL(l.type,l.quality));else if(!("__context"in i)){let b=i.toDataURL(l.type,l.quality),A=t.createElement("canvas");A.width=i.width,A.height=i.height;let k=A.toDataURL(l.type,l.quality);b!==k&&(p.rr_dataURL=b)}}if(m==="img"&&h){mt||(mt=t.createElement("canvas"),Co=mt.getContext("2d"));let b=i,A=b.currentSrc||b.getAttribute("src")||"<unknown-src>",k=b.crossOrigin,v=()=>{b.removeEventListener("load",v);try{mt.width=b.naturalWidth,mt.height=b.naturalHeight,Co.drawImage(b,0,0),p.rr_dataURL=mt.toDataURL(l.type,l.quality)}catch(E){if(b.crossOrigin!=="anonymous"){b.crossOrigin="anonymous",b.complete&&b.naturalWidth!==0?v():b.addEventListener("load",v);return}else console.warn(`Cannot inline img src=${A}! Error: ${E}`)}b.crossOrigin==="anonymous"&&(k?p.crossOrigin=k:b.removeAttribute("crossorigin"))};b.complete&&b.naturalWidth!==0?v():b.addEventListener("load",v)}if(m==="audio"||m==="video"){let b=p;b.rr_mediaState=i.paused?"paused":"played",b.rr_mediaCurrentTime=i.currentTime,b.rr_mediaPlaybackRate=i.playbackRate,b.rr_mediaMuted=i.muted,b.rr_mediaLoop=i.loop,b.rr_mediaVolume=i.volume}if(g||(i.scrollLeft&&(p.rr_scrollLeft=i.scrollLeft),i.scrollTop&&(p.rr_scrollTop=i.scrollTop)),d){let{width:b,height:A}=i.getBoundingClientRect();p={class:p.class,rr_width:`${b}px`,rr_height:`${A}px`}}m==="iframe"&&!u(p.src)&&(i.contentDocument||(p.rr_src=p.src),delete p.src);let w;try{customElements.get(m)&&(w=!0)}catch(b){}return{type:ie.Element,tagName:m,attributes:p,childNodes:[],isSVG:cu(i)||void 0,needBlock:d,rootId:f,isCustom:w}}function G(i){return i==null?"":i.toLowerCase()}function vu(i,e){if(e.comment&&i.type===ie.Comment)return!0;if(i.type===ie.Element){if(e.script&&(i.tagName==="script"||i.tagName==="link"&&(i.attributes.rel==="preload"||i.attributes.rel==="modulepreload")&&i.attributes.as==="script"||i.tagName==="link"&&i.attributes.rel==="prefetch"&&typeof i.attributes.href=="string"&&va(i.attributes.href)==="js"))return!0;if(e.headFavicon&&(i.tagName==="link"&&i.attributes.rel==="shortcut icon"||i.tagName==="meta"&&(G(i.attributes.name).match(/^msapplication-tile(image|color)$/)||G(i.attributes.name)==="application-name"||G(i.attributes.rel)==="icon"||G(i.attributes.rel)==="apple-touch-icon"||G(i.attributes.rel)==="shortcut icon")))return!0;if(i.tagName==="meta"){if(e.headMetaDescKeywords&&G(i.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(G(i.attributes.property).match(/^(og|twitter|fb):/)||G(i.attributes.name).match(/^(og|twitter):/)||G(i.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(G(i.attributes.name)==="robots"||G(i.attributes.name)==="googlebot"||G(i.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&i.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(G(i.attributes.name)==="author"||G(i.attributes.name)==="generator"||G(i.attributes.name)==="framework"||G(i.attributes.name)==="publisher"||G(i.attributes.name)==="progid"||G(i.attributes.property).match(/^article:/)||G(i.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(G(i.attributes.name)==="google-site-verification"||G(i.attributes.name)==="yandex-verification"||G(i.attributes.name)==="csrf-token"||G(i.attributes.name)==="p:domain_verify"||G(i.attributes.name)==="verify-v1"||G(i.attributes.name)==="verification"||G(i.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function bt(i,e){let{doc:t,mirror:s,blockClass:r,blockSelector:n,maskTextClass:o,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:h=!0,maskInputOptions:c={},maskTextFn:u,maskInputFn:g,slimDOMOptions:f,dataURLOptions:d={},inlineImages:m=!1,recordCanvas:p=!1,onSerialize:C,onIframeLoad:w,iframeLoadTimeout:b=5e3,onStylesheetLoad:A,stylesheetLoadTimeout:k=5e3,keepIframeSrcFn:v=()=>!1,newlyAddedElement:E=!1,cssCaptured:M=!1}=e,{needsMask:$}=e,{preserveWhiteSpace:P=!0}=e;$||($=Ca(i,o,a,$===void 0));let T=pu(i,{doc:t,mirror:s,blockClass:r,blockSelector:n,needsMask:$,inlineStylesheet:h,maskInputOptions:c,maskTextFn:u,maskInputFn:g,dataURLOptions:d,inlineImages:m,recordCanvas:p,keepIframeSrcFn:v,newlyAddedElement:E,cssCaptured:M});if(!T)return console.warn(i,"not serialized"),null;let te;s.hasNode(i)?te=s.getId(i):vu(T,f)||!P&&T.type===ie.Text&&!T.textContent.replace(/^\s+|\s+$/gm,"").length?te=Zt:te=ba();let N=Object.assign(T,{id:te});if(s.add(i,N),te===Zt)return null;C&&C(i);let Me=!l;if(N.type===ie.Element){Me=Me&&!N.needBlock,delete N.needBlock;let q=oe.shadowRoot(i);q&&Kt(q)&&(N.isShadowHost=!0)}if((N.type===ie.Document||N.type===ie.Element)&&Me){f.headWhitespace&&N.type===ie.Element&&N.tagName==="head"&&(P=!1);let q={doc:t,mirror:s,blockClass:r,blockSelector:n,needsMask:$,maskTextClass:o,maskTextSelector:a,skipChild:l,inlineStylesheet:h,maskInputOptions:c,maskTextFn:u,maskInputFn:g,slimDOMOptions:f,dataURLOptions:d,inlineImages:m,recordCanvas:p,preserveWhiteSpace:P,onSerialize:C,onIframeLoad:w,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:k,keepIframeSrcFn:v,cssCaptured:!1};if(!(N.type===ie.Element&&N.tagName==="textarea"&&N.attributes.value!==void 0)){N.type===ie.Element&&N.attributes._cssText!==void 0&&typeof N.attributes._cssText=="string"&&(q.cssCaptured=!0);for(let R of Array.from(oe.childNodes(i))){let F=bt(R,q);F&&N.childNodes.push(F)}}let x=null;if(ga(i)&&(x=oe.shadowRoot(i)))for(let R of Array.from(oe.childNodes(x))){let F=bt(R,q);F&&(Kt(x)&&(F.isShadow=!0),N.childNodes.push(F))}}let Ke=oe.parentNode(i);return Ke&&Yt(Ke)&&Kt(Ke)&&(N.isShadow=!0),N.type===ie.Element&&N.tagName==="iframe"&&du(i,()=>{let q=i.contentDocument;if(q&&w){let x=bt(q,{doc:q,mirror:s,blockClass:r,blockSelector:n,needsMask:$,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputOptions:c,maskTextFn:u,maskInputFn:g,slimDOMOptions:f,dataURLOptions:d,inlineImages:m,recordCanvas:p,preserveWhiteSpace:P,onSerialize:C,onIframeLoad:w,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:k,keepIframeSrcFn:v});x&&w(i,x)}},b),N.type===ie.Element&&N.tagName==="link"&&typeof N.attributes.rel=="string"&&(N.attributes.rel==="stylesheet"||N.attributes.rel==="preload"&&typeof N.attributes.href=="string"&&va(N.attributes.href)==="css")&&fu(i,()=>{if(A){let q=bt(i,{doc:t,mirror:s,blockClass:r,blockSelector:n,needsMask:$,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputOptions:c,maskTextFn:u,maskInputFn:g,slimDOMOptions:f,dataURLOptions:d,inlineImages:m,recordCanvas:p,preserveWhiteSpace:P,onSerialize:C,onIframeLoad:w,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:k,keepIframeSrcFn:v});q&&A(i,q)}},k),N}function bu(i,e){let{mirror:t=new ss,blockClass:s="rr-block",blockSelector:r=null,maskTextClass:n="rr-mask",maskTextSelector:o=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:h=!1,maskAllInputs:c=!1,maskTextFn:u,maskInputFn:g,slimDOM:f=!1,dataURLOptions:d,preserveWhiteSpace:m,onSerialize:p,onIframeLoad:C,iframeLoadTimeout:w,onStylesheetLoad:b,stylesheetLoadTimeout:A,keepIframeSrcFn:k=()=>!1}=e||{};return bt(i,{doc:i,mirror:t,blockClass:s,blockSelector:r,maskTextClass:n,maskTextSelector:o,skipChild:!1,inlineStylesheet:a,maskInputOptions:c===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:c===!1?{password:!0}:c,maskTextFn:u,maskInputFn:g,slimDOMOptions:f===!0||f==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:f==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:f===!1?{}:f,dataURLOptions:d,inlineImages:l,recordCanvas:h,preserveWhiteSpace:m,onSerialize:p,onIframeLoad:C,iframeLoadTimeout:w,onStylesheetLoad:b,stylesheetLoadTimeout:A,keepIframeSrcFn:k,newlyAddedElement:!1})}var wu=/(max|min)-device-(width|height)/,dg=new RegExp(wu.source,"g");function Su(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Cu(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var r=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return i[s]}})}),t}var on={exports:{}},J=String,Ea=function(){return{isColorSupported:!1,reset:J,bold:J,dim:J,italic:J,underline:J,inverse:J,hidden:J,strikethrough:J,black:J,red:J,green:J,yellow:J,blue:J,magenta:J,cyan:J,white:J,gray:J,bgBlack:J,bgRed:J,bgGreen:J,bgYellow:J,bgBlue:J,bgMagenta:J,bgCyan:J,bgWhite:J}};on.exports=Ea();on.exports.createColors=Ea;var Eu=on.exports,Au={},xu=Object.freeze(Object.defineProperty({__proto__:null,default:Au},Symbol.toStringTag,{value:"Module"})),Ce=Cu(xu),Ao=Eu,xo=Ce,pr=class Aa extends Error{constructor(e,t,s,r,n,o){super(e),this.name="CssSyntaxError",this.reason=e,n&&(this.file=n),r&&(this.source=r),o&&(this.plugin=o),typeof t!="undefined"&&typeof s!="undefined"&&(typeof t=="number"?(this.line=t,this.column=s):(this.line=t.line,this.column=t.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Aa)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Ao.isColorSupported),xo&&e&&(t=xo(t));let s=t.split(/\r?\n/),r=Math.max(this.line-3,0),n=Math.min(this.line+2,s.length),o=String(n).length,a,l;if(e){let{bold:h,gray:c,red:u}=Ao.createColors(!0);a=g=>h(u(g)),l=g=>c(g)}else a=l=h=>h;return s.slice(r,n).map((h,c)=>{let u=r+1+c,g=" "+(" "+u).slice(-o)+" | ";if(u===this.line){let f=l(g.replace(/\d/g," "))+h.slice(0,this.column-1).replace(/[^\t]/g," ");return a(">")+l(g)+h+`
 `+f+a("^")}return" "+l(g)+h}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},an=pr;pr.default=pr;var hi={};hi.isClean=Symbol("isClean");hi.my=Symbol("my");var Io={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function Iu(i){return i[0].toUpperCase()+i.slice(1)}var mr=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;e.type==="decl"?s=this.raw(e,null,"beforeDecl"):e.type==="comment"?s=this.raw(e,null,"beforeComment"):t==="before"?s=this.raw(e,null,"beforeRule"):s=this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&r.type!=="root";)n+=1,r=r.parent;if(s.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let a=0;a<n;a++)s+=o}return s}block(e,t){let s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start");let r;e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],typeof r!="undefined"))return r;let n=e.parent;if(s==="before"&&(!n||n.type==="root"&&n.first===e||n&&n.type==="document"))return"";if(!n)return Io[s];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[s]!="undefined")return o.rawCache[s];if(s==="before"||s==="after")return this.beforeAfter(e,s);{let a="raw"+Iu(s);this[a]?r=this[a](o,e):o.walk(l=>{if(r=l.raws[t],typeof r!="undefined")return!1})}return typeof r=="undefined"&&(r=Io[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length>0&&typeof s.raws.after!="undefined")return t=s.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk(s=>{if(s.type!=="decl"&&(t=s.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&typeof s.raws.before!="undefined")return t=s.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(s=>{if(typeof s.raws.between!="undefined")return t=s.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length===0&&(t=s.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&typeof s.raws.before!="undefined"){let n=s.raws.before.split(`
`);return t=n[n.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length&&s.last.type==="decl"&&(t=s.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},xa=mr;mr.default=mr;var Ru=xa;function gr(i,e){new Ru(e).stringify(i)}var vs=gr;gr.default=gr;var{isClean:_i,my:ku}=hi,Tu=an,_u=xa,Ou=vs;function yr(i,e){let t=new i.constructor;for(let s in i){if(!Object.prototype.hasOwnProperty.call(i,s)||s==="proxyCache")continue;let r=i[s],n=typeof r;s==="parent"&&n==="object"?e&&(t[s]=e):s==="source"?t[s]=r:Array.isArray(r)?t[s]=r.map(o=>yr(o,t)):(n==="object"&&r!==null&&(r=yr(r)),t[s]=r)}return t}var vr=class{constructor(e={}){this.raws={},this[_i]=!1,this[ku]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let s of e[t])typeof s.clone=="function"?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=yr(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new Tu(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[_i]){this[_i]=!1;let e=this;for(;e=e.parent;)e[_i]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let s=this.source.start;if(e.index)s=this.positionInside(e.index,t);else if(e.word){t=this.toString();let r=t.indexOf(e.word);r!==-1&&(s=this.positionInside(r,t))}return s}positionInside(e,t){let s=t||this.toString(),r=this.source.start.column,n=this.source.start.line;for(let o=0;o<e;o++)s[o]===`
`?(r=1,n+=1):r+=1;return{column:r,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r=this.toString(),n=r.indexOf(e.word);n!==-1&&(t=this.positionInside(n,r),s=this.positionInside(n+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return new _u().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let s={},r=t==null;t=t||new Map;let n=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let a=this[o];if(Array.isArray(a))s[o]=a.map(l=>typeof l=="object"&&l.toJSON?l.toJSON(null,t):l);else if(typeof a=="object"&&a.toJSON)s[o]=a.toJSON(null,t);else if(o==="source"){let l=t.get(a.input);l==null&&(l=n,t.set(a.input,n),n++),s[o]={end:a.end,inputId:l,start:a.start}}else s[o]=a}return r&&(s.inputs=[...t.keys()].map(o=>o.toJSON())),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Ou){e.stringify&&(e=e.stringify);let t="";return e(this,s=>{t+=s}),t}warn(e,t,s){let r={node:this};for(let n in s)r[n]=s[n];return e.warn(t,r)}get proxyOf(){return this}},bs=vr;vr.default=vr;var Mu=bs,br=class extends Mu{constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=ne(I({},e),{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},ws=br;br.default=br;var Nu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Du=(i,e=21)=>(t=e)=>{let s="",r=t;for(;r--;)s+=i[Math.random()*i.length|0];return s},Pu=(i=21)=>{let e="",t=i;for(;t--;)e+=Nu[Math.random()*64|0];return e},Lu={nanoid:Pu,customAlphabet:Du},{SourceMapConsumer:Ro,SourceMapGenerator:ko}=Ce,{existsSync:$u,readFileSync:Fu}=Ce,{dirname:tr,join:Uu}=Ce;function Bu(i){return Buffer?Buffer.from(i,"base64").toString():window.atob(i)}var wr=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=tr(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new Ro(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,s=/^data:application\/json;base64,/,r=/^data:application\/json;charset=utf-?8,/,n=/^data:application\/json,/;if(r.test(e)||n.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||s.test(e))return Bu(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=tr(e),$u(e))return this.mapFile=e,Fu(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let s=t(e);if(s){let r=this.loadFile(s);if(!r)throw new Error("Unable to load previous source map: "+s.toString());return r}}else{if(t instanceof Ro)return ko.fromSourceMap(t).toString();if(t instanceof ko)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let s=this.annotation;return e&&(s=Uu(tr(e),s)),this.loadFile(s)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},Ia=wr;wr.default=wr;var{SourceMapConsumer:Hu,SourceMapGenerator:ju}=Ce,{fileURLToPath:To,pathToFileURL:Oi}=Ce,{isAbsolute:Sr,resolve:Cr}=Ce,{nanoid:Wu}=Lu,ir=Ce,_o=an,Vu=Ia,sr=Symbol("fromOffsetCache"),zu=!!(Hu&&ju),Oo=!!(Cr&&Sr),os=class{constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Oo||/^\w+:\/\//.test(t.from)||Sr(t.from)?this.file=t.from:this.file=Cr(t.from)),Oo&&zu){let s=new Vu(this.css,t);if(s.text){this.map=s;let r=s.consumer().file;!this.file&&r&&(this.file=this.mapResolve(r))}}this.file||(this.id="<input css "+Wu(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,a;if(t&&typeof t=="object"){let h=t,c=s;if(typeof h.offset=="number"){let u=this.fromOffset(h.offset);t=u.line,s=u.col}else t=h.line,s=h.column;if(typeof c.offset=="number"){let u=this.fromOffset(c.offset);o=u.line,a=u.col}else o=c.line,a=c.column}else if(!s){let h=this.fromOffset(t);t=h.line,s=h.col}let l=this.origin(t,s,o,a);return l?n=new _o(e,l.endLine===void 0?l.line:{column:l.column,line:l.line},l.endLine===void 0?l.column:{column:l.endColumn,line:l.endLine},l.source,l.file,r.plugin):n=new _o(e,o===void 0?t:{column:s,line:t},o===void 0?s:{column:a,line:o},this.css,this.file,r.plugin),n.input={column:s,endColumn:a,endLine:o,line:t,source:this.css},this.file&&(Oi&&(n.input.url=Oi(this.file).toString()),n.input.file=this.file),n}fromOffset(e){let t,s;if(this[sr])s=this[sr];else{let n=this.css.split(`
`);s=new Array(n.length);let o=0;for(let a=0,l=n.length;a<l;a++)s[a]=o,o+=n[a].length+1;this[sr]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let n=s.length-2,o;for(;r<n;)if(o=r+(n-r>>1),e<s[o])n=o-1;else if(e>=s[o+1])r=o+1;else{r=o;break}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Cr(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n=this.map.consumer(),o=n.originalPositionFor({column:t,line:e});if(!o.source)return!1;let a;typeof s=="number"&&(a=n.originalPositionFor({column:r,line:s}));let l;Sr(o.source)?l=Oi(o.source):l=new URL(o.source,this.map.consumer().sourceRoot||Oi(this.map.mapFile));let h={column:o.column,endColumn:a&&a.column,endLine:a&&a.line,line:o.line,url:l.toString()};if(l.protocol==="file:")if(To)h.file=To(l);else throw new Error("file: protocol is not available in this PostCSS build");let c=n.sourceContentFor(o.source);return c&&(h.source=c),h}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=I({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},Ss=os;os.default=os;ir&&ir.registerInput&&ir.registerInput(os);var{SourceMapConsumer:Ra,SourceMapGenerator:qi}=Ce,{dirname:Zi,relative:ka,resolve:Ta,sep:_a}=Ce,{pathToFileURL:Mo}=Ce,Gu=Ss,Ju=!!(Ra&&qi),Xu=!!(Zi&&Ta&&ka&&_a),Yu=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),s=e.root||Zi(e.file),r;this.mapOpts.sourcesContent===!1?(r=new Ra(e.text),r.sourcesContent&&(r.sourcesContent=null)):r=e.consumer(),this.map.applySourceMap(r,t,this.toUrl(this.path(s)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Xu&&Ju&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=qi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new qi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new qi({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,s="<no source>",r={generated:{column:0,line:0},original:{column:0,line:0},source:""},n,o;this.stringify(this.root,(a,l,h)=>{if(this.css+=a,l&&h!=="end"&&(r.generated.line=e,r.generated.column=t-1,l.source&&l.source.start?(r.source=this.sourcePath(l),r.original.line=l.source.start.line,r.original.column=l.source.start.column-1,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,this.map.addMapping(r))),n=a.match(/\n/g),n?(e+=n.length,o=a.lastIndexOf(`
`),t=a.length-o):t+=a.length,l&&h!=="start"){let c=l.parent||{raws:{}};(!(l.type==="decl"||l.type==="atrule"&&!l.nodes)||l!==c.last||c.raws.semicolon)&&(l.source&&l.source.end?(r.source=this.sourcePath(l),r.original.line=l.source.end.line,r.original.column=l.source.end.column-1,r.generated.line=e,r.generated.column=t-2,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,r.generated.line=e,r.generated.column=t-1,this.map.addMapping(r)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?Zi(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(s=Zi(Ta(s,this.mapOpts.annotation)));let r=ka(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Gu(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Mo){let s=Mo(e).toString();return this.memoizedFileURLs.set(e,s),s}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;_a==="\\"&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}},Oa=Yu,Ku=bs,Er=class extends Ku{constructor(e){super(e),this.type="comment"}},Cs=Er;Er.default=Er;var{isClean:Ma,my:Na}=hi,Da=ws,Pa=Cs,qu=bs,La,ln,hn,$a;function Fa(i){return i.map(e=>(e.nodes&&(e.nodes=Fa(e.nodes)),delete e.source,e))}function Ua(i){if(i[Ma]=!1,i.proxyOf.nodes)for(let e of i.proxyOf.nodes)Ua(e)}var Be=class Ba extends qu{append(...e){for(let t of e){let s=this.normalize(t,this.last);for(let r of s)this.proxyOf.nodes.push(r)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),s,r;for(;this.indexes[t]<this.proxyOf.nodes.length&&(s=this.indexes[t],r=e(this.proxyOf.nodes[s],s),r!==!1);)this.indexes[t]+=1;return delete this.indexes[t],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...s)=>e[t](...s.map(r=>typeof r=="function"?(n,o)=>r(n.toProxy(),o):r)):t==="every"||t==="some"?s=>e[t]((r,...n)=>s(r.toProxy(),...n)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(s=>s.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s=this.index(e),r=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let o of r)this.proxyOf.nodes.splice(s+1,0,o);let n;for(let o in this.indexes)n=this.indexes[o],s<n&&(this.indexes[o]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let s=this.index(e),r=s===0?"prepend":!1,n=this.normalize(t,this.proxyOf.nodes[s],r).reverse();s=this.index(e);for(let a of n)this.proxyOf.nodes.splice(s,0,a);let o;for(let a in this.indexes)o=this.indexes[a],s<=o&&(this.indexes[a]=o+n.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Fa(La(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Da(e)]}else if(e.selector)e=[new ln(e)];else if(e.name)e=[new hn(e)];else if(e.text)e=[new Pa(e)];else throw new Error("Unknown node type in node creation");return e.map(r=>(r[Na]||Ba.rebuild(r),r=r.proxyOf,r.parent&&r.parent.removeChild(r),r[Ma]&&Ua(r),typeof r.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(r.raws.before=t.raws.before.replace(/\S/g,"")),r.parent=this.proxyOf,r))}prepend(...e){e=e.reverse();for(let t of e){let s=this.normalize(t,this.first,"prepend").reverse();for(let r of s)this.proxyOf.nodes.unshift(r);for(let r in this.indexes)this.indexes[r]=this.indexes[r]+s.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,s)=>{let r;try{r=e(t,s)}catch(n){throw t.addToError(n)}return r!==!1&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="atrule"&&e.test(s.name))return t(s,r)}):this.walk((s,r)=>{if(s.type==="atrule"&&s.name===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="atrule")return t(s,r)}))}walkComments(e){return this.walk((t,s)=>{if(t.type==="comment")return e(t,s)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="decl"&&e.test(s.prop))return t(s,r)}):this.walk((s,r)=>{if(s.type==="decl"&&s.prop===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="decl")return t(s,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="rule"&&e.test(s.selector))return t(s,r)}):this.walk((s,r)=>{if(s.type==="rule"&&s.selector===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="rule")return t(s,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Be.registerParse=i=>{La=i};Be.registerRule=i=>{ln=i};Be.registerAtRule=i=>{hn=i};Be.registerRoot=i=>{$a=i};var lt=Be;Be.default=Be;Be.rebuild=i=>{i.type==="atrule"?Object.setPrototypeOf(i,hn.prototype):i.type==="rule"?Object.setPrototypeOf(i,ln.prototype):i.type==="decl"?Object.setPrototypeOf(i,Da.prototype):i.type==="comment"?Object.setPrototypeOf(i,Pa.prototype):i.type==="root"&&Object.setPrototypeOf(i,$a.prototype),i[Na]=!0,i.nodes&&i.nodes.forEach(e=>{Be.rebuild(e)})};var Zu=lt,Ha,ja,Qt=class extends Zu{constructor(e){super(I({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Ha(new ja,this,e).stringify()}};Qt.registerLazyResult=i=>{Ha=i};Qt.registerProcessor=i=>{ja=i};var cn=Qt;Qt.default=Qt;var Ar=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let s=t.node.rangeBy(t);this.line=s.start.line,this.column=s.start.column,this.endLine=s.end.line,this.endColumn=s.end.column}for(let s in t)this[s]=t[s]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},Wa=Ar;Ar.default=Ar;var Qu=Wa,xr=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new Qu(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},un=xr;xr.default=xr;var rr="'".charCodeAt(0),No='"'.charCodeAt(0),Mi="\\".charCodeAt(0),Do="/".charCodeAt(0),Ni=`
`.charCodeAt(0),Vt=" ".charCodeAt(0),Di="\f".charCodeAt(0),Pi="	".charCodeAt(0),Li="\r".charCodeAt(0),ed="[".charCodeAt(0),td="]".charCodeAt(0),id="(".charCodeAt(0),sd=")".charCodeAt(0),rd="{".charCodeAt(0),nd="}".charCodeAt(0),od=";".charCodeAt(0),ad="*".charCodeAt(0),ld=":".charCodeAt(0),hd="@".charCodeAt(0),$i=/[\t\n\f\r "#'()/;[\\\]{}]/g,Fi=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,cd=/.[\r\n"'(/\\]/,Po=/[\da-f]/i,ud=function(e,t={}){let s=e.css.valueOf(),r=t.ignoreErrors,n,o,a,l,h,c,u,g,f,d,m=s.length,p=0,C=[],w=[];function b(){return p}function A(M){throw e.error("Unclosed "+M,p)}function k(){return w.length===0&&p>=m}function v(M){if(w.length)return w.pop();if(p>=m)return;let $=M?M.ignoreUnclosed:!1;switch(n=s.charCodeAt(p),n){case Ni:case Vt:case Pi:case Li:case Di:{o=p;do o+=1,n=s.charCodeAt(o);while(n===Vt||n===Ni||n===Pi||n===Li||n===Di);d=["space",s.slice(p,o)],p=o-1;break}case ed:case td:case rd:case nd:case ld:case od:case sd:{let P=String.fromCharCode(n);d=[P,P,p];break}case id:{if(g=C.length?C.pop()[1]:"",f=s.charCodeAt(p+1),g==="url"&&f!==rr&&f!==No&&f!==Vt&&f!==Ni&&f!==Pi&&f!==Di&&f!==Li){o=p;do{if(c=!1,o=s.indexOf(")",o+1),o===-1)if(r||$){o=p;break}else A("bracket");for(u=o;s.charCodeAt(u-1)===Mi;)u-=1,c=!c}while(c);d=["brackets",s.slice(p,o+1),p,o],p=o}else o=s.indexOf(")",p+1),l=s.slice(p,o+1),o===-1||cd.test(l)?d=["(","(",p]:(d=["brackets",l,p,o],p=o);break}case rr:case No:{a=n===rr?"'":'"',o=p;do{if(c=!1,o=s.indexOf(a,o+1),o===-1)if(r||$){o=p+1;break}else A("string");for(u=o;s.charCodeAt(u-1)===Mi;)u-=1,c=!c}while(c);d=["string",s.slice(p,o+1),p,o],p=o;break}case hd:{$i.lastIndex=p+1,$i.test(s),$i.lastIndex===0?o=s.length-1:o=$i.lastIndex-2,d=["at-word",s.slice(p,o+1),p,o],p=o;break}case Mi:{for(o=p,h=!0;s.charCodeAt(o+1)===Mi;)o+=1,h=!h;if(n=s.charCodeAt(o+1),h&&n!==Do&&n!==Vt&&n!==Ni&&n!==Pi&&n!==Li&&n!==Di&&(o+=1,Po.test(s.charAt(o)))){for(;Po.test(s.charAt(o+1));)o+=1;s.charCodeAt(o+1)===Vt&&(o+=1)}d=["word",s.slice(p,o+1),p,o],p=o;break}default:{n===Do&&s.charCodeAt(p+1)===ad?(o=s.indexOf("*/",p+2)+1,o===0&&(r||$?o=s.length:A("comment")),d=["comment",s.slice(p,o+1),p,o],p=o):(Fi.lastIndex=p+1,Fi.test(s),Fi.lastIndex===0?o=s.length-1:o=Fi.lastIndex-2,d=["word",s.slice(p,o+1),p,o],C.push(d),p=o);break}}return p++,d}function E(M){w.push(M)}return{back:E,endOfFile:k,nextToken:v,position:b}},Va=lt,as=class extends Va{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},dn=as;as.default=as;Va.registerAtRule(as);var za=lt,Ga,Ja,St=class extends za{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t){if(s==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let n of r)n.raws.before=t.raws.before}return r}removeChild(e,t){let s=this.index(e);return!t&&s===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new Ga(new Ja,this,e).stringify()}};St.registerLazyResult=i=>{Ga=i};St.registerProcessor=i=>{Ja=i};var ci=St;St.default=St;za.registerRoot(St);var ei={comma(i){return ei.split(i,[","],!0)},space(i){let e=[" ",`
`,"	"];return ei.split(i,e)},split(i,e,t){let s=[],r="",n=!1,o=0,a=!1,l="",h=!1;for(let c of i)h?h=!1:c==="\\"?h=!0:a?c===l&&(a=!1):c==='"'||c==="'"?(a=!0,l=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(n=!0),n?(r!==""&&s.push(r.trim()),r="",n=!1):r+=c;return(t||r!=="")&&s.push(r.trim()),s}},Xa=ei;ei.default=ei;var Ya=lt,dd=Xa,ls=class extends Ya{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return dd.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}},fn=ls;ls.default=ls;Ya.registerRule(ls);var fd=ws,pd=ud,md=Cs,gd=dn,yd=ci,Lo=fn,$o={empty:!0,space:!0};function vd(i){for(let e=i.length-1;e>=0;e--){let t=i[e],s=t[3]||t[2];if(s)return s}}var bd=class{constructor(e){this.input=e,this.root=new yd,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new gd;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let s,r,n,o=!1,a=!1,l=[],h=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),s=e[0],s==="("||s==="["?h.push(s==="("?")":"]"):s==="{"&&h.length>0?h.push("}"):s===h[h.length-1]&&h.pop(),h.length===0)if(s===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(s==="{"){a=!0;break}else if(s==="}"){if(l.length>0){for(n=l.length-1,r=l[n];r&&r[0]==="space";)r=l[--n];r&&(t.source.end=this.getPosition(r[3]||r[2]),t.source.end.offset++)}this.end(e);break}else l.push(e);else l.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(t.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(t,"params",l),o&&(e=l[l.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),a&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let s=0,r;for(let n=t-1;n>=0&&(r=e[n],!(r[0]!=="space"&&(s+=1,s===2)));n--);throw this.input.error("Missed semicolon",r[0]==="word"?r[3]+1:r[2])}colon(e){let t=0,s,r,n;for(let[o,a]of e.entries()){if(s=a,r=s[0],r==="("&&(t+=1),r===")"&&(t-=1),t===0&&r===":")if(!n)this.doubleColon(s);else{if(n[0]==="word"&&n[1]==="progid")continue;return o}n=s}return!1}comment(e){let t=new md;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let r=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}}createTokenizer(){this.tokenizer=pd(this.input)}decl(e,t){let s=new fd;this.init(s,e[0][2]);let r=e[e.length-1];for(r[0]===";"&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(r[3]||r[2]||vd(e)),s.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let h=e[0][0];if(h===":"||h==="space"||h==="comment")break;s.prop+=e.shift()[1]}s.raws.between="";let n;for(;e.length;)if(n=e.shift(),n[0]===":"){s.raws.between+=n[1];break}else n[0]==="word"&&/\w/.test(n[1])&&this.unknownWord([n]),s.raws.between+=n[1];(s.prop[0]==="_"||s.prop[0]==="*")&&(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o=[],a;for(;e.length&&(a=e[0][0],!(a!=="space"&&a!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let h=e.length-1;h>=0;h--){if(n=e[h],n[1].toLowerCase()==="!important"){s.important=!0;let c=this.stringFrom(e,h);c=this.spacesFromEnd(e)+c,c!==" !important"&&(s.raws.important=c);break}else if(n[1].toLowerCase()==="important"){let c=e.slice(0),u="";for(let g=h;g>0;g--){let f=c[g][0];if(u.trim().indexOf("!")===0&&f!=="space")break;u=c.pop()[1]+u}u.trim().indexOf("!")===0&&(s.important=!0,s.raws.important=u,e=c)}if(n[0]!=="space"&&n[0]!=="comment")break}e.some(h=>h[0]!=="space"&&h[0]!=="comment")&&(s.raws.between+=o.map(h=>h[1]).join(""),o=[]),this.raw(s,"value",o.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Lo;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],a=e[1].startsWith("--"),l=[],h=e;for(;h;){if(s=h[0],l.push(h),s==="("||s==="[")n||(n=h),o.push(s==="("?")":"]");else if(a&&r&&s==="{")n||(n=h),o.push("}");else if(o.length===0)if(s===";")if(r){this.decl(l,a);return}else break;else if(s==="{"){this.rule(l);return}else if(s==="}"){this.tokenizer.back(l.pop()),t=!0;break}else s===":"&&(r=!0);else s===o[o.length-1]&&(o.pop(),o.length===0&&(n=null));h=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!a)for(;l.length&&(h=l[l.length-1][0],!(h!=="space"&&h!=="comment"));)this.tokenizer.back(l.pop());this.decl(l,a)}else this.unknownWord(l)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,a=s.length,l="",h=!0,c,u;for(let g=0;g<a;g+=1)n=s[g],o=n[0],o==="space"&&g===a-1&&!r?h=!1:o==="comment"?(u=s[g-1]?s[g-1][0]:"empty",c=s[g+1]?s[g+1][0]:"empty",!$o[u]&&!$o[c]?l.slice(-1)===","?h=!1:l+=n[1]:h=!1):l+=n[1];if(!h){let g=s.reduce((f,d)=>f+d[1],"");e.raws[t]={raw:g,value:l}}e[t]=l}rule(e){e.pop();let t=new Lo;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],t==="space");)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},wd=bd,Sd=lt,Cd=wd,Ed=Ss;function hs(i,e){let t=new Ed(i,e),s=new Cd(t);try{s.parse()}catch(r){throw r}return s.root}var pn=hs;hs.default=hs;Sd.registerParse(hs);var{isClean:_e,my:Ad}=hi,xd=Oa,Id=vs,Rd=lt,kd=cn;var Fo=un,Td=pn,_d=ci,Od={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Md={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Nd={Once:!0,postcssPlugin:!0,prepare:!0},Ct=0;function zt(i){return typeof i=="object"&&typeof i.then=="function"}function Ka(i){let e=!1,t=Od[i.type];return i.type==="decl"?e=i.prop.toLowerCase():i.type==="atrule"&&(e=i.name.toLowerCase()),e&&i.append?[t,t+"-"+e,Ct,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:i.append?[t,Ct,t+"Exit"]:[t,t+"Exit"]}function Uo(i){let e;return i.type==="document"?e=["Document",Ct,"DocumentExit"]:i.type==="root"?e=["Root",Ct,"RootExit"]:e=Ka(i),{eventIndex:0,events:e,iterator:0,node:i,visitorIndex:0,visitors:[]}}function Ir(i){return i[_e]=!1,i.nodes&&i.nodes.forEach(e=>Ir(e)),i}var Rr={},Et=class qa{constructor(e,t,s){this.stringified=!1,this.processed=!1;let r;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))r=Ir(t);else if(t instanceof qa||t instanceof Fo)r=Ir(t.root),t.map&&(typeof s.map=="undefined"&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=t.map);else{let n=Td;s.syntax&&(n=s.syntax.parse),s.parser&&(n=s.parser),n.parse&&(n=n.parse);try{r=n(t,s)}catch(o){this.processed=!0,this.error=o}r&&!r[Ad]&&Rd.rebuild(r)}this.result=new Fo(e,r,s),this.helpers=ne(I({},Rr),{postcss:Rr,result:this.result}),this.plugins=this.processor.plugins.map(n=>typeof n=="object"&&n.prepare?I(I({},n),n.prepare(this.result)):n)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=s.postcssPlugin,e.setMessage()):s.postcssVersion}catch(r){console&&console.error&&console.error(r)}return e}prepareVisitors(){this.listeners={};let e=(t,s,r)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([t,r])};for(let t of this.plugins)if(typeof t=="object")for(let s in t){if(!Md[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Nd[s])if(typeof t[s]=="object")for(let r in t[s])r==="*"?e(t,s,t[s][r]):e(t,s+"-"+r.toLowerCase(),t[s][r]);else typeof t[s]=="function"&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(zt(s))try{await s}catch(r){throw this.handleError(r)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[_e];){e[_e]=!0;let t=[Uo(e)];for(;t.length>0;){let s=this.visitTick(t);if(zt(s))try{await s}catch(r){let n=t[t.length-1].node;throw this.handleError(r,n)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let r=e.nodes.map(n=>s(n,this.helpers));await Promise.all(r)}else await s(e,this.helpers)}catch(r){throw this.handleError(r)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(s=>e.Once(s,this.helpers));return zt(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Id;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new xd(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(zt(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[_e];)e[_e]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){this.result.lastPlugin=s;let n;try{n=r(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(zt(n))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if(s.type!=="root"&&s.type!=="document"&&!s.parent){e.pop();return}if(r.length>0&&t.visitorIndex<r.length){let[o,a]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(s.toProxy(),this.helpers)}catch(l){throw this.handleError(l,s)}}if(t.iterator!==0){let o=t.iterator,a;for(;a=s.nodes[s.indexes[o]];)if(s.indexes[o]+=1,!a[_e]){a[_e]=!0,e.push(Uo(a));return}t.iterator=0,delete s.indexes[o]}let n=t.events;for(;t.eventIndex<n.length;){let o=n[t.eventIndex];if(t.eventIndex+=1,o===Ct){s.nodes&&s.nodes.length&&(s[_e]=!0,t.iterator=s.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[_e]=!0;let t=Ka(e);for(let s of t)if(s===Ct)e.nodes&&e.each(r=>{r[_e]||this.walkSync(r)});else{let r=this.listeners[s];if(r&&this.visitSync(r,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};Et.registerPostcss=i=>{Rr=i};var Za=Et;Et.default=Et;_d.registerLazyResult(Et);kd.registerLazyResult(Et);var Dd=Oa,Pd=vs;var Ld=pn,$d=un,kr=class{constructor(e,t,s){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let r,n=Pd;this.result=new $d(this._processor,r,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let a=new Dd(n,r,this._opts,t);if(a.isMap()){let[l,h]=a.generate();l&&(this.result.css=l),h&&(this.result.map=h)}else a.clearAnnotation(),this.result.css=a.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Ld;try{e=t(this._css,this._opts)}catch(s){this.error=s}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},Fd=kr;kr.default=kr;var Ud=Fd,Bd=Za,Hd=cn,jd=ci,ti=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(s.postcss===!0?s=s():s.postcss&&(s=s.postcss),typeof s=="object"&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if(typeof s=="object"&&s.postcssPlugin)t.push(s);else if(typeof s=="function")t.push(s);else if(!(typeof s=="object"&&(s.parse||s.stringify)))throw new Error(s+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new Ud(this,e,t):new Bd(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},Wd=ti;ti.default=ti;jd.registerProcessor(ti);Hd.registerProcessor(ti);var Vd=ws,zd=Ia,Gd=Cs,Jd=dn,Xd=Ss,Yd=ci,Kd=fn;function ii(i,e){if(Array.isArray(i))return i.map(o=>ii(o));let r=i,{inputs:t}=r,s=We(r,["inputs"]);if(t){e=[];for(let o of t){let a=ne(I({},o),{__proto__:Xd.prototype});a.map&&(a.map=ne(I({},a.map),{__proto__:zd.prototype})),e.push(a)}}if(s.nodes&&(s.nodes=i.nodes.map(o=>ii(o,e))),s.source){let n=s.source,{inputId:o}=n,a=We(n,["inputId"]);s.source=a,o!=null&&(s.source.input=e[o])}if(s.type==="root")return new Yd(s);if(s.type==="decl")return new Vd(s);if(s.type==="rule")return new Kd(s);if(s.type==="comment")return new Gd(s);if(s.type==="atrule")return new Jd(s);throw new Error("Unknown node type: "+i.type)}var qd=ii;ii.default=ii;var Zd=an,Qa=ws,Qd=Za,ef=lt,mn=Wd,tf=vs,sf=qd,el=cn,rf=Wa,tl=Cs,il=dn,nf=un,of=Ss,af=pn,lf=Xa,sl=fn,rl=ci,hf=bs;function j(...i){return i.length===1&&Array.isArray(i[0])&&(i=i[0]),new mn(i)}j.plugin=function(e,t){let s=!1;function r(...o){console&&console.warn&&!s&&(s=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let a=t(...o);return a.postcssPlugin=e,a.postcssVersion=new mn().version,a}let n;return Object.defineProperty(r,"postcss",{get(){return n||(n=r()),n}}),r.process=function(o,a,l){return j([r(l)]).process(o,a)},r};j.stringify=tf;j.parse=af;j.fromJSON=sf;j.list=lf;j.comment=i=>new tl(i);j.atRule=i=>new il(i);j.decl=i=>new Qa(i);j.rule=i=>new sl(i);j.root=i=>new rl(i);j.document=i=>new el(i);j.CssSyntaxError=Zd;j.Declaration=Qa;j.Container=ef;j.Processor=mn;j.Document=el;j.Comment=tl;j.Warning=rf;j.AtRule=il;j.Result=nf;j.Input=of;j.Rule=sl;j.Root=rl;j.Node=hf;Qd.registerPostcss(j);var cf=j;j.default=j;var Y=Su(cf);Y.stringify;Y.fromJSON;Y.plugin;Y.parse;Y.list;Y.document;Y.comment;Y.atRule;Y.rule;Y.decl;Y.root;Y.CssSyntaxError;Y.Declaration;Y.Container;Y.Processor;Y.Document;Y.Comment;Y.Warning;Y.AtRule;Y.Result;Y.Input;Y.Rule;Y.Root;Y.Node;var uf=Object.defineProperty,df=(i,e,t)=>e in i?uf(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,be=(i,e,t)=>df(i,typeof e!="symbol"?e+"":e,t);function ff(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function pf(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var r=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return i[s]}})}),t}var gn={exports:{}},X=String,nl=function(){return{isColorSupported:!1,reset:X,bold:X,dim:X,italic:X,underline:X,inverse:X,hidden:X,strikethrough:X,black:X,red:X,green:X,yellow:X,blue:X,magenta:X,cyan:X,white:X,gray:X,bgBlack:X,bgRed:X,bgGreen:X,bgYellow:X,bgBlue:X,bgMagenta:X,bgCyan:X,bgWhite:X}};gn.exports=nl();gn.exports.createColors=nl;var mf=gn.exports,gf={},yf=Object.freeze(Object.defineProperty({__proto__:null,default:gf},Symbol.toStringTag,{value:"Module"})),Ee=pf(yf),Bo=mf,Ho=Ee,Tr=class ol extends Error{constructor(e,t,s,r,n,o){super(e),this.name="CssSyntaxError",this.reason=e,n&&(this.file=n),r&&(this.source=r),o&&(this.plugin=o),typeof t!="undefined"&&typeof s!="undefined"&&(typeof t=="number"?(this.line=t,this.column=s):(this.line=t.line,this.column=t.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,ol)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Bo.isColorSupported),Ho&&e&&(t=Ho(t));let s=t.split(/\r?\n/),r=Math.max(this.line-3,0),n=Math.min(this.line+2,s.length),o=String(n).length,a,l;if(e){let{bold:h,gray:c,red:u}=Bo.createColors(!0);a=g=>h(u(g)),l=g=>c(g)}else a=l=h=>h;return s.slice(r,n).map((h,c)=>{let u=r+1+c,g=" "+(" "+u).slice(-o)+" | ";if(u===this.line){let f=l(g.replace(/\d/g," "))+h.slice(0,this.column-1).replace(/[^\t]/g," ");return a(">")+l(g)+h+`
 `+f+a("^")}return" "+l(g)+h}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},yn=Tr;Tr.default=Tr;var ui={};ui.isClean=Symbol("isClean");ui.my=Symbol("my");var jo={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function vf(i){return i[0].toUpperCase()+i.slice(1)}var _r=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;e.type==="decl"?s=this.raw(e,null,"beforeDecl"):e.type==="comment"?s=this.raw(e,null,"beforeComment"):t==="before"?s=this.raw(e,null,"beforeRule"):s=this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&r.type!=="root";)n+=1,r=r.parent;if(s.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let a=0;a<n;a++)s+=o}return s}block(e,t){let s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start");let r;e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],typeof r!="undefined"))return r;let n=e.parent;if(s==="before"&&(!n||n.type==="root"&&n.first===e||n&&n.type==="document"))return"";if(!n)return jo[s];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[s]!="undefined")return o.rawCache[s];if(s==="before"||s==="after")return this.beforeAfter(e,s);{let a="raw"+vf(s);this[a]?r=this[a](o,e):o.walk(l=>{if(r=l.raws[t],typeof r!="undefined")return!1})}return typeof r=="undefined"&&(r=jo[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length>0&&typeof s.raws.after!="undefined")return t=s.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk(s=>{if(s.type!=="decl"&&(t=s.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&typeof s.raws.before!="undefined")return t=s.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(s=>{if(typeof s.raws.between!="undefined")return t=s.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length===0&&(t=s.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&typeof s.raws.before!="undefined"){let n=s.raws.before.split(`
`);return t=n[n.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length&&s.last.type==="decl"&&(t=s.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},al=_r;_r.default=_r;var bf=al;function Or(i,e){new bf(e).stringify(i)}var Es=Or;Or.default=Or;var{isClean:Ui,my:wf}=ui,Sf=yn,Cf=al,Ef=Es;function Mr(i,e){let t=new i.constructor;for(let s in i){if(!Object.prototype.hasOwnProperty.call(i,s)||s==="proxyCache")continue;let r=i[s],n=typeof r;s==="parent"&&n==="object"?e&&(t[s]=e):s==="source"?t[s]=r:Array.isArray(r)?t[s]=r.map(o=>Mr(o,t)):(n==="object"&&r!==null&&(r=Mr(r)),t[s]=r)}return t}var Nr=class{constructor(e={}){this.raws={},this[Ui]=!1,this[wf]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let s of e[t])typeof s.clone=="function"?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Mr(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new Sf(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[Ui]){this[Ui]=!1;let e=this;for(;e=e.parent;)e[Ui]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let s=this.source.start;if(e.index)s=this.positionInside(e.index,t);else if(e.word){t=this.toString();let r=t.indexOf(e.word);r!==-1&&(s=this.positionInside(r,t))}return s}positionInside(e,t){let s=t||this.toString(),r=this.source.start.column,n=this.source.start.line;for(let o=0;o<e;o++)s[o]===`
`?(r=1,n+=1):r+=1;return{column:r,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r=this.toString(),n=r.indexOf(e.word);n!==-1&&(t=this.positionInside(n,r),s=this.positionInside(n+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return new Cf().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let s={},r=t==null;t=t||new Map;let n=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let a=this[o];if(Array.isArray(a))s[o]=a.map(l=>typeof l=="object"&&l.toJSON?l.toJSON(null,t):l);else if(typeof a=="object"&&a.toJSON)s[o]=a.toJSON(null,t);else if(o==="source"){let l=t.get(a.input);l==null&&(l=n,t.set(a.input,n),n++),s[o]={end:a.end,inputId:l,start:a.start}}else s[o]=a}return r&&(s.inputs=[...t.keys()].map(o=>o.toJSON())),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Ef){e.stringify&&(e=e.stringify);let t="";return e(this,s=>{t+=s}),t}warn(e,t,s){let r={node:this};for(let n in s)r[n]=s[n];return e.warn(t,r)}get proxyOf(){return this}},As=Nr;Nr.default=Nr;var Af=As,Dr=class extends Af{constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=ne(I({},e),{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},xs=Dr;Dr.default=Dr;var xf="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",If=(i,e=21)=>(t=e)=>{let s="",r=t;for(;r--;)s+=i[Math.random()*i.length|0];return s},Rf=(i=21)=>{let e="",t=i;for(;t--;)e+=xf[Math.random()*64|0];return e},kf={nanoid:Rf,customAlphabet:If},{SourceMapConsumer:Wo,SourceMapGenerator:Vo}=Ee,{existsSync:Tf,readFileSync:_f}=Ee,{dirname:nr,join:Of}=Ee;function Mf(i){return Buffer?Buffer.from(i,"base64").toString():window.atob(i)}var Pr=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=nr(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new Wo(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,s=/^data:application\/json;base64,/,r=/^data:application\/json;charset=utf-?8,/,n=/^data:application\/json,/;if(r.test(e)||n.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||s.test(e))return Mf(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=nr(e),Tf(e))return this.mapFile=e,_f(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let s=t(e);if(s){let r=this.loadFile(s);if(!r)throw new Error("Unable to load previous source map: "+s.toString());return r}}else{if(t instanceof Wo)return Vo.fromSourceMap(t).toString();if(t instanceof Vo)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let s=this.annotation;return e&&(s=Of(nr(e),s)),this.loadFile(s)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},ll=Pr;Pr.default=Pr;var{SourceMapConsumer:Nf,SourceMapGenerator:Df}=Ee,{fileURLToPath:zo,pathToFileURL:Bi}=Ee,{isAbsolute:Lr,resolve:$r}=Ee,{nanoid:Pf}=kf,or=Ee,Go=yn,Lf=ll,ar=Symbol("fromOffsetCache"),$f=!!(Nf&&Df),Jo=!!($r&&Lr),cs=class{constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Jo||/^\w+:\/\//.test(t.from)||Lr(t.from)?this.file=t.from:this.file=$r(t.from)),Jo&&$f){let s=new Lf(this.css,t);if(s.text){this.map=s;let r=s.consumer().file;!this.file&&r&&(this.file=this.mapResolve(r))}}this.file||(this.id="<input css "+Pf(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,a;if(t&&typeof t=="object"){let h=t,c=s;if(typeof h.offset=="number"){let u=this.fromOffset(h.offset);t=u.line,s=u.col}else t=h.line,s=h.column;if(typeof c.offset=="number"){let u=this.fromOffset(c.offset);o=u.line,a=u.col}else o=c.line,a=c.column}else if(!s){let h=this.fromOffset(t);t=h.line,s=h.col}let l=this.origin(t,s,o,a);return l?n=new Go(e,l.endLine===void 0?l.line:{column:l.column,line:l.line},l.endLine===void 0?l.column:{column:l.endColumn,line:l.endLine},l.source,l.file,r.plugin):n=new Go(e,o===void 0?t:{column:s,line:t},o===void 0?s:{column:a,line:o},this.css,this.file,r.plugin),n.input={column:s,endColumn:a,endLine:o,line:t,source:this.css},this.file&&(Bi&&(n.input.url=Bi(this.file).toString()),n.input.file=this.file),n}fromOffset(e){let t,s;if(this[ar])s=this[ar];else{let n=this.css.split(`
`);s=new Array(n.length);let o=0;for(let a=0,l=n.length;a<l;a++)s[a]=o,o+=n[a].length+1;this[ar]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let n=s.length-2,o;for(;r<n;)if(o=r+(n-r>>1),e<s[o])n=o-1;else if(e>=s[o+1])r=o+1;else{r=o;break}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:$r(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n=this.map.consumer(),o=n.originalPositionFor({column:t,line:e});if(!o.source)return!1;let a;typeof s=="number"&&(a=n.originalPositionFor({column:r,line:s}));let l;Lr(o.source)?l=Bi(o.source):l=new URL(o.source,this.map.consumer().sourceRoot||Bi(this.map.mapFile));let h={column:o.column,endColumn:a&&a.column,endLine:a&&a.line,line:o.line,url:l.toString()};if(l.protocol==="file:")if(zo)h.file=zo(l);else throw new Error("file: protocol is not available in this PostCSS build");let c=n.sourceContentFor(o.source);return c&&(h.source=c),h}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=I({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},Is=cs;cs.default=cs;or&&or.registerInput&&or.registerInput(cs);var{SourceMapConsumer:hl,SourceMapGenerator:Qi}=Ee,{dirname:es,relative:cl,resolve:ul,sep:dl}=Ee,{pathToFileURL:Xo}=Ee,Ff=Is,Uf=!!(hl&&Qi),Bf=!!(es&&ul&&cl&&dl),Hf=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),s=e.root||es(e.file),r;this.mapOpts.sourcesContent===!1?(r=new hl(e.text),r.sourcesContent&&(r.sourcesContent=null)):r=e.consumer(),this.map.applySourceMap(r,t,this.toUrl(this.path(s)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Bf&&Uf&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Qi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Qi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Qi({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,s="<no source>",r={generated:{column:0,line:0},original:{column:0,line:0},source:""},n,o;this.stringify(this.root,(a,l,h)=>{if(this.css+=a,l&&h!=="end"&&(r.generated.line=e,r.generated.column=t-1,l.source&&l.source.start?(r.source=this.sourcePath(l),r.original.line=l.source.start.line,r.original.column=l.source.start.column-1,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,this.map.addMapping(r))),n=a.match(/\n/g),n?(e+=n.length,o=a.lastIndexOf(`
`),t=a.length-o):t+=a.length,l&&h!=="start"){let c=l.parent||{raws:{}};(!(l.type==="decl"||l.type==="atrule"&&!l.nodes)||l!==c.last||c.raws.semicolon)&&(l.source&&l.source.end?(r.source=this.sourcePath(l),r.original.line=l.source.end.line,r.original.column=l.source.end.column-1,r.generated.line=e,r.generated.column=t-2,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,r.generated.line=e,r.generated.column=t-1,this.map.addMapping(r)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?es(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(s=es(ul(s,this.mapOpts.annotation)));let r=cl(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Ff(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Xo){let s=Xo(e).toString();return this.memoizedFileURLs.set(e,s),s}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;dl==="\\"&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}},fl=Hf,jf=As,Fr=class extends jf{constructor(e){super(e),this.type="comment"}},Rs=Fr;Fr.default=Fr;var{isClean:pl,my:ml}=ui,gl=xs,yl=Rs,Wf=As,vl,vn,bn,bl;function wl(i){return i.map(e=>(e.nodes&&(e.nodes=wl(e.nodes)),delete e.source,e))}function Sl(i){if(i[pl]=!1,i.proxyOf.nodes)for(let e of i.proxyOf.nodes)Sl(e)}var He=class Cl extends Wf{append(...e){for(let t of e){let s=this.normalize(t,this.last);for(let r of s)this.proxyOf.nodes.push(r)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),s,r;for(;this.indexes[t]<this.proxyOf.nodes.length&&(s=this.indexes[t],r=e(this.proxyOf.nodes[s],s),r!==!1);)this.indexes[t]+=1;return delete this.indexes[t],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...s)=>e[t](...s.map(r=>typeof r=="function"?(n,o)=>r(n.toProxy(),o):r)):t==="every"||t==="some"?s=>e[t]((r,...n)=>s(r.toProxy(),...n)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(s=>s.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s=this.index(e),r=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let o of r)this.proxyOf.nodes.splice(s+1,0,o);let n;for(let o in this.indexes)n=this.indexes[o],s<n&&(this.indexes[o]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let s=this.index(e),r=s===0?"prepend":!1,n=this.normalize(t,this.proxyOf.nodes[s],r).reverse();s=this.index(e);for(let a of n)this.proxyOf.nodes.splice(s,0,a);let o;for(let a in this.indexes)o=this.indexes[a],s<=o&&(this.indexes[a]=o+n.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=wl(vl(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new gl(e)]}else if(e.selector)e=[new vn(e)];else if(e.name)e=[new bn(e)];else if(e.text)e=[new yl(e)];else throw new Error("Unknown node type in node creation");return e.map(r=>(r[ml]||Cl.rebuild(r),r=r.proxyOf,r.parent&&r.parent.removeChild(r),r[pl]&&Sl(r),typeof r.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(r.raws.before=t.raws.before.replace(/\S/g,"")),r.parent=this.proxyOf,r))}prepend(...e){e=e.reverse();for(let t of e){let s=this.normalize(t,this.first,"prepend").reverse();for(let r of s)this.proxyOf.nodes.unshift(r);for(let r in this.indexes)this.indexes[r]=this.indexes[r]+s.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,s)=>{let r;try{r=e(t,s)}catch(n){throw t.addToError(n)}return r!==!1&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="atrule"&&e.test(s.name))return t(s,r)}):this.walk((s,r)=>{if(s.type==="atrule"&&s.name===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="atrule")return t(s,r)}))}walkComments(e){return this.walk((t,s)=>{if(t.type==="comment")return e(t,s)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="decl"&&e.test(s.prop))return t(s,r)}):this.walk((s,r)=>{if(s.type==="decl"&&s.prop===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="decl")return t(s,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="rule"&&e.test(s.selector))return t(s,r)}):this.walk((s,r)=>{if(s.type==="rule"&&s.selector===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="rule")return t(s,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};He.registerParse=i=>{vl=i};He.registerRule=i=>{vn=i};He.registerAtRule=i=>{bn=i};He.registerRoot=i=>{bl=i};var ht=He;He.default=He;He.rebuild=i=>{i.type==="atrule"?Object.setPrototypeOf(i,bn.prototype):i.type==="rule"?Object.setPrototypeOf(i,vn.prototype):i.type==="decl"?Object.setPrototypeOf(i,gl.prototype):i.type==="comment"?Object.setPrototypeOf(i,yl.prototype):i.type==="root"&&Object.setPrototypeOf(i,bl.prototype),i[ml]=!0,i.nodes&&i.nodes.forEach(e=>{He.rebuild(e)})};var Vf=ht,El,Al,si=class extends Vf{constructor(e){super(I({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new El(new Al,this,e).stringify()}};si.registerLazyResult=i=>{El=i};si.registerProcessor=i=>{Al=i};var wn=si;si.default=si;var Ur=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let s=t.node.rangeBy(t);this.line=s.start.line,this.column=s.start.column,this.endLine=s.end.line,this.endColumn=s.end.column}for(let s in t)this[s]=t[s]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},xl=Ur;Ur.default=Ur;var zf=xl,Br=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new zf(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},Sn=Br;Br.default=Br;var lr="'".charCodeAt(0),Yo='"'.charCodeAt(0),Hi="\\".charCodeAt(0),Ko="/".charCodeAt(0),ji=`
`.charCodeAt(0),Gt=" ".charCodeAt(0),Wi="\f".charCodeAt(0),Vi="	".charCodeAt(0),zi="\r".charCodeAt(0),Gf="[".charCodeAt(0),Jf="]".charCodeAt(0),Xf="(".charCodeAt(0),Yf=")".charCodeAt(0),Kf="{".charCodeAt(0),qf="}".charCodeAt(0),Zf=";".charCodeAt(0),Qf="*".charCodeAt(0),ep=":".charCodeAt(0),tp="@".charCodeAt(0),Gi=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ji=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,ip=/.[\r\n"'(/\\]/,qo=/[\da-f]/i,sp=function(e,t={}){let s=e.css.valueOf(),r=t.ignoreErrors,n,o,a,l,h,c,u,g,f,d,m=s.length,p=0,C=[],w=[];function b(){return p}function A(M){throw e.error("Unclosed "+M,p)}function k(){return w.length===0&&p>=m}function v(M){if(w.length)return w.pop();if(p>=m)return;let $=M?M.ignoreUnclosed:!1;switch(n=s.charCodeAt(p),n){case ji:case Gt:case Vi:case zi:case Wi:{o=p;do o+=1,n=s.charCodeAt(o);while(n===Gt||n===ji||n===Vi||n===zi||n===Wi);d=["space",s.slice(p,o)],p=o-1;break}case Gf:case Jf:case Kf:case qf:case ep:case Zf:case Yf:{let P=String.fromCharCode(n);d=[P,P,p];break}case Xf:{if(g=C.length?C.pop()[1]:"",f=s.charCodeAt(p+1),g==="url"&&f!==lr&&f!==Yo&&f!==Gt&&f!==ji&&f!==Vi&&f!==Wi&&f!==zi){o=p;do{if(c=!1,o=s.indexOf(")",o+1),o===-1)if(r||$){o=p;break}else A("bracket");for(u=o;s.charCodeAt(u-1)===Hi;)u-=1,c=!c}while(c);d=["brackets",s.slice(p,o+1),p,o],p=o}else o=s.indexOf(")",p+1),l=s.slice(p,o+1),o===-1||ip.test(l)?d=["(","(",p]:(d=["brackets",l,p,o],p=o);break}case lr:case Yo:{a=n===lr?"'":'"',o=p;do{if(c=!1,o=s.indexOf(a,o+1),o===-1)if(r||$){o=p+1;break}else A("string");for(u=o;s.charCodeAt(u-1)===Hi;)u-=1,c=!c}while(c);d=["string",s.slice(p,o+1),p,o],p=o;break}case tp:{Gi.lastIndex=p+1,Gi.test(s),Gi.lastIndex===0?o=s.length-1:o=Gi.lastIndex-2,d=["at-word",s.slice(p,o+1),p,o],p=o;break}case Hi:{for(o=p,h=!0;s.charCodeAt(o+1)===Hi;)o+=1,h=!h;if(n=s.charCodeAt(o+1),h&&n!==Ko&&n!==Gt&&n!==ji&&n!==Vi&&n!==zi&&n!==Wi&&(o+=1,qo.test(s.charAt(o)))){for(;qo.test(s.charAt(o+1));)o+=1;s.charCodeAt(o+1)===Gt&&(o+=1)}d=["word",s.slice(p,o+1),p,o],p=o;break}default:{n===Ko&&s.charCodeAt(p+1)===Qf?(o=s.indexOf("*/",p+2)+1,o===0&&(r||$?o=s.length:A("comment")),d=["comment",s.slice(p,o+1),p,o],p=o):(Ji.lastIndex=p+1,Ji.test(s),Ji.lastIndex===0?o=s.length-1:o=Ji.lastIndex-2,d=["word",s.slice(p,o+1),p,o],C.push(d),p=o);break}}return p++,d}function E(M){w.push(M)}return{back:E,endOfFile:k,nextToken:v,position:b}},Il=ht,us=class extends Il{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},Cn=us;us.default=us;Il.registerAtRule(us);var Rl=ht,kl,Tl,At=class extends Rl{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t){if(s==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let n of r)n.raws.before=t.raws.before}return r}removeChild(e,t){let s=this.index(e);return!t&&s===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new kl(new Tl,this,e).stringify()}};At.registerLazyResult=i=>{kl=i};At.registerProcessor=i=>{Tl=i};var di=At;At.default=At;Rl.registerRoot(At);var ri={comma(i){return ri.split(i,[","],!0)},space(i){let e=[" ",`
`,"	"];return ri.split(i,e)},split(i,e,t){let s=[],r="",n=!1,o=0,a=!1,l="",h=!1;for(let c of i)h?h=!1:c==="\\"?h=!0:a?c===l&&(a=!1):c==='"'||c==="'"?(a=!0,l=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(n=!0),n?(r!==""&&s.push(r.trim()),r="",n=!1):r+=c;return(t||r!=="")&&s.push(r.trim()),s}},_l=ri;ri.default=ri;var Ol=ht,rp=_l,ds=class extends Ol{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return rp.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}},En=ds;ds.default=ds;Ol.registerRule(ds);var np=xs,op=sp,ap=Rs,lp=Cn,hp=di,Zo=En,Qo={empty:!0,space:!0};function cp(i){for(let e=i.length-1;e>=0;e--){let t=i[e],s=t[3]||t[2];if(s)return s}}var up=class{constructor(e){this.input=e,this.root=new hp,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new lp;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let s,r,n,o=!1,a=!1,l=[],h=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),s=e[0],s==="("||s==="["?h.push(s==="("?")":"]"):s==="{"&&h.length>0?h.push("}"):s===h[h.length-1]&&h.pop(),h.length===0)if(s===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(s==="{"){a=!0;break}else if(s==="}"){if(l.length>0){for(n=l.length-1,r=l[n];r&&r[0]==="space";)r=l[--n];r&&(t.source.end=this.getPosition(r[3]||r[2]),t.source.end.offset++)}this.end(e);break}else l.push(e);else l.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(t.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(t,"params",l),o&&(e=l[l.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),a&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let s=0,r;for(let n=t-1;n>=0&&(r=e[n],!(r[0]!=="space"&&(s+=1,s===2)));n--);throw this.input.error("Missed semicolon",r[0]==="word"?r[3]+1:r[2])}colon(e){let t=0,s,r,n;for(let[o,a]of e.entries()){if(s=a,r=s[0],r==="("&&(t+=1),r===")"&&(t-=1),t===0&&r===":")if(!n)this.doubleColon(s);else{if(n[0]==="word"&&n[1]==="progid")continue;return o}n=s}return!1}comment(e){let t=new ap;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let r=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}}createTokenizer(){this.tokenizer=op(this.input)}decl(e,t){let s=new np;this.init(s,e[0][2]);let r=e[e.length-1];for(r[0]===";"&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(r[3]||r[2]||cp(e)),s.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let h=e[0][0];if(h===":"||h==="space"||h==="comment")break;s.prop+=e.shift()[1]}s.raws.between="";let n;for(;e.length;)if(n=e.shift(),n[0]===":"){s.raws.between+=n[1];break}else n[0]==="word"&&/\w/.test(n[1])&&this.unknownWord([n]),s.raws.between+=n[1];(s.prop[0]==="_"||s.prop[0]==="*")&&(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o=[],a;for(;e.length&&(a=e[0][0],!(a!=="space"&&a!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let h=e.length-1;h>=0;h--){if(n=e[h],n[1].toLowerCase()==="!important"){s.important=!0;let c=this.stringFrom(e,h);c=this.spacesFromEnd(e)+c,c!==" !important"&&(s.raws.important=c);break}else if(n[1].toLowerCase()==="important"){let c=e.slice(0),u="";for(let g=h;g>0;g--){let f=c[g][0];if(u.trim().indexOf("!")===0&&f!=="space")break;u=c.pop()[1]+u}u.trim().indexOf("!")===0&&(s.important=!0,s.raws.important=u,e=c)}if(n[0]!=="space"&&n[0]!=="comment")break}e.some(h=>h[0]!=="space"&&h[0]!=="comment")&&(s.raws.between+=o.map(h=>h[1]).join(""),o=[]),this.raw(s,"value",o.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Zo;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],a=e[1].startsWith("--"),l=[],h=e;for(;h;){if(s=h[0],l.push(h),s==="("||s==="[")n||(n=h),o.push(s==="("?")":"]");else if(a&&r&&s==="{")n||(n=h),o.push("}");else if(o.length===0)if(s===";")if(r){this.decl(l,a);return}else break;else if(s==="{"){this.rule(l);return}else if(s==="}"){this.tokenizer.back(l.pop()),t=!0;break}else s===":"&&(r=!0);else s===o[o.length-1]&&(o.pop(),o.length===0&&(n=null));h=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!a)for(;l.length&&(h=l[l.length-1][0],!(h!=="space"&&h!=="comment"));)this.tokenizer.back(l.pop());this.decl(l,a)}else this.unknownWord(l)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,a=s.length,l="",h=!0,c,u;for(let g=0;g<a;g+=1)n=s[g],o=n[0],o==="space"&&g===a-1&&!r?h=!1:o==="comment"?(u=s[g-1]?s[g-1][0]:"empty",c=s[g+1]?s[g+1][0]:"empty",!Qo[u]&&!Qo[c]?l.slice(-1)===","?h=!1:l+=n[1]:h=!1):l+=n[1];if(!h){let g=s.reduce((f,d)=>f+d[1],"");e.raws[t]={raw:g,value:l}}e[t]=l}rule(e){e.pop();let t=new Zo;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],t==="space");)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},dp=up,fp=ht,pp=dp,mp=Is;function fs(i,e){let t=new mp(i,e),s=new pp(t);try{s.parse()}catch(r){throw r}return s.root}var An=fs;fs.default=fs;fp.registerParse(fs);var{isClean:Oe,my:gp}=ui,yp=fl,vp=Es,bp=ht,wp=wn;var ea=Sn,Sp=An,Cp=di,Ep={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Ap={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},xp={Once:!0,postcssPlugin:!0,prepare:!0},xt=0;function Jt(i){return typeof i=="object"&&typeof i.then=="function"}function Ml(i){let e=!1,t=Ep[i.type];return i.type==="decl"?e=i.prop.toLowerCase():i.type==="atrule"&&(e=i.name.toLowerCase()),e&&i.append?[t,t+"-"+e,xt,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:i.append?[t,xt,t+"Exit"]:[t,t+"Exit"]}function ta(i){let e;return i.type==="document"?e=["Document",xt,"DocumentExit"]:i.type==="root"?e=["Root",xt,"RootExit"]:e=Ml(i),{eventIndex:0,events:e,iterator:0,node:i,visitorIndex:0,visitors:[]}}function Hr(i){return i[Oe]=!1,i.nodes&&i.nodes.forEach(e=>Hr(e)),i}var jr={},It=class Nl{constructor(e,t,s){this.stringified=!1,this.processed=!1;let r;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))r=Hr(t);else if(t instanceof Nl||t instanceof ea)r=Hr(t.root),t.map&&(typeof s.map=="undefined"&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=t.map);else{let n=Sp;s.syntax&&(n=s.syntax.parse),s.parser&&(n=s.parser),n.parse&&(n=n.parse);try{r=n(t,s)}catch(o){this.processed=!0,this.error=o}r&&!r[gp]&&bp.rebuild(r)}this.result=new ea(e,r,s),this.helpers=ne(I({},jr),{postcss:jr,result:this.result}),this.plugins=this.processor.plugins.map(n=>typeof n=="object"&&n.prepare?I(I({},n),n.prepare(this.result)):n)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=s.postcssPlugin,e.setMessage()):s.postcssVersion}catch(r){console&&console.error&&console.error(r)}return e}prepareVisitors(){this.listeners={};let e=(t,s,r)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([t,r])};for(let t of this.plugins)if(typeof t=="object")for(let s in t){if(!Ap[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!xp[s])if(typeof t[s]=="object")for(let r in t[s])r==="*"?e(t,s,t[s][r]):e(t,s+"-"+r.toLowerCase(),t[s][r]);else typeof t[s]=="function"&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(Jt(s))try{await s}catch(r){throw this.handleError(r)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Oe];){e[Oe]=!0;let t=[ta(e)];for(;t.length>0;){let s=this.visitTick(t);if(Jt(s))try{await s}catch(r){let n=t[t.length-1].node;throw this.handleError(r,n)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let r=e.nodes.map(n=>s(n,this.helpers));await Promise.all(r)}else await s(e,this.helpers)}catch(r){throw this.handleError(r)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(s=>e.Once(s,this.helpers));return Jt(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=vp;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new yp(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Jt(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Oe];)e[Oe]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){this.result.lastPlugin=s;let n;try{n=r(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Jt(n))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if(s.type!=="root"&&s.type!=="document"&&!s.parent){e.pop();return}if(r.length>0&&t.visitorIndex<r.length){let[o,a]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(s.toProxy(),this.helpers)}catch(l){throw this.handleError(l,s)}}if(t.iterator!==0){let o=t.iterator,a;for(;a=s.nodes[s.indexes[o]];)if(s.indexes[o]+=1,!a[Oe]){a[Oe]=!0,e.push(ta(a));return}t.iterator=0,delete s.indexes[o]}let n=t.events;for(;t.eventIndex<n.length;){let o=n[t.eventIndex];if(t.eventIndex+=1,o===xt){s.nodes&&s.nodes.length&&(s[Oe]=!0,t.iterator=s.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[Oe]=!0;let t=Ml(e);for(let s of t)if(s===xt)e.nodes&&e.each(r=>{r[Oe]||this.walkSync(r)});else{let r=this.listeners[s];if(r&&this.visitSync(r,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};It.registerPostcss=i=>{jr=i};var Dl=It;It.default=It;Cp.registerLazyResult(It);wp.registerLazyResult(It);var Ip=fl,Rp=Es;var kp=An,Tp=Sn,Wr=class{constructor(e,t,s){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let r,n=Rp;this.result=new Tp(this._processor,r,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let a=new Ip(n,r,this._opts,t);if(a.isMap()){let[l,h]=a.generate();l&&(this.result.css=l),h&&(this.result.map=h)}else a.clearAnnotation(),this.result.css=a.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=kp;try{e=t(this._css,this._opts)}catch(s){this.error=s}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},_p=Wr;Wr.default=Wr;var Op=_p,Mp=Dl,Np=wn,Dp=di,ni=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(s.postcss===!0?s=s():s.postcss&&(s=s.postcss),typeof s=="object"&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if(typeof s=="object"&&s.postcssPlugin)t.push(s);else if(typeof s=="function")t.push(s);else if(!(typeof s=="object"&&(s.parse||s.stringify)))throw new Error(s+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new Op(this,e,t):new Mp(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},Pp=ni;ni.default=ni;Dp.registerProcessor(ni);Np.registerProcessor(ni);var Lp=xs,$p=ll,Fp=Rs,Up=Cn,Bp=Is,Hp=di,jp=En;function oi(i,e){if(Array.isArray(i))return i.map(o=>oi(o));let r=i,{inputs:t}=r,s=We(r,["inputs"]);if(t){e=[];for(let o of t){let a=ne(I({},o),{__proto__:Bp.prototype});a.map&&(a.map=ne(I({},a.map),{__proto__:$p.prototype})),e.push(a)}}if(s.nodes&&(s.nodes=i.nodes.map(o=>oi(o,e))),s.source){let n=s.source,{inputId:o}=n,a=We(n,["inputId"]);s.source=a,o!=null&&(s.source.input=e[o])}if(s.type==="root")return new Hp(s);if(s.type==="decl")return new Lp(s);if(s.type==="rule")return new jp(s);if(s.type==="comment")return new Fp(s);if(s.type==="atrule")return new Up(s);throw new Error("Unknown node type: "+i.type)}var Wp=oi;oi.default=oi;var Vp=yn,Pl=xs,zp=Dl,Gp=ht,xn=Pp,Jp=Es,Xp=Wp,Ll=wn,Yp=xl,$l=Rs,Fl=Cn,Kp=Sn,qp=Is,Zp=An,Qp=_l,Ul=En,Bl=di,em=As;function W(...i){return i.length===1&&Array.isArray(i[0])&&(i=i[0]),new xn(i)}W.plugin=function(e,t){let s=!1;function r(...o){console&&console.warn&&!s&&(s=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let a=t(...o);return a.postcssPlugin=e,a.postcssVersion=new xn().version,a}let n;return Object.defineProperty(r,"postcss",{get(){return n||(n=r()),n}}),r.process=function(o,a,l){return W([r(l)]).process(o,a)},r};W.stringify=Jp;W.parse=Zp;W.fromJSON=Xp;W.list=Qp;W.comment=i=>new $l(i);W.atRule=i=>new Fl(i);W.decl=i=>new Pl(i);W.rule=i=>new Ul(i);W.root=i=>new Bl(i);W.document=i=>new Ll(i);W.CssSyntaxError=Vp;W.Declaration=Pl;W.Container=Gp;W.Processor=xn;W.Document=Ll;W.Comment=$l;W.Warning=Yp;W.AtRule=Fl;W.Result=Kp;W.Input=qp;W.Rule=Ul;W.Root=Bl;W.Node=em;zp.registerPostcss(W);var tm=W;W.default=W;var K=ff(tm);K.stringify;K.fromJSON;K.plugin;K.parse;K.list;K.document;K.comment;K.atRule;K.rule;K.decl;K.root;K.CssSyntaxError;K.Declaration;K.Container;K.Processor;K.Document;K.Comment;K.Warning;K.AtRule;K.Result;K.Input;K.Rule;K.Root;K.Node;var ai=class{constructor(...e){be(this,"parentElement",null),be(this,"parentNode",null),be(this,"ownerDocument"),be(this,"firstChild",null),be(this,"lastChild",null),be(this,"previousSibling",null),be(this,"nextSibling",null),be(this,"ELEMENT_NODE",1),be(this,"TEXT_NODE",3),be(this,"nodeType"),be(this,"nodeName"),be(this,"RRNodeType")}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof ai){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var ia={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},sa={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Xi={},im=()=>!!globalThis.Zone;function In(i){if(Xi[i])return Xi[i];let e=globalThis[i],t=e.prototype,s=i in ia?ia[i]:void 0,r=!!(s&&s.every(a=>{var l,h;return!!((h=(l=Object.getOwnPropertyDescriptor(t,a))==null?void 0:l.get)!=null&&h.toString().includes("[native code]"))})),n=i in sa?sa[i]:void 0,o=!!(n&&n.every(a=>{var l;return typeof t[a]=="function"&&((l=t[a])==null?void 0:l.toString().includes("[native code]"))}));if(r&&o&&!im())return Xi[i]=e.prototype,e.prototype;try{let a=document.createElement("iframe");document.body.appendChild(a);let l=a.contentWindow;if(!l)return e.prototype;let h=l[i].prototype;return document.body.removeChild(a),h?Xi[i]=h:t}catch(a){return t}}var hr={};function Ye(i,e,t){var s;let r=`${i}.${String(t)}`;if(hr[r])return hr[r].call(e);let n=In(i),o=(s=Object.getOwnPropertyDescriptor(n,t))==null?void 0:s.get;return o?(hr[r]=o,o.call(e)):e[t]}var cr={};function Hl(i,e,t){let s=`${i}.${String(t)}`;if(cr[s])return cr[s].bind(e);let n=In(i)[t];return typeof n!="function"?e[t]:(cr[s]=n,n.bind(e))}function sm(i){return Ye("Node",i,"childNodes")}function rm(i){return Ye("Node",i,"parentNode")}function nm(i){return Ye("Node",i,"parentElement")}function om(i){return Ye("Node",i,"textContent")}function am(i,e){return Hl("Node",i,"contains")(e)}function lm(i){return Hl("Node",i,"getRootNode")()}function hm(i){return!i||!("host"in i)?null:Ye("ShadowRoot",i,"host")}function cm(i){return i.styleSheets}function um(i){return!i||!("shadowRoot"in i)?null:Ye("Element",i,"shadowRoot")}function dm(i,e){return Ye("Element",i,"querySelector")(e)}function fm(i,e){return Ye("Element",i,"querySelectorAll")(e)}function jl(){return In("MutationObserver").constructor}var O={childNodes:sm,parentNode:rm,parentElement:nm,textContent:om,contains:am,getRootNode:lm,host:hm,styleSheets:cm,shadowRoot:um,querySelector:dm,querySelectorAll:fm,mutationObserver:jl};function le(i,e,t=document){let s={capture:!0,passive:!0};return t.addEventListener(i,e,s),()=>t.removeEventListener(i,e,s)}var gt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,ra={map:{},getId(){return console.error(gt),-1},getNode(){return console.error(gt),null},removeNodeFromMap(){console.error(gt)},has(){return console.error(gt),!1},reset(){console.error(gt)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(ra=new Proxy(ra,{get(i,e,t){return e==="map"&&console.error(gt),Reflect.get(i,e,t)}}));function li(i,e,t={}){let s=null,r=0;return function(...n){let o=Date.now();!r&&t.leading===!1&&(r=o);let a=e-(o-r),l=this;a<=0||a>e?(s&&(clearTimeout(s),s=null),r=o,i.apply(l,n)):!s&&t.trailing!==!1&&(s=setTimeout(()=>{r=t.leading===!1?0:Date.now(),s=null,i.apply(l,n)},a))}}function ks(i,e,t,s,r=window){let n=r.Object.getOwnPropertyDescriptor(i,e);return r.Object.defineProperty(i,e,s?t:{set(o){setTimeout(()=>{t.set.call(this,o)},0),n&&n.set&&n.set.call(this,o)}}),()=>ks(i,e,n||{},!0)}function kt(i,e,t){try{if(!(e in i))return()=>{};let s=i[e],r=t(s);return typeof r=="function"&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:s}})),i[e]=r,()=>{i[e]=s}}catch(s){return()=>{}}}var ps=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(ps=()=>new Date().getTime());function Wl(i){var e,t,s,r;let n=i.document;return{left:n.scrollingElement?n.scrollingElement.scrollLeft:i.pageXOffset!==void 0?i.pageXOffset:n.documentElement.scrollLeft||(n==null?void 0:n.body)&&((e=O.parentElement(n.body))==null?void 0:e.scrollLeft)||((t=n==null?void 0:n.body)==null?void 0:t.scrollLeft)||0,top:n.scrollingElement?n.scrollingElement.scrollTop:i.pageYOffset!==void 0?i.pageYOffset:(n==null?void 0:n.documentElement.scrollTop)||(n==null?void 0:n.body)&&((s=O.parentElement(n.body))==null?void 0:s.scrollTop)||((r=n==null?void 0:n.body)==null?void 0:r.scrollTop)||0}}function Vl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function zl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Gl(i){return i?i.nodeType===i.ELEMENT_NODE?i:O.parentElement(i):null}function he(i,e,t,s){if(!i)return!1;let r=Gl(i);if(!r)return!1;try{if(typeof e=="string"){if(r.classList.contains(e)||s&&r.closest("."+e)!==null)return!0}else if(ns(r,e,s))return!0}catch(n){}return!!(t&&(r.matches(t)||s&&r.closest(t)!==null))}function pm(i,e){return e.getId(i)!==-1}function ur(i,e,t){return i.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(i)===Zt}function Jl(i,e){if(Yt(i))return!1;let t=e.getId(i);if(!e.has(t))return!0;let s=O.parentNode(i);return s&&s.nodeType===i.DOCUMENT_NODE?!1:s?Jl(s,e):!0}function Vr(i){return!!i.changedTouches}function mm(i=window){"NodeList"in i&&!i.NodeList.prototype.forEach&&(i.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in i&&!i.DOMTokenList.prototype.forEach&&(i.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function Xl(i,e){return!!(i.nodeName==="IFRAME"&&e.getMeta(i))}function Yl(i,e){return!!(i.nodeName==="LINK"&&i.nodeType===i.ELEMENT_NODE&&i.getAttribute&&i.getAttribute("rel")==="stylesheet"&&e.getMeta(i))}function zr(i){return i?i instanceof ai&&"shadowRoot"in i?!!i.shadowRoot:!!O.shadowRoot(i):!1}var Gr=class{constructor(){S(this,"id",1),S(this,"styleIDMap",new WeakMap),S(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!=null?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let s;return t===void 0?s=this.id++:s=t,this.styleIDMap.set(e,s),this.idStyleMap.set(s,e),s}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Kl(i){var e;let t=null;return"getRootNode"in i&&((e=O.getRootNode(i))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&O.host(O.getRootNode(i))&&(t=O.host(O.getRootNode(i))),t}function gm(i){let e=i,t;for(;t=Kl(e);)e=t;return e}function ym(i){let e=i.ownerDocument;if(!e)return!1;let t=gm(i);return O.contains(e,t)}function ql(i){let e=i.ownerDocument;return e?O.contains(e,i)||ym(i):!1}var U=(i=>(i[i.DomContentLoaded=0]="DomContentLoaded",i[i.Load=1]="Load",i[i.FullSnapshot=2]="FullSnapshot",i[i.IncrementalSnapshot=3]="IncrementalSnapshot",i[i.Meta=4]="Meta",i[i.Custom=5]="Custom",i[i.Plugin=6]="Plugin",i))(U||{}),D=(i=>(i[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i))(D||{}),pe=(i=>(i[i.MouseUp=0]="MouseUp",i[i.MouseDown=1]="MouseDown",i[i.Click=2]="Click",i[i.ContextMenu=3]="ContextMenu",i[i.DblClick=4]="DblClick",i[i.Focus=5]="Focus",i[i.Blur=6]="Blur",i[i.TouchStart=7]="TouchStart",i[i.TouchMove_Departed=8]="TouchMove_Departed",i[i.TouchEnd=9]="TouchEnd",i[i.TouchCancel=10]="TouchCancel",i))(pe||{}),Ue=(i=>(i[i.Mouse=0]="Mouse",i[i.Pen=1]="Pen",i[i.Touch=2]="Touch",i))(Ue||{}),Rt=(i=>(i[i["2D"]=0]="2D",i[i.WebGL=1]="WebGL",i[i.WebGL2=2]="WebGL2",i))(Rt||{}),yt=(i=>(i[i.Play=0]="Play",i[i.Pause=1]="Pause",i[i.Seeked=2]="Seeked",i[i.VolumeChange=3]="VolumeChange",i[i.RateChange=4]="RateChange",i))(yt||{});var Zl=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(Zl||{});function na(i){return"__ln"in i}var Jr=class{constructor(){S(this,"length",0),S(this,"head",null),S(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let s=0;s<e;s++)t=(t==null?void 0:t.next)||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&na(e.previousSibling)){let s=e.previousSibling.__ln.next;t.next=s,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,s&&(s.previous=t)}else if(e.nextSibling&&na(e.nextSibling)&&e.nextSibling.__ln.previous){let s=e.nextSibling.__ln.previous;t.previous=s,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,s&&(s.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},oa=(i,e)=>`${i}@${e}`,Xr=class{constructor(){S(this,"frozen",!1),S(this,"locked",!1),S(this,"texts",[]),S(this,"attributes",[]),S(this,"attributeMap",new WeakMap),S(this,"removes",[]),S(this,"mapRemoves",[]),S(this,"movedMap",{}),S(this,"addedSet",new Set),S(this,"movedSet",new Set),S(this,"droppedSet",new Set),S(this,"removesSubTreeCache",new Set),S(this,"mutationCb"),S(this,"blockClass"),S(this,"blockSelector"),S(this,"maskTextClass"),S(this,"maskTextSelector"),S(this,"inlineStylesheet"),S(this,"maskInputOptions"),S(this,"maskTextFn"),S(this,"maskInputFn"),S(this,"keepIframeSrcFn"),S(this,"recordCanvas"),S(this,"inlineImages"),S(this,"slimDOMOptions"),S(this,"dataURLOptions"),S(this,"doc"),S(this,"mirror"),S(this,"iframeManager"),S(this,"stylesheetManager"),S(this,"shadowDomManager"),S(this,"canvasManager"),S(this,"processedNodeManager"),S(this,"unattachedDoc"),S(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),S(this,"emit",()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,s=new Jr,r=l=>{let h=l,c=Zt;for(;c===Zt;)h=h&&h.nextSibling,c=h&&this.mirror.getId(h);return c},n=l=>{let h=O.parentNode(l);if(!h||!ql(l))return;let c=!1;if(l.nodeType===Node.TEXT_NODE){let d=h.tagName;if(d==="TEXTAREA")return;d==="STYLE"&&this.addedSet.has(h)&&(c=!0)}let u=Yt(h)?this.mirror.getId(Kl(l)):this.mirror.getId(h),g=r(l);if(u===-1||g===-1)return s.addNode(l);let f=bt(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:d=>{Xl(d,this.mirror)&&this.iframeManager.addIframe(d),Yl(d,this.mirror)&&this.stylesheetManager.trackLinkElement(d),zr(l)&&this.shadowDomManager.addShadowRoot(O.shadowRoot(l),this.doc)},onIframeLoad:(d,m)=>{this.iframeManager.attachIframe(d,m),this.shadowDomManager.observeAttachShadow(d)},onStylesheetLoad:(d,m)=>{this.stylesheetManager.attachLinkElement(d,m)},cssCaptured:c});f&&(e.push({parentId:u,nextId:g,node:f}),t.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let l of this.movedSet)aa(this.removesSubTreeCache,l,this.mirror)&&!this.movedSet.has(O.parentNode(l))||n(l);for(let l of this.addedSet)!la(this.droppedSet,l)&&!aa(this.removesSubTreeCache,l,this.mirror)||la(this.movedSet,l)?n(l):this.droppedSet.add(l);let o=null;for(;s.length;){let l=null;if(o){let h=this.mirror.getId(O.parentNode(o.value)),c=r(o.value);h!==-1&&c!==-1&&(l=o)}if(!l){let h=s.tail;for(;h;){let c=h;if(h=h.previous,c){let u=this.mirror.getId(O.parentNode(c.value));if(r(c.value)===-1)continue;if(u!==-1){l=c;break}else{let f=c.value,d=O.parentNode(f);if(d&&d.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=O.host(d);if(this.mirror.getId(m)!==-1){l=c;break}}}}}}if(!l){for(;s.head;)s.removeNode(s.head.value);break}o=l.previous,s.removeNode(l.value),n(l.value)}let a={texts:this.texts.map(l=>{let h=l.node,c=O.parentNode(h);return c&&c.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(c),{id:this.mirror.getId(h),value:l.value}}).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{let{attributes:h}=l;if(typeof h.style=="string"){let c=JSON.stringify(l.styleDiff),u=JSON.stringify(l._unchangedStyles);c.length<h.style.length&&(c+u).split("var(").length===h.style.split("var(").length&&(h.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:h}}).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(a))}),S(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(O.childNodes(e),s=>O.textContent(s)||"").join("")}),S(this,"processMutation",e=>{if(!ur(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{let t=O.textContent(e.target);!he(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:Ca(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,Gl(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{let t=e.target,s=e.attributeName,r=e.target.getAttribute(s);if(s==="value"){let o=rn(t);r=sn({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:o,value:r,maskInputFn:this.maskInputFn})}if(he(e.target,this.blockClass,this.blockSelector,!1)||r===e.oldValue)return;let n=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(r))if(!t.contentDocument)s="rr_src";else return;if(n||(n={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(n),this.attributeMap.set(e.target,n)),s==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!Sa(t.tagName,s))if(n.attributes[s]=wa(this.doc,at(t.tagName),at(s),r),s==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(a){this.unattachedDoc=this.doc}let o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(let a of Array.from(t.style)){let l=t.style.getPropertyValue(a),h=t.style.getPropertyPriority(a);l!==o.style.getPropertyValue(a)||h!==o.style.getPropertyPriority(a)?h===""?n.styleDiff[a]=l:n.styleDiff[a]=[l,h]:n._unchangedStyles[a]=[l,h]}for(let a of Array.from(o.style))t.style.getPropertyValue(a)===""&&(n.styleDiff[a]=!1)}else s==="open"&&t.tagName==="DIALOG"&&(t.matches("dialog:modal")?n.attributes.rr_open_mode="modal":n.attributes.rr_open_mode="non-modal");break}case"childList":{if(he(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let s=this.mirror.getId(t),r=Yt(e.target)?this.mirror.getId(O.host(e.target)):this.mirror.getId(e.target);he(e.target,this.blockClass,this.blockSelector,!1)||ur(t,this.mirror,this.slimDOMOptions)||!pm(t,this.mirror)||(this.addedSet.has(t)?(Yr(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&s===-1||Jl(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[oa(s,r)]?Yr(this.movedSet,t):(this.removes.push({parentId:r,id:s,isShadow:Yt(e.target)&&Kt(e.target)?!0:void 0}),vm(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}}),S(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(ur(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let s=null;t&&this.mirror.hasNode(t)&&(s=this.mirror.getId(t)),s&&s!==-1&&(this.movedMap[oa(this.mirror.getId(e),s)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);he(e,this.blockClass,this.blockSelector,!1)||(O.childNodes(e).forEach(s=>this.genAdds(s)),zr(e)&&O.childNodes(O.shadowRoot(e)).forEach(s=>{this.processedNodeManager.add(s,this),this.genAdds(s,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Yr(i,e){i.delete(e),O.childNodes(e).forEach(t=>Yr(i,t))}function vm(i,e){let t=[i];for(;t.length;){let s=t.pop();e.has(s)||(e.add(s),O.childNodes(s).forEach(r=>t.push(r)))}}function aa(i,e,t){return i.size===0?!1:bm(i,e)}function bm(i,e,t){let s=O.parentNode(e);return s?i.has(s):!1}function la(i,e){return i.size===0?!1:Ql(i,e)}function Ql(i,e){let t=O.parentNode(e);return t?i.has(t)?!0:Ql(i,t):!1}var qt;function wm(i){qt=i}function Sm(){qt=void 0}var L=i=>qt?(...t)=>{try{return i(...t)}catch(s){if(qt&&qt(s)===!0)return;throw s}}:i,ot=[];function fi(i){try{if("composedPath"in i){let e=i.composedPath();if(e.length)return e[0]}else if("path"in i&&i.path.length)return i.path[0]}catch(e){}return i&&i.target}function eh(i,e){let t=new Xr;ot.push(t),t.init(i);let s=new(jl())(L(t.processMutations.bind(t)));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Cm({mousemoveCb:i,sampling:e,doc:t,mirror:s}){if(e.mousemove===!1)return()=>{};let r=typeof e.mousemove=="number"?e.mousemove:50,n=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500,o=[],a,l=li(L(u=>{let g=Date.now()-a;i(o.map(f=>(f.timeOffset-=g,f)),u),o=[],a=null}),n),h=L(li(L(u=>{let g=fi(u),{clientX:f,clientY:d}=Vr(u)?u.changedTouches[0]:u;a||(a=ps()),o.push({x:f,y:d,id:s.getId(g),timeOffset:ps()-a}),l(typeof DragEvent!="undefined"&&u instanceof DragEvent?D.Drag:u instanceof MouseEvent?D.MouseMove:D.TouchMove)}),r,{trailing:!1})),c=[le("mousemove",h,t),le("touchmove",h,t),le("drag",h,t)];return L(()=>{c.forEach(u=>u())})}function Em({mouseInteractionCb:i,doc:e,mirror:t,blockClass:s,blockSelector:r,sampling:n}){if(n.mouseInteraction===!1)return()=>{};let o=n.mouseInteraction===!0||n.mouseInteraction===void 0?{}:n.mouseInteraction,a=[],l=null,h=c=>u=>{let g=fi(u);if(he(g,s,r,!0))return;let f=null,d=c;if("pointerType"in u){switch(u.pointerType){case"mouse":f=Ue.Mouse;break;case"touch":f=Ue.Touch;break;case"pen":f=Ue.Pen;break}f===Ue.Touch?pe[c]===pe.MouseDown?d="TouchStart":pe[c]===pe.MouseUp&&(d="TouchEnd"):Ue.Pen}else Vr(u)&&(f=Ue.Touch);f!==null?(l=f,(d.startsWith("Touch")&&f===Ue.Touch||d.startsWith("Mouse")&&f===Ue.Mouse)&&(f=null)):pe[c]===pe.Click&&(f=l,l=null);let m=Vr(u)?u.changedTouches[0]:u;if(!m)return;let p=t.getId(g),{clientX:C,clientY:w}=m;L(i)(I({type:pe[d],id:p,x:C,y:w},f!==null&&{pointerType:f}))};return Object.keys(pe).filter(c=>Number.isNaN(Number(c))&&!c.endsWith("_Departed")&&o[c]!==!1).forEach(c=>{let u=at(c),g=h(c);if(window.PointerEvent)switch(pe[c]){case pe.MouseDown:case pe.MouseUp:u=u.replace("mouse","pointer");break;case pe.TouchStart:case pe.TouchEnd:return}a.push(le(u,g,e))}),L(()=>{a.forEach(c=>c())})}function th({scrollCb:i,doc:e,mirror:t,blockClass:s,blockSelector:r,sampling:n}){let o=L(li(L(a=>{let l=fi(a);if(!l||he(l,s,r,!0))return;let h=t.getId(l);if(l===e&&e.defaultView){let c=Wl(e.defaultView);i({id:h,x:c.left,y:c.top})}else i({id:h,x:l.scrollLeft,y:l.scrollTop})}),n.scroll||100));return le("scroll",o,e)}function Am({viewportResizeCb:i},{win:e}){let t=-1,s=-1,r=L(li(L(()=>{let n=Vl(),o=zl();(t!==n||s!==o)&&(i({width:Number(o),height:Number(n)}),t=n,s=o)}),200));return le("resize",r,e)}var xm=["INPUT","TEXTAREA","SELECT"],ha=new WeakMap;function Im({inputCb:i,doc:e,mirror:t,blockClass:s,blockSelector:r,ignoreClass:n,ignoreSelector:o,maskInputOptions:a,maskInputFn:l,sampling:h,userTriggeredOnInput:c}){function u(w){let b=fi(w),A=w.isTrusted,k=b&&b.tagName;if(b&&k==="OPTION"&&(b=O.parentElement(b)),!b||!k||xm.indexOf(k)<0||he(b,s,r,!0)||b.classList.contains(n)||o&&b.matches(o))return;let v=b.value,E=!1,M=rn(b)||"";M==="radio"||M==="checkbox"?E=b.checked:(a[k.toLowerCase()]||a[M])&&(v=sn({element:b,maskInputOptions:a,tagName:k,type:M,value:v,maskInputFn:l})),g(b,c?{text:v,isChecked:E,userTriggered:A}:{text:v,isChecked:E});let $=b.name;M==="radio"&&$&&E&&e.querySelectorAll(`input[type="radio"][name="${$}"]`).forEach(P=>{if(P!==b){let T=P.value;g(P,c?{text:T,isChecked:!E,userTriggered:!1}:{text:T,isChecked:!E})}})}function g(w,b){let A=ha.get(w);if(!A||A.text!==b.text||A.isChecked!==b.isChecked){ha.set(w,b);let k=t.getId(w);L(i)(ne(I({},b),{id:k}))}}let d=(h.input==="last"?["change"]:["input","change"]).map(w=>le(w,L(u),e)),m=e.defaultView;if(!m)return()=>{d.forEach(w=>w())};let p=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),C=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return p&&p.set&&d.push(...C.map(w=>ks(w[0],w[1],{set(){L(u)({target:this,isTrusted:!1})}},!1,m))),L(()=>{d.forEach(w=>w())})}function ms(i){let e=[];function t(s,r){if(Yi("CSSGroupingRule")&&s.parentRule instanceof CSSGroupingRule||Yi("CSSMediaRule")&&s.parentRule instanceof CSSMediaRule||Yi("CSSSupportsRule")&&s.parentRule instanceof CSSSupportsRule||Yi("CSSConditionRule")&&s.parentRule instanceof CSSConditionRule){let o=Array.from(s.parentRule.cssRules).indexOf(s);r.unshift(o)}else if(s.parentStyleSheet){let o=Array.from(s.parentStyleSheet.cssRules).indexOf(s);r.unshift(o)}return r}return t(i,e)}function Je(i,e,t){let s,r;return i?(i.ownerNode?s=e.getId(i.ownerNode):r=t.getId(i),{styleId:r,id:s}):{}}function Rm({styleSheetRuleCb:i,mirror:e,stylesheetManager:t},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};let r=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:L((c,u,g)=>{let[f,d]=g,{id:m,styleId:p}=Je(u,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&i({id:m,styleId:p,adds:[{rule:f,index:d}]}),c.apply(u,g)})}),s.CSSStyleSheet.prototype.addRule=function(c,u,g=this.cssRules.length){let f=`${c} { ${u} }`;return s.CSSStyleSheet.prototype.insertRule.apply(this,[f,g])};let n=s.CSSStyleSheet.prototype.deleteRule;s.CSSStyleSheet.prototype.deleteRule=new Proxy(n,{apply:L((c,u,g)=>{let[f]=g,{id:d,styleId:m}=Je(u,e,t.styleMirror);return(d&&d!==-1||m&&m!==-1)&&i({id:d,styleId:m,removes:[{index:f}]}),c.apply(u,g)})}),s.CSSStyleSheet.prototype.removeRule=function(c){return s.CSSStyleSheet.prototype.deleteRule.apply(this,[c])};let o;s.CSSStyleSheet.prototype.replace&&(o=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:L((c,u,g)=>{let[f]=g,{id:d,styleId:m}=Je(u,e,t.styleMirror);return(d&&d!==-1||m&&m!==-1)&&i({id:d,styleId:m,replace:f}),c.apply(u,g)})}));let a;s.CSSStyleSheet.prototype.replaceSync&&(a=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:L((c,u,g)=>{let[f]=g,{id:d,styleId:m}=Je(u,e,t.styleMirror);return(d&&d!==-1||m&&m!==-1)&&i({id:d,styleId:m,replaceSync:f}),c.apply(u,g)})}));let l={};Ki("CSSGroupingRule")?l.CSSGroupingRule=s.CSSGroupingRule:(Ki("CSSMediaRule")&&(l.CSSMediaRule=s.CSSMediaRule),Ki("CSSConditionRule")&&(l.CSSConditionRule=s.CSSConditionRule),Ki("CSSSupportsRule")&&(l.CSSSupportsRule=s.CSSSupportsRule));let h={};return Object.entries(l).forEach(([c,u])=>{h[c]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(h[c].insertRule,{apply:L((g,f,d)=>{let[m,p]=d,{id:C,styleId:w}=Je(f.parentStyleSheet,e,t.styleMirror);return(C&&C!==-1||w&&w!==-1)&&i({id:C,styleId:w,adds:[{rule:m,index:[...ms(f),p||0]}]}),g.apply(f,d)})}),u.prototype.deleteRule=new Proxy(h[c].deleteRule,{apply:L((g,f,d)=>{let[m]=d,{id:p,styleId:C}=Je(f.parentStyleSheet,e,t.styleMirror);return(p&&p!==-1||C&&C!==-1)&&i({id:p,styleId:C,removes:[{index:[...ms(f),m]}]}),g.apply(f,d)})})}),L(()=>{s.CSSStyleSheet.prototype.insertRule=r,s.CSSStyleSheet.prototype.deleteRule=n,o&&(s.CSSStyleSheet.prototype.replace=o),a&&(s.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([c,u])=>{u.prototype.insertRule=h[c].insertRule,u.prototype.deleteRule=h[c].deleteRule})})}function ih({mirror:i,stylesheetManager:e},t){var s,r,n;let o=null;t.nodeName==="#document"?o=i.getId(t):o=i.getId(O.host(t));let a=t.nodeName==="#document"?(s=t.defaultView)==null?void 0:s.Document:(n=(r=t.ownerDocument)==null?void 0:r.defaultView)==null?void 0:n.ShadowRoot,l=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return o===null||o===-1||!a||!l?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var h;return(h=l.get)==null?void 0:h.call(this)},set(h){var c;let u=(c=l.set)==null?void 0:c.call(this,h);if(o!==null&&o!==-1)try{e.adoptStyleSheets(h,o)}catch(g){}return u}}),L(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))}function km({styleDeclarationCb:i,mirror:e,ignoreCSSAttributes:t,stylesheetManager:s},{win:r}){let n=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=new Proxy(n,{apply:L((a,l,h)=>{var c;let[u,g,f]=h;if(t.has(u))return n.apply(l,[u,g,f]);let{id:d,styleId:m}=Je((c=l.parentRule)==null?void 0:c.parentStyleSheet,e,s.styleMirror);return(d&&d!==-1||m&&m!==-1)&&i({id:d,styleId:m,set:{property:u,value:g,priority:f},index:ms(l.parentRule)}),a.apply(l,h)})});let o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:L((a,l,h)=>{var c;let[u]=h;if(t.has(u))return o.apply(l,[u]);let{id:g,styleId:f}=Je((c=l.parentRule)==null?void 0:c.parentStyleSheet,e,s.styleMirror);return(g&&g!==-1||f&&f!==-1)&&i({id:g,styleId:f,remove:{property:u},index:ms(l.parentRule)}),a.apply(l,h)})}),L(()=>{r.CSSStyleDeclaration.prototype.setProperty=n,r.CSSStyleDeclaration.prototype.removeProperty=o})}function Tm({mediaInteractionCb:i,blockClass:e,blockSelector:t,mirror:s,sampling:r,doc:n}){let o=L(l=>li(L(h=>{let c=fi(h);if(!c||he(c,e,t,!0))return;let{currentTime:u,volume:g,muted:f,playbackRate:d,loop:m}=c;i({type:l,id:s.getId(c),currentTime:u,volume:g,muted:f,playbackRate:d,loop:m})}),r.media||500)),a=[le("play",o(yt.Play),n),le("pause",o(yt.Pause),n),le("seeked",o(yt.Seeked),n),le("volumechange",o(yt.VolumeChange),n),le("ratechange",o(yt.RateChange),n)];return L(()=>{a.forEach(l=>l())})}function _m({fontCb:i,doc:e}){let t=e.defaultView;if(!t)return()=>{};let s=[],r=new WeakMap,n=t.FontFace;t.FontFace=function(l,h,c){let u=new n(l,h,c);return r.set(u,{family:l,buffer:typeof h!="string",descriptors:c,fontSource:typeof h=="string"?h:JSON.stringify(Array.from(new Uint8Array(h)))}),u};let o=kt(e.fonts,"add",function(a){return function(l){return setTimeout(L(()=>{let h=r.get(l);h&&(i(h),r.delete(l))}),0),a.apply(this,[l])}});return s.push(()=>{t.FontFace=n}),s.push(o),L(()=>{s.forEach(a=>a())})}function Om(i){let{doc:e,mirror:t,blockClass:s,blockSelector:r,selectionCb:n}=i,o=!0,a=L(()=>{let l=e.getSelection();if(!l||o&&(l!=null&&l.isCollapsed))return;o=l.isCollapsed||!1;let h=[],c=l.rangeCount||0;for(let u=0;u<c;u++){let g=l.getRangeAt(u),{startContainer:f,startOffset:d,endContainer:m,endOffset:p}=g;he(f,s,r,!0)||he(m,s,r,!0)||h.push({start:t.getId(f),startOffset:d,end:t.getId(m),endOffset:p})}n({ranges:h})});return a(),le("selectionchange",a)}function Mm({doc:i,customElementCb:e}){let t=i.defaultView;return!t||!t.customElements?()=>{}:kt(t.customElements,"define",function(r){return function(n,o,a){try{e({define:{name:n}})}catch(l){console.warn(`Custom element callback failed for ${n}`)}return r.apply(this,[n,o,a])}})}function Nm(i,e){let{mutationCb:t,mousemoveCb:s,mouseInteractionCb:r,scrollCb:n,viewportResizeCb:o,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:h,styleDeclarationCb:c,canvasMutationCb:u,fontCb:g,selectionCb:f,customElementCb:d}=i;i.mutationCb=(...m)=>{e.mutation&&e.mutation(...m),t(...m)},i.mousemoveCb=(...m)=>{e.mousemove&&e.mousemove(...m),s(...m)},i.mouseInteractionCb=(...m)=>{e.mouseInteraction&&e.mouseInteraction(...m),r(...m)},i.scrollCb=(...m)=>{e.scroll&&e.scroll(...m),n(...m)},i.viewportResizeCb=(...m)=>{e.viewportResize&&e.viewportResize(...m),o(...m)},i.inputCb=(...m)=>{e.input&&e.input(...m),a(...m)},i.mediaInteractionCb=(...m)=>{e.mediaInteaction&&e.mediaInteaction(...m),l(...m)},i.styleSheetRuleCb=(...m)=>{e.styleSheetRule&&e.styleSheetRule(...m),h(...m)},i.styleDeclarationCb=(...m)=>{e.styleDeclaration&&e.styleDeclaration(...m),c(...m)},i.canvasMutationCb=(...m)=>{e.canvasMutation&&e.canvasMutation(...m),u(...m)},i.fontCb=(...m)=>{e.font&&e.font(...m),g(...m)},i.selectionCb=(...m)=>{e.selection&&e.selection(...m),f(...m)},i.customElementCb=(...m)=>{e.customElement&&e.customElement(...m),d(...m)}}function Dm(i,e={}){let t=i.doc.defaultView;if(!t)return()=>{};Nm(i,e);let s;i.recordDOM&&(s=eh(i,i.doc));let r=Cm(i),n=Em(i),o=th(i),a=Am(i,{win:t}),l=Im(i),h=Tm(i),c=()=>{},u=()=>{},g=()=>{},f=()=>{};i.recordDOM&&(c=Rm(i,{win:t}),u=ih(i,i.doc),g=km(i,{win:t}),i.collectFonts&&(f=_m(i)));let d=Om(i),m=Mm(i),p=[];for(let C of i.plugins)p.push(C.observer(C.callback,t,C.options));return L(()=>{ot.forEach(C=>C.reset()),s==null||s.disconnect(),r(),n(),o(),a(),l(),h(),c(),u(),g(),f(),d(),m(),p.forEach(C=>C())})}function Yi(i){return typeof window[i]!="undefined"}function Ki(i){return!!(typeof window[i]!="undefined"&&window[i].prototype&&"insertRule"in window[i].prototype&&"deleteRule"in window[i].prototype)}var gs=class{constructor(e){S(this,"iframeIdToRemoteIdMap",new WeakMap),S(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,s,r){let n=s||this.getIdToRemoteIdMap(e),o=r||this.getRemoteIdToIdMap(e),a=n.get(t);return a||(a=this.generateIdFn(),n.set(t,a),o.set(a,t)),a}getIds(e,t){let s=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map(n=>this.getId(e,n,s,r))}getRemoteId(e,t,s){let r=s||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;let n=r.get(t);return n||-1}getRemoteIds(e,t){let s=this.getRemoteIdToIdMap(e);return t.map(r=>this.getRemoteId(e,r,s))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}},Kr=class{constructor(e){S(this,"iframes",new WeakMap),S(this,"crossOriginIframeMap",new WeakMap),S(this,"crossOriginIframeMirror",new gs(ba)),S(this,"crossOriginIframeStyleMirror"),S(this,"crossOriginIframeRootIdMap",new WeakMap),S(this,"mirror"),S(this,"mutationCb"),S(this,"wrappedEmit"),S(this,"loadListener"),S(this,"stylesheetManager"),S(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new gs(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var s,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((s=e.contentWindow)==null||s.addEventListener("message",this.handleMessage.bind(this))),(r=this.loadListener)==null||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;let r=this.crossOriginIframeMap.get(e.source);if(!r)return;let n=this.transformCrossOriginEvent(r,t.data.event);n&&this.wrappedEmit(n,t.data.isCheckout)}transformCrossOriginEvent(e,t){var s;switch(t.type){case U.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:U.IncrementalSnapshot,data:{source:D.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case U.Meta:case U.Load:case U.DomContentLoaded:return!1;case U.Plugin:return t;case U.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case U.IncrementalSnapshot:switch(t.data.source){case D.Mutation:return t.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);let n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(r.node,n)}),t.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),t.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),t.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),t;case D.Drag:case D.TouchMove:case D.MouseMove:return t.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),t;case D.ViewportResize:return!1;case D.MediaInteraction:case D.MouseInteraction:case D.Scroll:case D.CanvasMutation:case D.Input:return this.replaceIds(t.data,e,["id"]),t;case D.StyleSheetRule:case D.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case D.Font:return t;case D.Selection:return t.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),t;case D.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(s=t.data.styles)==null||s.forEach(r=>{this.replaceStyleIds(r,e,["styleId"])}),t}}return!1}replace(e,t,s,r){for(let n of r)!Array.isArray(t[n])&&typeof t[n]!="number"||(Array.isArray(t[n])?t[n]=e.getIds(s,t[n]):t[n]=e.getId(s,t[n]));return t}replaceIds(e,t,s){return this.replace(this.crossOriginIframeMirror,e,t,s)}replaceStyleIds(e,t,s){return this.replace(this.crossOriginIframeStyleMirror,e,t,s)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(s=>{this.replaceIdOnNode(s,t)})}patchRootIdOnNode(e,t){e.type!==Zl.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(s=>{this.patchRootIdOnNode(s,t)})}},qr=class{constructor(e){S(this,"shadowDoms",new WeakSet),S(this,"mutationCb"),S(this,"scrollCb"),S(this,"bypassOptions"),S(this,"mirror"),S(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Kt(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let s=eh(ne(I({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>s.disconnect()),this.restoreHandlers.push(th(ne(I({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(O.host(e))),this.restoreHandlers.push(ih({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let s=this;this.restoreHandlers.push(kt(e.prototype,"attachShadow",function(r){return function(n){let o=r.call(this,n),a=O.shadowRoot(this);return a&&ql(this)&&s.addShadowRoot(a,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}},wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pm=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(Xt=0;Xt<wt.length;Xt++)Pm[wt.charCodeAt(Xt)]=Xt;var Xt,Lm=function(i){var e=new Uint8Array(i),t,s=e.length,r="";for(t=0;t<s;t+=3)r+=wt[e[t]>>2],r+=wt[(e[t]&3)<<4|e[t+1]>>4],r+=wt[(e[t+1]&15)<<2|e[t+2]>>6],r+=wt[e[t+2]&63];return s%3===2?r=r.substring(0,r.length-1)+"=":s%3===1&&(r=r.substring(0,r.length-2)+"=="),r};var ca=new Map;function $m(i,e){let t=ca.get(i);return t||(t=new Map,ca.set(i,t)),t.has(e)||t.set(e,[]),t.get(e)}var sh=(i,e,t)=>{if(!i||!(nh(i,e)||typeof i=="object"))return;let s=i.constructor.name,r=$m(t,s),n=r.indexOf(i);return n===-1&&(n=r.length,r.push(i)),n};function ts(i,e,t){if(i instanceof Array)return i.map(s=>ts(s,e,t));if(i===null)return i;if(i instanceof Float32Array||i instanceof Float64Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Int16Array||i instanceof Int8Array||i instanceof Uint8ClampedArray)return{rr_type:i.constructor.name,args:[Object.values(i)]};if(i instanceof ArrayBuffer){let s=i.constructor.name,r=Lm(i);return{rr_type:s,base64:r}}else{if(i instanceof DataView)return{rr_type:i.constructor.name,args:[ts(i.buffer,e,t),i.byteOffset,i.byteLength]};if(i instanceof HTMLImageElement){let s=i.constructor.name,{src:r}=i;return{rr_type:s,src:r}}else if(i instanceof HTMLCanvasElement){let s="HTMLImageElement",r=i.toDataURL();return{rr_type:s,src:r}}else{if(i instanceof ImageData)return{rr_type:i.constructor.name,args:[ts(i.data,e,t),i.width,i.height]};if(nh(i,e)||typeof i=="object"){let s=i.constructor.name,r=sh(i,e,t);return{rr_type:s,index:r}}}}return i}var rh=(i,e,t)=>i.map(s=>ts(s,e,t)),nh=(i,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(r=>typeof e[r]=="function").find(r=>i instanceof e[r]);function Fm(i,e,t,s){let r=[],n=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(let o of n)try{if(typeof e.CanvasRenderingContext2D.prototype[o]!="function")continue;let a=kt(e.CanvasRenderingContext2D.prototype,o,function(l){return function(...h){return he(this.canvas,t,s,!0)||setTimeout(()=>{let c=rh(h,e,this);i(this.canvas,{type:Rt["2D"],property:o,args:c})},0),l.apply(this,h)}});r.push(a)}catch(a){let l=ks(e.CanvasRenderingContext2D.prototype,o,{set(h){i(this.canvas,{type:Rt["2D"],property:o,args:[h],setter:!0})}});r.push(l)}return()=>{r.forEach(o=>o())}}function Um(i){return i==="experimental-webgl"?"webgl":i}function ua(i,e,t,s){let r=[];try{let n=kt(i.HTMLCanvasElement.prototype,"getContext",function(o){return function(a,...l){if(!he(this,e,t,!0)){let h=Um(a);if("__context"in this||(this.__context=h),s&&["webgl","webgl2"].includes(h))if(l[0]&&typeof l[0]=="object"){let c=l[0];c.preserveDrawingBuffer||(c.preserveDrawingBuffer=!0)}else l.splice(0,1,{preserveDrawingBuffer:!0})}return o.apply(this,[a,...l])}});r.push(n)}catch(n){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach(n=>n())}}function da(i,e,t,s,r,n){let o=[],a=Object.getOwnPropertyNames(i);for(let l of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof i[l]!="function")continue;let h=kt(i,l,function(c){return function(...u){let g=c.apply(this,u);if(sh(g,n,this),"tagName"in this.canvas&&!he(this.canvas,s,r,!0)){let f=rh(u,n,this),d={type:e,property:l,args:f};t(this.canvas,d)}return g}});o.push(h)}catch(h){let c=ks(i,l,{set(u){t(this.canvas,{type:e,property:l,args:[u],setter:!0})}});o.push(c)}return o}function Bm(i,e,t,s){let r=[];return r.push(...da(e.WebGLRenderingContext.prototype,Rt.WebGL,i,t,s,e)),typeof e.WebGL2RenderingContext!="undefined"&&r.push(...da(e.WebGL2RenderingContext.prototype,Rt.WebGL2,i,t,s,e)),()=>{r.forEach(n=>n())}}var oh="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Hm=i=>Uint8Array.from(atob(i),e=>e.charCodeAt(0)),fa=typeof window!="undefined"&&window.Blob&&new Blob([Hm(oh)],{type:"text/javascript;charset=utf-8"});function jm(i){let e;try{if(e=fa&&(window.URL||window.webkitURL).createObjectURL(fa),!e)throw"";let t=new Worker(e,{name:i==null?void 0:i.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch(t){return new Worker("data:text/javascript;base64,"+oh,{name:i==null?void 0:i.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}var Zr=class{constructor(e){S(this,"pendingCanvasMutations",new Map),S(this,"rafStamps",{latestId:0,invokeId:null}),S(this,"mirror"),S(this,"mutationCb"),S(this,"resetObservers"),S(this,"frozen",!1),S(this,"locked",!1),S(this,"processMutation",(l,h)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(h)});let{sampling:t="all",win:s,blockClass:r,blockSelector:n,recordCanvas:o,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&t==="all"&&this.initCanvasMutationObserver(s,r,n),o&&typeof t=="number"&&this.initCanvasFPSObserver(t,s,r,n,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,s,r,n){let o=ua(t,s,r,!0),a=new Map,l=new jm;l.onmessage=d=>{let{id:m}=d.data;if(a.set(m,!1),!("base64"in d.data))return;let{base64:p,type:C,width:w,height:b}=d.data;this.mutationCb({id:m,type:Rt["2D"],commands:[{property:"clearRect",args:[0,0,w,b]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:p}],type:C}]},0,0]}]})};let h=1e3/e,c=0,u,g=()=>{let d=[];return t.document.querySelectorAll("canvas").forEach(m=>{he(m,s,r,!0)||d.push(m)}),d},f=d=>{if(c&&d-c<h){u=requestAnimationFrame(f);return}c=d,g().forEach(async m=>{var p;let C=this.mirror.getId(m);if(a.get(C)||m.width===0||m.height===0)return;if(a.set(C,!0),["webgl","webgl2"].includes(m.__context)){let b=m.getContext(m.__context);((p=b==null?void 0:b.getContextAttributes())==null?void 0:p.preserveDrawingBuffer)===!1&&b.clear(b.COLOR_BUFFER_BIT)}let w=await createImageBitmap(m);l.postMessage({id:C,bitmap:w,width:m.width,height:m.height,dataURLOptions:n.dataURLOptions},[w])}),u=requestAnimationFrame(f)};u=requestAnimationFrame(f),this.resetObservers=()=>{o(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let r=ua(e,t,s,!1),n=Fm(this.processMutation.bind(this),e,t,s),o=Bm(this.processMutation.bind(this),e,t,s);this.resetObservers=()=>{r(),n(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let s=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,s)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let s=this.pendingCanvasMutations.get(e);if(!s||t===-1)return;let r=s.map(o=>{let h=o,{type:a}=h;return We(h,["type"])}),{type:n}=s[0];this.mutationCb({id:t,type:n,commands:r}),this.pendingCanvasMutations.delete(e)}},Qr=class{constructor(e){S(this,"trackedLinkElements",new WeakSet),S(this,"mutationCb"),S(this,"adoptedStyleSheetCb"),S(this,"styleMirror",new Gr),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;let s={id:t,styleIds:[]},r=[];for(let n of e){let o;this.styleMirror.has(n)?o=this.styleMirror.getId(n):(o=this.styleMirror.add(n),r.push({styleId:o,rules:Array.from(n.rules||CSSRule,(a,l)=>({rule:ya(a,n.href),index:l}))})),s.styleIds.push(o)}r.length>0&&(s.styles=r),this.adoptedStyleSheetCb(s)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}},en=class{constructor(){S(this,"nodeMap",new WeakMap),S(this,"active",!1)}inOtherBuffer(e,t){let s=this.nodeMap.get(e);return s&&Array.from(s).some(r=>r!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}},ee,is,dr,ys=!1;try{if(Array.from([1],i=>i*2)[0]!==2){let i=document.createElement("iframe");document.body.appendChild(i),Array.from=((yo=i.contentWindow)==null?void 0:yo.Array.from)||Array.from,document.body.removeChild(i)}}catch(i){console.debug("Unable to override Array.from",i)}var Se=Yc();function je(i={}){let{emit:e,checkoutEveryNms:t,checkoutEveryNth:s,blockClass:r="rr-block",blockSelector:n=null,ignoreClass:o="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:h=null,inlineStylesheet:c=!0,maskAllInputs:u,maskInputOptions:g,slimDOMOptions:f,maskInputFn:d,maskTextFn:m,hooks:p,packFn:C,sampling:w={},dataURLOptions:b={},mousemoveWait:A,recordDOM:k=!0,recordCanvas:v=!1,recordCrossOriginIframes:E=!1,recordAfter:M=i.recordAfter==="DOMContentLoaded"?i.recordAfter:"load",userTriggeredOnInput:$=!1,collectFonts:P=!1,inlineImages:T=!1,plugins:te,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:Me=new Set([]),errorHandler:Ke}=i;wm(Ke);let q=E?window.parent===window:!0,x=!1;if(!q)try{window.parent.document&&(x=!1)}catch(H){x=!0}if(q&&!e)throw new Error("emit function is required");if(!q&&!x)return()=>{};A!==void 0&&w.mousemove===void 0&&(w.mousemove=A),Se.reset();let R=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:g!==void 0?g:{password:!0},F=f===!0||f==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:f==="all",headMetaDescKeywords:f==="all",headTitleMutations:f==="all"}:f||{};mm();let _,B=0,Ne=H=>{for(let we of te||[])we.eventProcessor&&(H=we.eventProcessor(H));return C&&!x&&(H=C(H)),H};ee=(H,we)=>{var Z;let Q=H;if(Q.timestamp=ps(),(Z=ot[0])!=null&&Z.isFrozen()&&Q.type!==U.FullSnapshot&&!(Q.type===U.IncrementalSnapshot&&Q.data.source===D.Mutation)&&ot.forEach(xe=>xe.unfreeze()),q)e==null||e(Ne(Q),we);else if(x){let xe={type:"rrweb",event:Ne(Q),origin:window.location.origin,isCheckout:we};window.parent.postMessage(xe,"*")}if(Q.type===U.FullSnapshot)_=Q,B=0;else if(Q.type===U.IncrementalSnapshot){if(Q.data.source===D.Mutation&&Q.data.isAttachIframe)return;B++;let xe=s&&B>=s,V=t&&Q.timestamp-_.timestamp>t;(xe||V)&&is(!0)}};let ce=H=>{ee({type:U.IncrementalSnapshot,data:I({source:D.Mutation},H)})},De=H=>ee({type:U.IncrementalSnapshot,data:I({source:D.Scroll},H)}),qe=H=>ee({type:U.IncrementalSnapshot,data:I({source:D.CanvasMutation},H)}),Ae=H=>ee({type:U.IncrementalSnapshot,data:I({source:D.AdoptedStyleSheet},H)}),ye=new Qr({mutationCb:ce,adoptedStyleSheetCb:Ae}),re=new Kr({mirror:Se,mutationCb:ce,stylesheetManager:ye,recordCrossOriginIframes:E,wrappedEmit:ee});for(let H of te||[])H.getMirror&&H.getMirror({nodeMirror:Se,crossOriginIframeMirror:re.crossOriginIframeMirror,crossOriginIframeStyleMirror:re.crossOriginIframeStyleMirror});let Ze=new en;dr=new Zr({recordCanvas:v,mutationCb:qe,win:window,blockClass:r,blockSelector:n,mirror:Se,sampling:w.canvas,dataURLOptions:b});let Qe=new qr({mutationCb:ce,scrollCb:De,bypassOptions:{blockClass:r,blockSelector:n,maskTextClass:l,maskTextSelector:h,inlineStylesheet:c,maskInputOptions:R,dataURLOptions:b,maskTextFn:m,maskInputFn:d,recordCanvas:v,inlineImages:T,sampling:w,slimDOMOptions:F,iframeManager:re,stylesheetManager:ye,canvasManager:dr,keepIframeSrcFn:N,processedNodeManager:Ze},mirror:Se});is=(H=!1)=>{if(!k)return;ee({type:U.Meta,data:{href:window.location.href,width:zl(),height:Vl()}},H),ye.reset(),Qe.init(),ot.forEach(Z=>Z.lock());let we=bu(document,{mirror:Se,blockClass:r,blockSelector:n,maskTextClass:l,maskTextSelector:h,inlineStylesheet:c,maskAllInputs:R,maskTextFn:m,maskInputFn:d,slimDOM:F,dataURLOptions:b,recordCanvas:v,inlineImages:T,onSerialize:Z=>{Xl(Z,Se)&&re.addIframe(Z),Yl(Z,Se)&&ye.trackLinkElement(Z),zr(Z)&&Qe.addShadowRoot(O.shadowRoot(Z),document)},onIframeLoad:(Z,Q)=>{re.attachIframe(Z,Q),Qe.observeAttachShadow(Z)},onStylesheetLoad:(Z,Q)=>{ye.attachLinkElement(Z,Q)},keepIframeSrcFn:N});if(!we)return console.warn("Failed to snapshot the document");ee({type:U.FullSnapshot,data:{node:we,initialOffset:Wl(window)}},H),ot.forEach(Z=>Z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ye.adoptStyleSheets(document.adoptedStyleSheets,Se.getId(document))};try{let H=[],we=Q=>{var xe;return L(Dm)({mutationCb:ce,mousemoveCb:(V,Ms)=>ee({type:U.IncrementalSnapshot,data:{source:Ms,positions:V}}),mouseInteractionCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.MouseInteraction},V)}),scrollCb:De,viewportResizeCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.ViewportResize},V)}),inputCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.Input},V)}),mediaInteractionCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.MediaInteraction},V)}),styleSheetRuleCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.StyleSheetRule},V)}),styleDeclarationCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.StyleDeclaration},V)}),canvasMutationCb:qe,fontCb:V=>ee({type:U.IncrementalSnapshot,data:I({source:D.Font},V)}),selectionCb:V=>{ee({type:U.IncrementalSnapshot,data:I({source:D.Selection},V)})},customElementCb:V=>{ee({type:U.IncrementalSnapshot,data:I({source:D.CustomElement},V)})},blockClass:r,ignoreClass:o,ignoreSelector:a,maskTextClass:l,maskTextSelector:h,maskInputOptions:R,inlineStylesheet:c,sampling:w,recordDOM:k,recordCanvas:v,inlineImages:T,userTriggeredOnInput:$,collectFonts:P,doc:Q,maskInputFn:d,maskTextFn:m,keepIframeSrcFn:N,blockSelector:n,slimDOMOptions:F,dataURLOptions:b,mirror:Se,iframeManager:re,stylesheetManager:ye,shadowDomManager:Qe,processedNodeManager:Ze,canvasManager:dr,ignoreCSSAttributes:Me,plugins:((xe=te==null?void 0:te.filter(V=>V.observer))==null?void 0:xe.map(V=>({observer:V.observer,options:V.options,callback:Ms=>ee({type:U.Plugin,data:{plugin:V.name,payload:Ms}})})))||[]},p)};re.addLoadListener(Q=>{try{H.push(we(Q.contentDocument))}catch(xe){console.warn(xe)}});let Z=()=>{is(),H.push(we(document)),ys=!0};return document.readyState==="interactive"||document.readyState==="complete"?Z():(H.push(le("DOMContentLoaded",()=>{ee({type:U.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&Z()})),H.push(le("load",()=>{ee({type:U.Load,data:{}}),M==="load"&&Z()},window))),()=>{H.forEach(Q=>Q()),Ze.destroy(),ys=!1,Sm()}}catch(H){console.warn(H)}}je.addCustomEvent=(i,e)=>{if(!ys)throw new Error("please add custom event after start recording");ee({type:U.Custom,data:{tag:i,payload:e}})};je.freezePage=()=>{ot.forEach(i=>i.freeze())};je.takeFullSnapshot=i=>{if(!ys)throw new Error("please take full snapshot after start recording");is(i)};je.mirror=Se;var pa;(function(i){i[i.NotStarted=0]="NotStarted",i[i.Running=1]="Running",i[i.Stopped=2]="Stopped"})(pa||(pa={}));var zg=5*1e3;var{addCustomEvent:Gg}=je,{freezePage:Jg}=je,{takeFullSnapshot:Xg}=je;var Os=Sh(lh());var Wm={mounted(){this.parentData=null;let i=e=>{e.data&&e.data.type==="DOCK_PARENT_INFO"?(this.parentData=e.data,window.ocParentData=e.data,this.pushEvent("parent_data_received",{project_id:e.data.project_id,context:e.data.context,device_id:e.data.device_id,identity:e.data.identity,url:e.data.url,hostname:e.data.hostname,session_id:e.data.session_id,color:e.data.color,secondary_color:e.data.secondaryColor,is_chat_enabled:e.data.isChatEnabled,is_kb_enabled:e.data.isKBEnabled})):e.data&&e.data.type==="DOCK_URL_CHANGED"?(this.parentData&&(this.parentData.url=e.data.url,window.ocParentData.url=e.data.url),this.pushEvent("url_changed",{url:e.data.url})):e.data&&e.data.type==="DOCK_OPEN"?this.pushEvent("dock_open"):e.data&&e.data.type==="DOCK_CLOSE"&&this.pushEvent("dock_close")};this.handleMessage=i,window.addEventListener("message",this.handleMessage),window.parent&&window.parent!==window&&!window.ocParentData&&(window.isDockReady=!0,window.parent.postMessage({type:"DOCK_READY"},"*")),window.ocParentData&&(this.parentData=window.ocParentData,this.pushEvent("parent_data_received",{project_id:window.ocParentData.project_id,context:window.ocParentData.context,device_id:window.ocParentData.device_id,identity:window.ocParentData.identity,url:window.ocParentData.url,hostname:window.ocParentData.hostname,session_id:window.ocParentData.session_id,color:window.ocParentData.color,secondary_color:window.ocParentData.secondaryColor,is_chat_enabled:window.ocParentData.isChatEnabled,is_kb_enabled:window.ocParentData.isKBEnabled})),this.handleEvent("resize-iframe",({height:e,width:t})=>{window.parent&&window.parent!==window&&window.parent.postMessage({type:"DOCK_RESIZE",height:e,width:t},"*")})},destroyed(){this.handleMessage&&window.removeEventListener("message",this.handleMessage)}},hh=Wm;var Vm={MessageContainer:{mounted(){this.scrollToBottom(),this.handleEvent("conversation_scroll_to_bottom",()=>{this.scrollToBottom()}),this.handleEvent("conversation_delayed_scroll_to_bottom",({delay:i})=>{setTimeout(()=>{this.scrollToBottom()},i)}),this.handleEvent("conversation_maintain_scroll",()=>{this.scrollToTop()}),this.handleEvent("focus_message_input",()=>{let i=document.getElementById("conversation_message_content");i&&setTimeout(()=>i.focus(),100)})},scrollToBottom(){requestAnimationFrame(()=>{this.el.scrollTo({top:this.el.scrollHeight,behavior:"smooth"})})},scrollToTop(){requestAnimationFrame(()=>{this.el.scrollTo({top:0,behavior:"smooth"})})}},PasteUpload:{mounted(){this.inputElement=this.el.querySelector('input[type="text"]'),this.inputElement&&this.inputElement.addEventListener("paste",this.handlePaste.bind(this))},destroyed(){this.inputElement&&this.inputElement.removeEventListener("paste",this.handlePaste.bind(this))},handlePaste(i){let e=(i.clipboardData||i.originalEvent.clipboardData).items;if(e){for(let t of e)if(t.type.indexOf("image")===0){let s=t.getAsFile(),r=new FileReader;r.onload=n=>{this.pushEvent("paste-image",{image:n.target.result})},r.readAsDataURL(s),i.preventDefault();return}}}}},ch=Vm;var zm={mounted(){this.handleEvent=(i,e)=>{i==="send-notification"||(i==null?void 0:i.type)==="phx:send-notification"?window.parent&&window.parent!==window&&window.parent.postMessage({type:"DOCK_NOTIFICATION",hasUnread:!0},"*"):(i==="clear-notification"||(i==null?void 0:i.type)==="phx:clear-notification")&&window.parent&&window.parent!==window&&window.parent.postMessage({type:"DOCK_NOTIFICATION",hasUnread:!1},"*")},window.addEventListener("phx:send-notification",this.handleEvent),window.addEventListener("phx:clear-notification",this.handleEvent)},destroyed(){window.removeEventListener("phx:send-notification",this.handleEvent),window.removeEventListener("phx:clear-notification",this.handleEvent)}},uh=zm;var Gm=document.querySelector("meta[name='csrf-token']").getAttribute("content"),dh=new go("/dock/live",_n,{longPollFallbackMs:2500,params:{_csrf_token:Gm},hooks:I({DockReceiver:hh,NotificationManager:uh},ch)});Os.default.config({barColors:{0:"#737373"},shadowColor:"rgba(0, 0, 0, .3)"});var _s;window.addEventListener("phx:page-loading-start",()=>{_s||(_s=setTimeout(()=>Os.default.show(),200))});window.addEventListener("phx:page-loading-stop",()=>{clearTimeout(_s),_s=void 0,Os.default.hide()});dh.connect();window.liveSocket=dh;if(window.parent!==window)try{let i=je({emit(e){},recordCrossOriginIframes:!0})}catch(i){console.error("[Dock] Failed to start recording:",i)}})();
/**
 * @license MIT
 * topbar 2.0.0, 2023-02-04
 * https://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
/*! Bundled license information:

rrweb/dist/rrweb.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
